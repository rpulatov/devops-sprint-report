var $h=Object.defineProperty;var jh=(t,e,s)=>e in t?$h(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var $=(t,e,s)=>(jh(t,typeof e!="symbol"?e+"":e,s),s);import{r as Ma,_ as Vh,t as Xh,a as qh,m as Pa,b as Na,c as ue,g as Zh,d as Kh,e as Lr,u as Qh,f as Qi,h as Jh,i as ed,j as Fo,k as td,l as Kn,n as Xt,o as U,H as id,C as sd,p as Lo,N as nd,q as Ho,s as rd,v as od,w as Yo,x as ad,y as ld,z as hd,A as dd}from"./index-8db6cac4.js";function ud(t){Ma(1,arguments);var e;if(t&&typeof t.forEach=="function")e=t;else if(Vh(t)==="object"&&t!==null)e=Array.prototype.slice.call(t);else return new Date(NaN);var s;return e.forEach(function(n){var r=Xh(n);(s===void 0||s>r||isNaN(r.getDate()))&&(s=r)}),s||new Date(NaN)}function cd(t,e){var s;Ma(1,arguments);var n=qh((s=e==null?void 0:e.additionalDigits)!==null&&s!==void 0?s:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var r=gd(t),o;if(r.date){var a=yd(r.date,n);o=vd(a.restDateString,a.year)}if(!o||isNaN(o.getTime()))return new Date(NaN);var l=o.getTime(),h=0,d;if(r.time&&(h=bd(r.time),isNaN(h)))return new Date(NaN);if(r.timezone){if(d=_d(r.timezone),isNaN(d))return new Date(NaN)}else{var u=new Date(l+h),c=new Date(0);return c.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),c.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),c}return new Date(l+h+d)}var zs={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},fd=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,pd=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,md=/^([+-])(\d{2})(?::?(\d{2}))?$/;function gd(t){var e={},s=t.split(zs.dateTimeDelimiter),n;if(s.length>2)return e;if(/:/.test(s[0])?n=s[0]:(e.date=s[0],n=s[1],zs.timeZoneDelimiter.test(e.date)&&(e.date=t.split(zs.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){var r=zs.timezone.exec(n);r?(e.time=n.replace(r[1],""),e.timezone=r[1]):e.time=n}return e}function yd(t,e){var s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(s);if(!n)return{year:NaN,restDateString:""};var r=n[1]?parseInt(n[1]):null,o=n[2]?parseInt(n[2]):null;return{year:o===null?r:o*100,restDateString:t.slice((n[1]||n[2]).length)}}function vd(t,e){if(e===null)return new Date(NaN);var s=t.match(fd);if(!s)return new Date(NaN);var n=!!s[4],r=Ji(s[1]),o=Ji(s[2])-1,a=Ji(s[3]),l=Ji(s[4]),h=Ji(s[5])-1;if(n)return Td(e,l,h)?wd(e,l,h):new Date(NaN);var d=new Date(0);return!Sd(e,o,a)||!Dd(e,r)?new Date(NaN):(d.setUTCFullYear(e,o,Math.max(r,a)),d)}function Ji(t){return t?parseInt(t):1}function bd(t){var e=t.match(pd);if(!e)return NaN;var s=Qn(e[1]),n=Qn(e[2]),r=Qn(e[3]);return Cd(s,n,r)?s*Pa+n*Na+r*1e3:NaN}function Qn(t){return t&&parseFloat(t.replace(",","."))||0}function _d(t){if(t==="Z")return 0;var e=t.match(md);if(!e)return 0;var s=e[1]==="+"?-1:1,n=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return kd(n,r)?s*(n*Pa+r*Na):NaN}function wd(t,e,s){var n=new Date(0);n.setUTCFullYear(t,0,4);var r=n.getUTCDay()||7,o=(e-1)*7+s+1-r;return n.setUTCDate(n.getUTCDate()+o),n}var xd=[31,null,31,30,31,30,31,31,30,31,30,31];function Aa(t){return t%400===0||t%4===0&&t%100!==0}function Sd(t,e,s){return e>=0&&e<=11&&s>=1&&s<=(xd[e]||(Aa(t)?29:28))}function Dd(t,e){return e>=1&&e<=(Aa(t)?366:365)}function Td(t,e,s){return e>=1&&e<=53&&s>=0&&s<=6}function Cd(t,e,s){return t===24?e===0&&s===0:s>=0&&s<60&&e>=0&&e<60&&t>=0&&t<25}function kd(t,e){return e>=0&&e<=59}var lr={exports:{}},oi={},Ia={exports:{}},Ed="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Od=Ed,Md=Od;function Ra(){}function Fa(){}Fa.resetWarningCache=Ra;var Pd=function(){function t(n,r,o,a,l,h){if(h!==Md){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var s={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Fa,resetWarningCache:Ra};return s.PropTypes=s,s};Ia.exports=Pd();var La=Ia.exports,hr={exports:{}},ot={},dr={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var s="none",n="contents",r=/input|select|textarea|button|object|iframe/;function o(c,f){return f.getPropertyValue("overflow")!=="visible"||c.scrollWidth<=0&&c.scrollHeight<=0}function a(c){var f=c.offsetWidth<=0&&c.offsetHeight<=0;if(f&&!c.innerHTML)return!0;try{var p=window.getComputedStyle(c),g=p.getPropertyValue("display");return f?g!==n&&o(c,p):g===s}catch{return console.warn("Failed to inspect element style"),!1}}function l(c){for(var f=c,p=c.getRootNode&&c.getRootNode();f&&f!==document.body;){if(p&&f===p&&(f=p.host.parentNode),a(f))return!1;f=f.parentNode}return!0}function h(c,f){var p=c.nodeName.toLowerCase(),g=r.test(p)&&!c.disabled||p==="a"&&c.href||f;return g&&l(c)}function d(c){var f=c.getAttribute("tabindex");f===null&&(f=void 0);var p=isNaN(f);return(p||f>=0)&&h(c,!p)}function u(c){var f=[].slice.call(c.querySelectorAll("*"),0).reduce(function(p,g){return p.concat(g.shadowRoot?u(g.shadowRoot):[g])},[]);return f.filter(d)}t.exports=e.default})(dr,dr.exports);var Ha=dr.exports;Object.defineProperty(ot,"__esModule",{value:!0});ot.resetState=Rd;ot.log=Fd;ot.handleBlur=ms;ot.handleFocus=gs;ot.markForFocusLater=Ld;ot.returnFocus=Hd;ot.popWithoutFocus=Yd;ot.setupScopedFocus=Wd;ot.teardownScopedFocus=Gd;var Nd=Ha,Ad=Id(Nd);function Id(t){return t&&t.__esModule?t:{default:t}}var Fi=[],Ci=null,ur=!1;function Rd(){Fi=[]}function Fd(){}function ms(){ur=!0}function gs(){if(ur){if(ur=!1,!Ci)return;setTimeout(function(){if(!Ci.contains(document.activeElement)){var t=(0,Ad.default)(Ci)[0]||Ci;t.focus()}},0)}}function Ld(){Fi.push(document.activeElement)}function Hd(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{Fi.length!==0&&(e=Fi.pop(),e.focus({preventScroll:t}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function Yd(){Fi.length>0&&Fi.pop()}function Wd(t){Ci=t,window.addEventListener?(window.addEventListener("blur",ms,!1),document.addEventListener("focus",gs,!0)):(window.attachEvent("onBlur",ms),document.attachEvent("onFocus",gs))}function Gd(){Ci=null,window.addEventListener?(window.removeEventListener("blur",ms),document.removeEventListener("focus",gs)):(window.detachEvent("onBlur",ms),document.detachEvent("onFocus",gs))}var cr={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var s=Ha,n=r(s);function r(l){return l&&l.__esModule?l:{default:l}}function o(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return l.activeElement.shadowRoot?o(l.activeElement.shadowRoot):l.activeElement}function a(l,h){var d=(0,n.default)(l);if(!d.length){h.preventDefault();return}var u=void 0,c=h.shiftKey,f=d[0],p=d[d.length-1],g=o();if(l===g){if(!c)return;u=p}if(p===g&&!c&&(u=f),f===g&&c&&(u=p),u){h.preventDefault(),u.focus();return}var y=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),v=y!=null&&y[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(v){var _=d.indexOf(g);if(_>-1&&(_+=c?-1:1),u=d[_],typeof u>"u"){h.preventDefault(),u=c?p:f,u.focus();return}h.preventDefault(),u.focus()}}t.exports=e.default})(cr,cr.exports);var Ud=cr.exports,at={},Bd=function(){},zd=Bd,tt={},Ya={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(t){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),s={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};t.exports?t.exports=s:window.ExecutionEnvironment=s})()})(Ya);var $d=Ya.exports;Object.defineProperty(tt,"__esModule",{value:!0});tt.canUseDOM=tt.SafeNodeList=tt.SafeHTMLCollection=void 0;var jd=$d,Vd=Xd(jd);function Xd(t){return t&&t.__esModule?t:{default:t}}var Mn=Vd.default,qd=Mn.canUseDOM?window.HTMLElement:{};tt.SafeHTMLCollection=Mn.canUseDOM?window.HTMLCollection:{};tt.SafeNodeList=Mn.canUseDOM?window.NodeList:{};tt.canUseDOM=Mn.canUseDOM;tt.default=qd;Object.defineProperty(at,"__esModule",{value:!0});at.resetState=eu;at.log=tu;at.assertNodeList=Wa;at.setElement=iu;at.validateElement=Hr;at.hide=su;at.show=nu;at.documentNotReadyOrSSRTesting=ru;var Zd=zd,Kd=Jd(Zd),Qd=tt;function Jd(t){return t&&t.__esModule?t:{default:t}}var ze=null;function eu(){ze&&(ze.removeAttribute?ze.removeAttribute("aria-hidden"):ze.length!=null?ze.forEach(function(t){return t.removeAttribute("aria-hidden")}):document.querySelectorAll(ze).forEach(function(t){return t.removeAttribute("aria-hidden")})),ze=null}function tu(){}function Wa(t,e){if(!t||!t.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function iu(t){var e=t;if(typeof e=="string"&&Qd.canUseDOM){var s=document.querySelectorAll(e);Wa(s,e),e=s}return ze=e||ze,ze}function Hr(t){var e=t||ze;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,Kd.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function su(t){var e=!0,s=!1,n=void 0;try{for(var r=Hr(t)[Symbol.iterator](),o;!(e=(o=r.next()).done);e=!0){var a=o.value;a.setAttribute("aria-hidden","true")}}catch(l){s=!0,n=l}finally{try{!e&&r.return&&r.return()}finally{if(s)throw n}}}function nu(t){var e=!0,s=!1,n=void 0;try{for(var r=Hr(t)[Symbol.iterator](),o;!(e=(o=r.next()).done);e=!0){var a=o.value;a.removeAttribute("aria-hidden")}}catch(l){s=!0,n=l}finally{try{!e&&r.return&&r.return()}finally{if(s)throw n}}}function ru(){ze=null}var zi={};Object.defineProperty(zi,"__esModule",{value:!0});zi.resetState=ou;zi.log=au;var os={},as={};function Wo(t,e){t.classList.remove(e)}function ou(){var t=document.getElementsByTagName("html")[0];for(var e in os)Wo(t,os[e]);var s=document.body;for(var n in as)Wo(s,as[n]);os={},as={}}function au(){}var lu=function(e,s){return e[s]||(e[s]=0),e[s]+=1,s},hu=function(e,s){return e[s]&&(e[s]-=1),s},du=function(e,s,n){n.forEach(function(r){lu(s,r),e.add(r)})},uu=function(e,s,n){n.forEach(function(r){hu(s,r),s[r]===0&&e.remove(r)})};zi.add=function(e,s){return du(e.classList,e.nodeName.toLowerCase()=="html"?os:as,s.split(" "))};zi.remove=function(e,s){return uu(e.classList,e.nodeName.toLowerCase()=="html"?os:as,s.split(" "))};var $i={};Object.defineProperty($i,"__esModule",{value:!0});$i.log=fu;$i.resetState=pu;function cu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Ga=function t(){var e=this;cu(this,t),this.register=function(s){e.openInstances.indexOf(s)===-1&&(e.openInstances.push(s),e.emit("register"))},this.deregister=function(s){var n=e.openInstances.indexOf(s);n!==-1&&(e.openInstances.splice(n,1),e.emit("deregister"))},this.subscribe=function(s){e.subscribers.push(s)},this.emit=function(s){e.subscribers.forEach(function(n){return n(s,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},dn=new Ga;function fu(){console.log("portalOpenInstances ----------"),console.log(dn.openInstances.length),dn.openInstances.forEach(function(t){return console.log(t)}),console.log("end portalOpenInstances ----------")}function pu(){dn=new Ga}$i.default=dn;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.resetState=vu;Yr.log=bu;var mu=$i,gu=yu(mu);function yu(t){return t&&t.__esModule?t:{default:t}}var xe=void 0,Qe=void 0,ti=[];function vu(){for(var t=[xe,Qe],e=0;e<t.length;e++){var s=t[e];s&&s.parentNode&&s.parentNode.removeChild(s)}xe=Qe=null,ti=[]}function bu(){console.log("bodyTrap ----------"),console.log(ti.length);for(var t=[xe,Qe],e=0;e<t.length;e++){var s=t[e],n=s||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")}function Go(){ti.length!==0&&ti[ti.length-1].focusContent()}function _u(t,e){!xe&&!Qe&&(xe=document.createElement("div"),xe.setAttribute("data-react-modal-body-trap",""),xe.style.position="absolute",xe.style.opacity="0",xe.setAttribute("tabindex","0"),xe.addEventListener("focus",Go),Qe=xe.cloneNode(),Qe.addEventListener("focus",Go)),ti=e,ti.length>0?(document.body.firstChild!==xe&&document.body.insertBefore(xe,document.body.firstChild),document.body.lastChild!==Qe&&document.body.appendChild(Qe)):(xe.parentElement&&xe.parentElement.removeChild(xe),Qe.parentElement&&Qe.parentElement.removeChild(Qe))}gu.default.subscribe(_u);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(N){for(var R=1;R<arguments.length;R++){var de=arguments[R];for(var b in de)Object.prototype.hasOwnProperty.call(de,b)&&(N[b]=de[b])}return N},n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},r=function(){function N(R,de){for(var b=0;b<de.length;b++){var P=de[b];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(R,P.key,P)}}return function(R,de,b){return de&&N(R.prototype,de),b&&N(R,b),R}}(),o=ue,a=La,l=M(a),h=ot,d=A(h),u=Ud,c=M(u),f=at,p=A(f),g=zi,y=A(g),v=tt,_=M(v),D=$i,C=M(D);function A(N){if(N&&N.__esModule)return N;var R={};if(N!=null)for(var de in N)Object.prototype.hasOwnProperty.call(N,de)&&(R[de]=N[de]);return R.default=N,R}function M(N){return N&&N.__esModule?N:{default:N}}function E(N,R){if(!(N instanceof R))throw new TypeError("Cannot call a class as a function")}function I(N,R){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:N}function B(N,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);N.prototype=Object.create(R&&R.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(N,R):N.__proto__=R)}var Ce={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},We=function(R){return R.code==="Tab"||R.keyCode===9},Ws=function(R){return R.code==="Escape"||R.keyCode===27},vt=0,vi=function(N){B(R,N);function R(de){E(this,R);var b=I(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,de));return b.setOverlayRef=function(P){b.overlay=P,b.props.overlayRef&&b.props.overlayRef(P)},b.setContentRef=function(P){b.content=P,b.props.contentRef&&b.props.contentRef(P)},b.afterClose=function(){var P=b.props,ye=P.appElement,we=P.ariaHideApp,pe=P.htmlOpenClassName,bt=P.bodyOpenClassName,H=P.parentSelector,ee=H&&H().ownerDocument||document;bt&&y.remove(ee.body,bt),pe&&y.remove(ee.getElementsByTagName("html")[0],pe),we&&vt>0&&(vt-=1,vt===0&&p.show(ye)),b.props.shouldFocusAfterRender&&(b.props.shouldReturnFocusAfterClose?(d.returnFocus(b.props.preventScroll),d.teardownScopedFocus()):d.popWithoutFocus()),b.props.onAfterClose&&b.props.onAfterClose(),C.default.deregister(b)},b.open=function(){b.beforeOpen(),b.state.afterOpen&&b.state.beforeClose?(clearTimeout(b.closeTimer),b.setState({beforeClose:!1})):(b.props.shouldFocusAfterRender&&(d.setupScopedFocus(b.node),d.markForFocusLater()),b.setState({isOpen:!0},function(){b.openAnimationFrame=requestAnimationFrame(function(){b.setState({afterOpen:!0}),b.props.isOpen&&b.props.onAfterOpen&&b.props.onAfterOpen({overlayEl:b.overlay,contentEl:b.content})})}))},b.close=function(){b.props.closeTimeoutMS>0?b.closeWithTimeout():b.closeWithoutTimeout()},b.focusContent=function(){return b.content&&!b.contentHasFocus()&&b.content.focus({preventScroll:!0})},b.closeWithTimeout=function(){var P=Date.now()+b.props.closeTimeoutMS;b.setState({beforeClose:!0,closesAt:P},function(){b.closeTimer=setTimeout(b.closeWithoutTimeout,b.state.closesAt-Date.now())})},b.closeWithoutTimeout=function(){b.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},b.afterClose)},b.handleKeyDown=function(P){We(P)&&(0,c.default)(b.content,P),b.props.shouldCloseOnEsc&&Ws(P)&&(P.stopPropagation(),b.requestClose(P))},b.handleOverlayOnClick=function(P){b.shouldClose===null&&(b.shouldClose=!0),b.shouldClose&&b.props.shouldCloseOnOverlayClick&&(b.ownerHandlesClose()?b.requestClose(P):b.focusContent()),b.shouldClose=null},b.handleContentOnMouseUp=function(){b.shouldClose=!1},b.handleOverlayOnMouseDown=function(P){!b.props.shouldCloseOnOverlayClick&&P.target==b.overlay&&P.preventDefault()},b.handleContentOnClick=function(){b.shouldClose=!1},b.handleContentOnMouseDown=function(){b.shouldClose=!1},b.requestClose=function(P){return b.ownerHandlesClose()&&b.props.onRequestClose(P)},b.ownerHandlesClose=function(){return b.props.onRequestClose},b.shouldBeClosed=function(){return!b.state.isOpen&&!b.state.beforeClose},b.contentHasFocus=function(){return document.activeElement===b.content||b.content.contains(document.activeElement)},b.buildClassName=function(P,ye){var we=(typeof ye>"u"?"undefined":n(ye))==="object"?ye:{base:Ce[P],afterOpen:Ce[P]+"--after-open",beforeClose:Ce[P]+"--before-close"},pe=we.base;return b.state.afterOpen&&(pe=pe+" "+we.afterOpen),b.state.beforeClose&&(pe=pe+" "+we.beforeClose),typeof ye=="string"&&ye?pe+" "+ye:pe},b.attributesFromObject=function(P,ye){return Object.keys(ye).reduce(function(we,pe){return we[P+"-"+pe]=ye[pe],we},{})},b.state={afterOpen:!1,beforeClose:!1},b.shouldClose=null,b.moveFromContentToOverlay=null,b}return r(R,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(b,P){this.props.isOpen&&!b.isOpen?this.open():!this.props.isOpen&&b.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!P.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var b=this.props,P=b.appElement,ye=b.ariaHideApp,we=b.htmlOpenClassName,pe=b.bodyOpenClassName,bt=b.parentSelector,H=bt&&bt().ownerDocument||document;pe&&y.add(H.body,pe),we&&y.add(H.getElementsByTagName("html")[0],we),ye&&(vt+=1,p.hide(P)),C.default.register(this)}},{key:"render",value:function(){var b=this.props,P=b.id,ye=b.className,we=b.overlayClassName,pe=b.defaultStyles,bt=b.children,H=ye?{}:pe.content,ee=we?{}:pe.overlay;if(this.shouldBeClosed())return null;var Ge={ref:this.setOverlayRef,className:this.buildClassName("overlay",we),style:s({},ee,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},Me=s({id:P,ref:this.setContentRef,style:s({},H,this.props.style.content),className:this.buildClassName("content",ye),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",s({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Vt=this.props.contentElement(Me,bt);return this.props.overlayElement(Ge,Vt)}}]),R}(o.Component);vi.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},vi.propTypes={isOpen:l.default.bool.isRequired,defaultStyles:l.default.shape({content:l.default.object,overlay:l.default.object}),style:l.default.shape({content:l.default.object,overlay:l.default.object}),className:l.default.oneOfType([l.default.string,l.default.object]),overlayClassName:l.default.oneOfType([l.default.string,l.default.object]),parentSelector:l.default.func,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,ariaHideApp:l.default.bool,appElement:l.default.oneOfType([l.default.instanceOf(_.default),l.default.instanceOf(v.SafeHTMLCollection),l.default.instanceOf(v.SafeNodeList),l.default.arrayOf(l.default.instanceOf(_.default))]),onAfterOpen:l.default.func,onAfterClose:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,preventScroll:l.default.bool,role:l.default.string,contentLabel:l.default.string,aria:l.default.object,data:l.default.object,children:l.default.node,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,overlayElement:l.default.func,contentElement:l.default.func,testId:l.default.string},e.default=vi,t.exports=e.default})(hr,hr.exports);var wu=hr.exports;function Ua(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);t!=null&&this.setState(t)}function Ba(t){function e(s){var n=this.constructor.getDerivedStateFromProps(t,s);return n??null}this.setState(e.bind(this))}function za(t,e){try{var s=this.props,n=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,n)}finally{this.props=s,this.state=n}}Ua.__suppressDeprecationWarning=!0;Ba.__suppressDeprecationWarning=!0;za.__suppressDeprecationWarning=!0;function xu(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return t;var s=null,n=null,r=null;if(typeof e.componentWillMount=="function"?s="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(s="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?r="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(r="UNSAFE_componentWillUpdate"),s!==null||n!==null||r!==null){var o=t.displayName||t.name,a=typeof t.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+a+" but also contains the following legacy lifecycles:"+(s!==null?`
  `+s:"")+(n!==null?`
  `+n:"")+(r!==null?`
  `+r:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof t.getDerivedStateFromProps=="function"&&(e.componentWillMount=Ua,e.componentWillReceiveProps=Ba),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=za;var l=e.componentDidUpdate;e.componentDidUpdate=function(d,u,c){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:c;l.call(this,d,u,f)}}return t}const Su=Object.freeze(Object.defineProperty({__proto__:null,polyfill:xu},Symbol.toStringTag,{value:"Module"})),Du=Zh(Su);Object.defineProperty(oi,"__esModule",{value:!0});oi.bodyOpenClassName=oi.portalClassName=void 0;var Uo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Tu=function(){function t(e,s){for(var n=0;n<s.length;n++){var r=s[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),$a=ue,un=Es($a),Cu=Kh,cn=Es(Cu),ku=La,F=Es(ku),Eu=wu,Bo=Es(Eu),Ou=at,Mu=Nu(Ou),Wt=tt,zo=Es(Wt),Pu=Du;function Nu(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e.default=t,e}function Es(t){return t&&t.__esModule?t:{default:t}}function Au(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function Iu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var Ru=oi.portalClassName="ReactModalPortal",Fu=oi.bodyOpenClassName="ReactModal__Body--open",Zt=Wt.canUseDOM&&cn.default.createPortal!==void 0,jo=function(e){return document.createElement(e)},Vo=function(){return Zt?cn.default.createPortal:cn.default.unstable_renderSubtreeIntoContainer};function $s(t){return t()}var Os=function(t){Iu(e,t);function e(){var s,n,r,o;Au(this,e);for(var a=arguments.length,l=Array(a),h=0;h<a;h++)l[h]=arguments[h];return o=(n=(r=$o(this,(s=e.__proto__||Object.getPrototypeOf(e)).call.apply(s,[this].concat(l))),r),r.removePortal=function(){!Zt&&cn.default.unmountComponentAtNode(r.node);var d=$s(r.props.parentSelector);d&&d.contains(r.node)?d.removeChild(r.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},r.portalRef=function(d){r.portal=d},r.renderPortal=function(d){var u=Vo(),c=u(r,un.default.createElement(Bo.default,Uo({defaultStyles:e.defaultStyles},d)),r.node);r.portalRef(c)},n),$o(r,o)}return Tu(e,[{key:"componentDidMount",value:function(){if(Wt.canUseDOM){Zt||(this.node=jo("div")),this.node.className=this.props.portalClassName;var n=$s(this.props.parentSelector);n.appendChild(this.node),!Zt&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(n){var r=$s(n.parentSelector),o=$s(this.props.parentSelector);return{prevParent:r,nextParent:o}}},{key:"componentDidUpdate",value:function(n,r,o){if(Wt.canUseDOM){var a=this.props,l=a.isOpen,h=a.portalClassName;n.portalClassName!==h&&(this.node.className=h);var d=o.prevParent,u=o.nextParent;u!==d&&(d.removeChild(this.node),u.appendChild(this.node)),!(!n.isOpen&&!l)&&!Zt&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!Wt.canUseDOM||!this.node||!this.portal)){var n=this.portal.state,r=Date.now(),o=n.isOpen&&this.props.closeTimeoutMS&&(n.closesAt||r+this.props.closeTimeoutMS);o?(n.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,o-r)):this.removePortal()}}},{key:"render",value:function(){if(!Wt.canUseDOM||!Zt)return null;!this.node&&Zt&&(this.node=jo("div"));var n=Vo();return n(un.default.createElement(Bo.default,Uo({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(n){Mu.setElement(n)}}]),e}($a.Component);Os.propTypes={isOpen:F.default.bool.isRequired,style:F.default.shape({content:F.default.object,overlay:F.default.object}),portalClassName:F.default.string,bodyOpenClassName:F.default.string,htmlOpenClassName:F.default.string,className:F.default.oneOfType([F.default.string,F.default.shape({base:F.default.string.isRequired,afterOpen:F.default.string.isRequired,beforeClose:F.default.string.isRequired})]),overlayClassName:F.default.oneOfType([F.default.string,F.default.shape({base:F.default.string.isRequired,afterOpen:F.default.string.isRequired,beforeClose:F.default.string.isRequired})]),appElement:F.default.oneOfType([F.default.instanceOf(zo.default),F.default.instanceOf(Wt.SafeHTMLCollection),F.default.instanceOf(Wt.SafeNodeList),F.default.arrayOf(F.default.instanceOf(zo.default))]),onAfterOpen:F.default.func,onRequestClose:F.default.func,closeTimeoutMS:F.default.number,ariaHideApp:F.default.bool,shouldFocusAfterRender:F.default.bool,shouldCloseOnOverlayClick:F.default.bool,shouldReturnFocusAfterClose:F.default.bool,preventScroll:F.default.bool,parentSelector:F.default.func,aria:F.default.object,data:F.default.object,role:F.default.string,contentLabel:F.default.string,shouldCloseOnEsc:F.default.bool,overlayRef:F.default.func,contentRef:F.default.func,id:F.default.string,overlayElement:F.default.func,contentElement:F.default.func};Os.defaultProps={isOpen:!1,portalClassName:Ru,bodyOpenClassName:Fu,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,s){return un.default.createElement("div",e,s)},contentElement:function(e,s){return un.default.createElement("div",e,s)}};Os.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,Pu.polyfill)(Os);oi.default=Os;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var s=oi,n=r(s);function r(o){return o&&o.__esModule?o:{default:o}}e.default=n.default,t.exports=e.default})(lr,lr.exports);var Lu=lr.exports;const Hu=Lr(Lu);//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var ja;function x(){return ja.apply(null,arguments)}function Yu(t){ja=t}function st(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function ii(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function X(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Wr(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(X(t,e))return!1;return!0}function Ne(t){return t===void 0}function Mt(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Ms(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Va(t,e){var s=[],n,r=t.length;for(n=0;n<r;++n)s.push(e(t[n],n));return s}function Gt(t,e){for(var s in e)X(e,s)&&(t[s]=e[s]);return X(e,"toString")&&(t.toString=e.toString),X(e,"valueOf")&&(t.valueOf=e.valueOf),t}function gt(t,e,s,n){return yl(t,e,s,n,!0).utc()}function Wu(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function G(t){return t._pf==null&&(t._pf=Wu()),t._pf}var fr;Array.prototype.some?fr=Array.prototype.some:fr=function(t){var e=Object(this),s=e.length>>>0,n;for(n=0;n<s;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};function Gr(t){if(t._isValid==null){var e=G(t),s=fr.call(e.parsedDateParts,function(r){return r!=null}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&s);if(t._strict&&(n=n&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=n;else return n}return t._isValid}function Pn(t){var e=gt(NaN);return t!=null?Gt(G(e),t):G(e).userInvalidated=!0,e}var Xo=x.momentProperties=[],Jn=!1;function Ur(t,e){var s,n,r,o=Xo.length;if(Ne(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),Ne(e._i)||(t._i=e._i),Ne(e._f)||(t._f=e._f),Ne(e._l)||(t._l=e._l),Ne(e._strict)||(t._strict=e._strict),Ne(e._tzm)||(t._tzm=e._tzm),Ne(e._isUTC)||(t._isUTC=e._isUTC),Ne(e._offset)||(t._offset=e._offset),Ne(e._pf)||(t._pf=G(e)),Ne(e._locale)||(t._locale=e._locale),o>0)for(s=0;s<o;s++)n=Xo[s],r=e[n],Ne(r)||(t[n]=r);return t}function Ps(t){Ur(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Jn===!1&&(Jn=!0,x.updateOffset(this),Jn=!1)}function nt(t){return t instanceof Ps||t!=null&&t._isAMomentObject!=null}function Xa(t){x.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function Xe(t,e){var s=!0;return Gt(function(){if(x.deprecationHandler!=null&&x.deprecationHandler(null,t),s){var n=[],r,o,a,l=arguments.length;for(o=0;o<l;o++){if(r="",typeof arguments[o]=="object"){r+=`
[`+o+"] ";for(a in arguments[0])X(arguments[0],a)&&(r+=a+": "+arguments[0][a]+", ");r=r.slice(0,-2)}else r=arguments[o];n.push(r)}Xa(t+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),s=!1}return e.apply(this,arguments)},e)}var qo={};function qa(t,e){x.deprecationHandler!=null&&x.deprecationHandler(t,e),qo[t]||(Xa(e),qo[t]=!0)}x.suppressDeprecationWarnings=!1;x.deprecationHandler=null;function yt(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function Gu(t){var e,s;for(s in t)X(t,s)&&(e=t[s],yt(e)?this[s]=e:this["_"+s]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function pr(t,e){var s=Gt({},t),n;for(n in e)X(e,n)&&(ii(t[n])&&ii(e[n])?(s[n]={},Gt(s[n],t[n]),Gt(s[n],e[n])):e[n]!=null?s[n]=e[n]:delete s[n]);for(n in t)X(t,n)&&!X(e,n)&&ii(t[n])&&(s[n]=Gt({},s[n]));return s}function Br(t){t!=null&&this.set(t)}var mr;Object.keys?mr=Object.keys:mr=function(t){var e,s=[];for(e in t)X(t,e)&&s.push(e);return s};var Uu={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Bu(t,e,s){var n=this._calendar[t]||this._calendar.sameElse;return yt(n)?n.call(e,s):n}function mt(t,e,s){var n=""+Math.abs(t),r=e-n.length,o=t>=0;return(o?s?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}var zr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,js=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,er={},Pi={};function k(t,e,s,n){var r=n;typeof n=="string"&&(r=function(){return this[n]()}),t&&(Pi[t]=r),e&&(Pi[e[0]]=function(){return mt(r.apply(this,arguments),e[1],e[2])}),s&&(Pi[s]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function zu(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function $u(t){var e=t.match(zr),s,n;for(s=0,n=e.length;s<n;s++)Pi[e[s]]?e[s]=Pi[e[s]]:e[s]=zu(e[s]);return function(r){var o="",a;for(a=0;a<n;a++)o+=yt(e[a])?e[a].call(r,t):e[a];return o}}function rn(t,e){return t.isValid()?(e=Za(e,t.localeData()),er[e]=er[e]||$u(e),er[e](t)):t.localeData().invalidDate()}function Za(t,e){var s=5;function n(r){return e.longDateFormat(r)||r}for(js.lastIndex=0;s>=0&&js.test(t);)t=t.replace(js,n),js.lastIndex=0,s-=1;return t}var ju={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Vu(t){var e=this._longDateFormat[t],s=this._longDateFormat[t.toUpperCase()];return e||!s?e:(this._longDateFormat[t]=s.match(zr).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[t])}var Xu="Invalid date";function qu(){return this._invalidDate}var Zu="%d",Ku=/\d{1,2}/;function Qu(t){return this._ordinal.replace("%d",t)}var Ju={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ec(t,e,s,n){var r=this._relativeTime[s];return yt(r)?r(t,e,s,n):r.replace(/%d/i,t)}function tc(t,e){var s=this._relativeTime[t>0?"future":"past"];return yt(s)?s(e):s.replace(/%s/i,e)}var ls={};function De(t,e){var s=t.toLowerCase();ls[s]=ls[s+"s"]=ls[e]=t}function qe(t){return typeof t=="string"?ls[t]||ls[t.toLowerCase()]:void 0}function $r(t){var e={},s,n;for(n in t)X(t,n)&&(s=qe(n),s&&(e[s]=t[n]));return e}var Ka={};function Te(t,e){Ka[t]=e}function ic(t){var e=[],s;for(s in t)X(t,s)&&e.push({unit:s,priority:Ka[s]});return e.sort(function(n,r){return n.priority-r.priority}),e}function Nn(t){return t%4===0&&t%100!==0||t%400===0}function $e(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function z(t){var e=+t,s=0;return e!==0&&isFinite(e)&&(s=$e(e)),s}function ji(t,e){return function(s){return s!=null?(Qa(this,t,s),x.updateOffset(this,e),this):fn(this,t)}}function fn(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Qa(t,e,s){t.isValid()&&!isNaN(s)&&(e==="FullYear"&&Nn(t.year())&&t.month()===1&&t.date()===29?(s=z(s),t._d["set"+(t._isUTC?"UTC":"")+e](s,t.month(),Hn(s,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](s))}function sc(t){return t=qe(t),yt(this[t])?this[t]():this}function nc(t,e){if(typeof t=="object"){t=$r(t);var s=ic(t),n,r=s.length;for(n=0;n<r;n++)this[s[n].unit](t[s[n].unit])}else if(t=qe(t),yt(this[t]))return this[t](e);return this}var Ja=/\d/,Ye=/\d\d/,el=/\d{3}/,jr=/\d{4}/,An=/[+-]?\d{6}/,se=/\d\d?/,tl=/\d\d\d\d?/,il=/\d\d\d\d\d\d?/,In=/\d{1,3}/,Vr=/\d{1,4}/,Rn=/[+-]?\d{1,6}/,Vi=/\d+/,Fn=/[+-]?\d+/,rc=/Z|[+-]\d\d:?\d\d/gi,Ln=/Z|[+-]\d\d(?::?\d\d)?/gi,oc=/[+-]?\d+(\.\d{1,3})?/,Ns=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,pn;pn={};function T(t,e,s){pn[t]=yt(e)?e:function(n,r){return n&&s?s:e}}function ac(t,e){return X(pn,t)?pn[t](e._strict,e._locale):new RegExp(lc(t))}function lc(t){return Fe(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,s,n,r,o){return s||n||r||o}))}function Fe(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var gr={};function K(t,e){var s,n=e,r;for(typeof t=="string"&&(t=[t]),Mt(e)&&(n=function(o,a){a[e]=z(o)}),r=t.length,s=0;s<r;s++)gr[t[s]]=n}function As(t,e){K(t,function(s,n,r,o){r._w=r._w||{},e(s,r._w,r,o)})}function hc(t,e,s){e!=null&&X(gr,t)&&gr[t](e,s._a,s,t)}var Se=0,Dt=1,ut=2,ge=3,et=4,Tt=5,Qt=6,dc=7,uc=8;function cc(t,e){return(t%e+e)%e}var fe;Array.prototype.indexOf?fe=Array.prototype.indexOf:fe=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function Hn(t,e){if(isNaN(t)||isNaN(e))return NaN;var s=cc(e,12);return t+=(e-s)/12,s===1?Nn(t)?29:28:31-s%7%2}k("M",["MM",2],"Mo",function(){return this.month()+1});k("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});k("MMMM",0,0,function(t){return this.localeData().months(this,t)});De("month","M");Te("month",8);T("M",se);T("MM",se,Ye);T("MMM",function(t,e){return e.monthsShortRegex(t)});T("MMMM",function(t,e){return e.monthsRegex(t)});K(["M","MM"],function(t,e){e[Dt]=z(t)-1});K(["MMM","MMMM"],function(t,e,s,n){var r=s._locale.monthsParse(t,n,s._strict);r!=null?e[Dt]=r:G(s).invalidMonth=t});var fc="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),sl="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),nl=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,pc=Ns,mc=Ns;function gc(t,e){return t?st(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||nl).test(e)?"format":"standalone"][t.month()]:st(this._months)?this._months:this._months.standalone}function yc(t,e){return t?st(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[nl.test(e)?"format":"standalone"][t.month()]:st(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function vc(t,e,s){var n,r,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)o=gt([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(o,"").toLocaleLowerCase();return s?e==="MMM"?(r=fe.call(this._shortMonthsParse,a),r!==-1?r:null):(r=fe.call(this._longMonthsParse,a),r!==-1?r:null):e==="MMM"?(r=fe.call(this._shortMonthsParse,a),r!==-1?r:(r=fe.call(this._longMonthsParse,a),r!==-1?r:null)):(r=fe.call(this._longMonthsParse,a),r!==-1?r:(r=fe.call(this._shortMonthsParse,a),r!==-1?r:null))}function bc(t,e,s){var n,r,o;if(this._monthsParseExact)return vc.call(this,t,e,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=gt([2e3,n]),s&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),!s&&!this._monthsParse[n]&&(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),s&&e==="MMMM"&&this._longMonthsParse[n].test(t))return n;if(s&&e==="MMM"&&this._shortMonthsParse[n].test(t))return n;if(!s&&this._monthsParse[n].test(t))return n}}function rl(t,e){var s;if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=z(e);else if(e=t.localeData().monthsParse(e),!Mt(e))return t}return s=Math.min(t.date(),Hn(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,s),t}function ol(t){return t!=null?(rl(this,t),x.updateOffset(this,!0),this):fn(this,"Month")}function _c(){return Hn(this.year(),this.month())}function wc(t){return this._monthsParseExact?(X(this,"_monthsRegex")||al.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(X(this,"_monthsShortRegex")||(this._monthsShortRegex=pc),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function xc(t){return this._monthsParseExact?(X(this,"_monthsRegex")||al.call(this),t?this._monthsStrictRegex:this._monthsRegex):(X(this,"_monthsRegex")||(this._monthsRegex=mc),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function al(){function t(a,l){return l.length-a.length}var e=[],s=[],n=[],r,o;for(r=0;r<12;r++)o=gt([2e3,r]),e.push(this.monthsShort(o,"")),s.push(this.months(o,"")),n.push(this.months(o,"")),n.push(this.monthsShort(o,""));for(e.sort(t),s.sort(t),n.sort(t),r=0;r<12;r++)e[r]=Fe(e[r]),s[r]=Fe(s[r]);for(r=0;r<24;r++)n[r]=Fe(n[r]);this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}k("Y",0,0,function(){var t=this.year();return t<=9999?mt(t,4):"+"+t});k(0,["YY",2],0,function(){return this.year()%100});k(0,["YYYY",4],0,"year");k(0,["YYYYY",5],0,"year");k(0,["YYYYYY",6,!0],0,"year");De("year","y");Te("year",1);T("Y",Fn);T("YY",se,Ye);T("YYYY",Vr,jr);T("YYYYY",Rn,An);T("YYYYYY",Rn,An);K(["YYYYY","YYYYYY"],Se);K("YYYY",function(t,e){e[Se]=t.length===2?x.parseTwoDigitYear(t):z(t)});K("YY",function(t,e){e[Se]=x.parseTwoDigitYear(t)});K("Y",function(t,e){e[Se]=parseInt(t,10)});function hs(t){return Nn(t)?366:365}x.parseTwoDigitYear=function(t){return z(t)+(z(t)>68?1900:2e3)};var ll=ji("FullYear",!0);function Sc(){return Nn(this.year())}function Dc(t,e,s,n,r,o,a){var l;return t<100&&t>=0?(l=new Date(t+400,e,s,n,r,o,a),isFinite(l.getFullYear())&&l.setFullYear(t)):l=new Date(t,e,s,n,r,o,a),l}function ys(t){var e,s;return t<100&&t>=0?(s=Array.prototype.slice.call(arguments),s[0]=t+400,e=new Date(Date.UTC.apply(null,s)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function mn(t,e,s){var n=7+e-s,r=(7+ys(t,0,n).getUTCDay()-e)%7;return-r+n-1}function hl(t,e,s,n,r){var o=(7+s-n)%7,a=mn(t,n,r),l=1+7*(e-1)+o+a,h,d;return l<=0?(h=t-1,d=hs(h)+l):l>hs(t)?(h=t+1,d=l-hs(t)):(h=t,d=l),{year:h,dayOfYear:d}}function vs(t,e,s){var n=mn(t.year(),e,s),r=Math.floor((t.dayOfYear()-n-1)/7)+1,o,a;return r<1?(a=t.year()-1,o=r+Ct(a,e,s)):r>Ct(t.year(),e,s)?(o=r-Ct(t.year(),e,s),a=t.year()+1):(a=t.year(),o=r),{week:o,year:a}}function Ct(t,e,s){var n=mn(t,e,s),r=mn(t+1,e,s);return(hs(t)-n+r)/7}k("w",["ww",2],"wo","week");k("W",["WW",2],"Wo","isoWeek");De("week","w");De("isoWeek","W");Te("week",5);Te("isoWeek",5);T("w",se);T("ww",se,Ye);T("W",se);T("WW",se,Ye);As(["w","ww","W","WW"],function(t,e,s,n){e[n.substr(0,1)]=z(t)});function Tc(t){return vs(t,this._week.dow,this._week.doy).week}var Cc={dow:0,doy:6};function kc(){return this._week.dow}function Ec(){return this._week.doy}function Oc(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function Mc(t){var e=vs(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}k("d",0,"do","day");k("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});k("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});k("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});k("e",0,0,"weekday");k("E",0,0,"isoWeekday");De("day","d");De("weekday","e");De("isoWeekday","E");Te("day",11);Te("weekday",11);Te("isoWeekday",11);T("d",se);T("e",se);T("E",se);T("dd",function(t,e){return e.weekdaysMinRegex(t)});T("ddd",function(t,e){return e.weekdaysShortRegex(t)});T("dddd",function(t,e){return e.weekdaysRegex(t)});As(["dd","ddd","dddd"],function(t,e,s,n){var r=s._locale.weekdaysParse(t,n,s._strict);r!=null?e.d=r:G(s).invalidWeekday=t});As(["d","e","E"],function(t,e,s,n){e[n]=z(t)});function Pc(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function Nc(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Xr(t,e){return t.slice(e,7).concat(t.slice(0,e))}var Ac="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),dl="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ic="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Rc=Ns,Fc=Ns,Lc=Ns;function Hc(t,e){var s=st(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?Xr(s,this._week.dow):t?s[t.day()]:s}function Yc(t){return t===!0?Xr(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function Wc(t){return t===!0?Xr(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Gc(t,e,s){var n,r,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)o=gt([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(o,"").toLocaleLowerCase();return s?e==="dddd"?(r=fe.call(this._weekdaysParse,a),r!==-1?r:null):e==="ddd"?(r=fe.call(this._shortWeekdaysParse,a),r!==-1?r:null):(r=fe.call(this._minWeekdaysParse,a),r!==-1?r:null):e==="dddd"?(r=fe.call(this._weekdaysParse,a),r!==-1||(r=fe.call(this._shortWeekdaysParse,a),r!==-1)?r:(r=fe.call(this._minWeekdaysParse,a),r!==-1?r:null)):e==="ddd"?(r=fe.call(this._shortWeekdaysParse,a),r!==-1||(r=fe.call(this._weekdaysParse,a),r!==-1)?r:(r=fe.call(this._minWeekdaysParse,a),r!==-1?r:null)):(r=fe.call(this._minWeekdaysParse,a),r!==-1||(r=fe.call(this._weekdaysParse,a),r!==-1)?r:(r=fe.call(this._shortWeekdaysParse,a),r!==-1?r:null))}function Uc(t,e,s){var n,r,o;if(this._weekdaysParseExact)return Gc.call(this,t,e,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=gt([2e3,1]).day(n),s&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),s&&e==="dddd"&&this._fullWeekdaysParse[n].test(t))return n;if(s&&e==="ddd"&&this._shortWeekdaysParse[n].test(t))return n;if(s&&e==="dd"&&this._minWeekdaysParse[n].test(t))return n;if(!s&&this._weekdaysParse[n].test(t))return n}}function Bc(t){if(!this.isValid())return t!=null?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(t=Pc(t,this.localeData()),this.add(t-e,"d")):e}function zc(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function $c(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=Nc(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function jc(t){return this._weekdaysParseExact?(X(this,"_weekdaysRegex")||qr.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(X(this,"_weekdaysRegex")||(this._weekdaysRegex=Rc),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function Vc(t){return this._weekdaysParseExact?(X(this,"_weekdaysRegex")||qr.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(X(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Fc),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Xc(t){return this._weekdaysParseExact?(X(this,"_weekdaysRegex")||qr.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(X(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Lc),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function qr(){function t(u,c){return c.length-u.length}var e=[],s=[],n=[],r=[],o,a,l,h,d;for(o=0;o<7;o++)a=gt([2e3,1]).day(o),l=Fe(this.weekdaysMin(a,"")),h=Fe(this.weekdaysShort(a,"")),d=Fe(this.weekdays(a,"")),e.push(l),s.push(h),n.push(d),r.push(l),r.push(h),r.push(d);e.sort(t),s.sort(t),n.sort(t),r.sort(t),this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Zr(){return this.hours()%12||12}function qc(){return this.hours()||24}k("H",["HH",2],0,"hour");k("h",["hh",2],0,Zr);k("k",["kk",2],0,qc);k("hmm",0,0,function(){return""+Zr.apply(this)+mt(this.minutes(),2)});k("hmmss",0,0,function(){return""+Zr.apply(this)+mt(this.minutes(),2)+mt(this.seconds(),2)});k("Hmm",0,0,function(){return""+this.hours()+mt(this.minutes(),2)});k("Hmmss",0,0,function(){return""+this.hours()+mt(this.minutes(),2)+mt(this.seconds(),2)});function ul(t,e){k(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}ul("a",!0);ul("A",!1);De("hour","h");Te("hour",13);function cl(t,e){return e._meridiemParse}T("a",cl);T("A",cl);T("H",se);T("h",se);T("k",se);T("HH",se,Ye);T("hh",se,Ye);T("kk",se,Ye);T("hmm",tl);T("hmmss",il);T("Hmm",tl);T("Hmmss",il);K(["H","HH"],ge);K(["k","kk"],function(t,e,s){var n=z(t);e[ge]=n===24?0:n});K(["a","A"],function(t,e,s){s._isPm=s._locale.isPM(t),s._meridiem=t});K(["h","hh"],function(t,e,s){e[ge]=z(t),G(s).bigHour=!0});K("hmm",function(t,e,s){var n=t.length-2;e[ge]=z(t.substr(0,n)),e[et]=z(t.substr(n)),G(s).bigHour=!0});K("hmmss",function(t,e,s){var n=t.length-4,r=t.length-2;e[ge]=z(t.substr(0,n)),e[et]=z(t.substr(n,2)),e[Tt]=z(t.substr(r)),G(s).bigHour=!0});K("Hmm",function(t,e,s){var n=t.length-2;e[ge]=z(t.substr(0,n)),e[et]=z(t.substr(n))});K("Hmmss",function(t,e,s){var n=t.length-4,r=t.length-2;e[ge]=z(t.substr(0,n)),e[et]=z(t.substr(n,2)),e[Tt]=z(t.substr(r))});function Zc(t){return(t+"").toLowerCase().charAt(0)==="p"}var Kc=/[ap]\.?m?\.?/i,Qc=ji("Hours",!0);function Jc(t,e,s){return t>11?s?"pm":"PM":s?"am":"AM"}var fl={calendar:Uu,longDateFormat:ju,invalidDate:Xu,ordinal:Zu,dayOfMonthOrdinalParse:Ku,relativeTime:Ju,months:fc,monthsShort:sl,week:Cc,weekdays:Ac,weekdaysMin:Ic,weekdaysShort:dl,meridiemParse:Kc},oe={},es={},bs;function ef(t,e){var s,n=Math.min(t.length,e.length);for(s=0;s<n;s+=1)if(t[s]!==e[s])return s;return n}function Zo(t){return t&&t.toLowerCase().replace("_","-")}function tf(t){for(var e=0,s,n,r,o;e<t.length;){for(o=Zo(t[e]).split("-"),s=o.length,n=Zo(t[e+1]),n=n?n.split("-"):null;s>0;){if(r=Yn(o.slice(0,s).join("-")),r)return r;if(n&&n.length>=s&&ef(o,n)>=s-1)break;s--}e++}return bs}function sf(t){return t.match("^[^/\\\\]*$")!=null}function Yn(t){var e=null,s;if(oe[t]===void 0&&typeof module<"u"&&module&&module.exports&&sf(t))try{e=bs._abbr,s=require,s("./locale/"+t),Bt(e)}catch{oe[t]=null}return oe[t]}function Bt(t,e){var s;return t&&(Ne(e)?s=Nt(t):s=Kr(t,e),s?bs=s:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),bs._abbr}function Kr(t,e){if(e!==null){var s,n=fl;if(e.abbr=t,oe[t]!=null)qa("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=oe[t]._config;else if(e.parentLocale!=null)if(oe[e.parentLocale]!=null)n=oe[e.parentLocale]._config;else if(s=Yn(e.parentLocale),s!=null)n=s._config;else return es[e.parentLocale]||(es[e.parentLocale]=[]),es[e.parentLocale].push({name:t,config:e}),null;return oe[t]=new Br(pr(n,e)),es[t]&&es[t].forEach(function(r){Kr(r.name,r.config)}),Bt(t),oe[t]}else return delete oe[t],null}function nf(t,e){if(e!=null){var s,n,r=fl;oe[t]!=null&&oe[t].parentLocale!=null?oe[t].set(pr(oe[t]._config,e)):(n=Yn(t),n!=null&&(r=n._config),e=pr(r,e),n==null&&(e.abbr=t),s=new Br(e),s.parentLocale=oe[t],oe[t]=s),Bt(t)}else oe[t]!=null&&(oe[t].parentLocale!=null?(oe[t]=oe[t].parentLocale,t===Bt()&&Bt(t)):oe[t]!=null&&delete oe[t]);return oe[t]}function Nt(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return bs;if(!st(t)){if(e=Yn(t),e)return e;t=[t]}return tf(t)}function rf(){return mr(oe)}function Qr(t){var e,s=t._a;return s&&G(t).overflow===-2&&(e=s[Dt]<0||s[Dt]>11?Dt:s[ut]<1||s[ut]>Hn(s[Se],s[Dt])?ut:s[ge]<0||s[ge]>24||s[ge]===24&&(s[et]!==0||s[Tt]!==0||s[Qt]!==0)?ge:s[et]<0||s[et]>59?et:s[Tt]<0||s[Tt]>59?Tt:s[Qt]<0||s[Qt]>999?Qt:-1,G(t)._overflowDayOfYear&&(e<Se||e>ut)&&(e=ut),G(t)._overflowWeeks&&e===-1&&(e=dc),G(t)._overflowWeekday&&e===-1&&(e=uc),G(t).overflow=e),t}var of=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,af=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,lf=/Z|[+-]\d\d(?::?\d\d)?/,Vs=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],tr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],hf=/^\/?Date\((-?\d+)/i,df=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,uf={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function pl(t){var e,s,n=t._i,r=of.exec(n)||af.exec(n),o,a,l,h,d=Vs.length,u=tr.length;if(r){for(G(t).iso=!0,e=0,s=d;e<s;e++)if(Vs[e][1].exec(r[1])){a=Vs[e][0],o=Vs[e][2]!==!1;break}if(a==null){t._isValid=!1;return}if(r[3]){for(e=0,s=u;e<s;e++)if(tr[e][1].exec(r[3])){l=(r[2]||" ")+tr[e][0];break}if(l==null){t._isValid=!1;return}}if(!o&&l!=null){t._isValid=!1;return}if(r[4])if(lf.exec(r[4]))h="Z";else{t._isValid=!1;return}t._f=a+(l||"")+(h||""),eo(t)}else t._isValid=!1}function cf(t,e,s,n,r,o){var a=[ff(t),sl.indexOf(e),parseInt(s,10),parseInt(n,10),parseInt(r,10)];return o&&a.push(parseInt(o,10)),a}function ff(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function pf(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function mf(t,e,s){if(t){var n=dl.indexOf(t),r=new Date(e[0],e[1],e[2]).getDay();if(n!==r)return G(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function gf(t,e,s){if(t)return uf[t];if(e)return 0;var n=parseInt(s,10),r=n%100,o=(n-r)/100;return o*60+r}function ml(t){var e=df.exec(pf(t._i)),s;if(e){if(s=cf(e[4],e[3],e[2],e[5],e[6],e[7]),!mf(e[1],s,t))return;t._a=s,t._tzm=gf(e[8],e[9],e[10]),t._d=ys.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),G(t).rfc2822=!0}else t._isValid=!1}function yf(t){var e=hf.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(pl(t),t._isValid===!1)delete t._isValid;else return;if(ml(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:x.createFromInputFallback(t)}x.createFromInputFallback=Xe("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function Ti(t,e,s){return t??e??s}function vf(t){var e=new Date(x.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Jr(t){var e,s,n=[],r,o,a;if(!t._d){for(r=vf(t),t._w&&t._a[ut]==null&&t._a[Dt]==null&&bf(t),t._dayOfYear!=null&&(a=Ti(t._a[Se],r[Se]),(t._dayOfYear>hs(a)||t._dayOfYear===0)&&(G(t)._overflowDayOfYear=!0),s=ys(a,0,t._dayOfYear),t._a[Dt]=s.getUTCMonth(),t._a[ut]=s.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=n[e]=r[e];for(;e<7;e++)t._a[e]=n[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[ge]===24&&t._a[et]===0&&t._a[Tt]===0&&t._a[Qt]===0&&(t._nextDay=!0,t._a[ge]=0),t._d=(t._useUTC?ys:Dc).apply(null,n),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ge]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==o&&(G(t).weekdayMismatch=!0)}}function bf(t){var e,s,n,r,o,a,l,h,d;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(o=1,a=4,s=Ti(e.GG,t._a[Se],vs(ie(),1,4).year),n=Ti(e.W,1),r=Ti(e.E,1),(r<1||r>7)&&(h=!0)):(o=t._locale._week.dow,a=t._locale._week.doy,d=vs(ie(),o,a),s=Ti(e.gg,t._a[Se],d.year),n=Ti(e.w,d.week),e.d!=null?(r=e.d,(r<0||r>6)&&(h=!0)):e.e!=null?(r=e.e+o,(e.e<0||e.e>6)&&(h=!0)):r=o),n<1||n>Ct(s,o,a)?G(t)._overflowWeeks=!0:h!=null?G(t)._overflowWeekday=!0:(l=hl(s,n,r,o,a),t._a[Se]=l.year,t._dayOfYear=l.dayOfYear)}x.ISO_8601=function(){};x.RFC_2822=function(){};function eo(t){if(t._f===x.ISO_8601){pl(t);return}if(t._f===x.RFC_2822){ml(t);return}t._a=[],G(t).empty=!0;var e=""+t._i,s,n,r,o,a,l=e.length,h=0,d,u;for(r=Za(t._f,t._locale).match(zr)||[],u=r.length,s=0;s<u;s++)o=r[s],n=(e.match(ac(o,t))||[])[0],n&&(a=e.substr(0,e.indexOf(n)),a.length>0&&G(t).unusedInput.push(a),e=e.slice(e.indexOf(n)+n.length),h+=n.length),Pi[o]?(n?G(t).empty=!1:G(t).unusedTokens.push(o),hc(o,n,t)):t._strict&&!n&&G(t).unusedTokens.push(o);G(t).charsLeftOver=l-h,e.length>0&&G(t).unusedInput.push(e),t._a[ge]<=12&&G(t).bigHour===!0&&t._a[ge]>0&&(G(t).bigHour=void 0),G(t).parsedDateParts=t._a.slice(0),G(t).meridiem=t._meridiem,t._a[ge]=_f(t._locale,t._a[ge],t._meridiem),d=G(t).era,d!==null&&(t._a[Se]=t._locale.erasConvertYear(d,t._a[Se])),Jr(t),Qr(t)}function _f(t,e,s){var n;return s==null?e:t.meridiemHour!=null?t.meridiemHour(e,s):(t.isPM!=null&&(n=t.isPM(s),n&&e<12&&(e+=12),!n&&e===12&&(e=0)),e)}function wf(t){var e,s,n,r,o,a,l=!1,h=t._f.length;if(h===0){G(t).invalidFormat=!0,t._d=new Date(NaN);return}for(r=0;r<h;r++)o=0,a=!1,e=Ur({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[r],eo(e),Gr(e)&&(a=!0),o+=G(e).charsLeftOver,o+=G(e).unusedTokens.length*10,G(e).score=o,l?o<n&&(n=o,s=e):(n==null||o<n||a)&&(n=o,s=e,a&&(l=!0));Gt(t,s||e)}function xf(t){if(!t._d){var e=$r(t._i),s=e.day===void 0?e.date:e.day;t._a=Va([e.year,e.month,s,e.hour,e.minute,e.second,e.millisecond],function(n){return n&&parseInt(n,10)}),Jr(t)}}function Sf(t){var e=new Ps(Qr(gl(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function gl(t){var e=t._i,s=t._f;return t._locale=t._locale||Nt(t._l),e===null||s===void 0&&e===""?Pn({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),nt(e)?new Ps(Qr(e)):(Ms(e)?t._d=e:st(s)?wf(t):s?eo(t):Df(t),Gr(t)||(t._d=null),t))}function Df(t){var e=t._i;Ne(e)?t._d=new Date(x.now()):Ms(e)?t._d=new Date(e.valueOf()):typeof e=="string"?yf(t):st(e)?(t._a=Va(e.slice(0),function(s){return parseInt(s,10)}),Jr(t)):ii(e)?xf(t):Mt(e)?t._d=new Date(e):x.createFromInputFallback(t)}function yl(t,e,s,n,r){var o={};return(e===!0||e===!1)&&(n=e,e=void 0),(s===!0||s===!1)&&(n=s,s=void 0),(ii(t)&&Wr(t)||st(t)&&t.length===0)&&(t=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=r,o._l=s,o._i=t,o._f=e,o._strict=n,Sf(o)}function ie(t,e,s,n){return yl(t,e,s,n,!1)}var Tf=Xe("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ie.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:Pn()}),Cf=Xe("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=ie.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:Pn()});function vl(t,e){var s,n;if(e.length===1&&st(e[0])&&(e=e[0]),!e.length)return ie();for(s=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][t](s))&&(s=e[n]);return s}function kf(){var t=[].slice.call(arguments,0);return vl("isBefore",t)}function Ef(){var t=[].slice.call(arguments,0);return vl("isAfter",t)}var Of=function(){return Date.now?Date.now():+new Date},ts=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Mf(t){var e,s=!1,n,r=ts.length;for(e in t)if(X(t,e)&&!(fe.call(ts,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(n=0;n<r;++n)if(t[ts[n]]){if(s)return!1;parseFloat(t[ts[n]])!==z(t[ts[n]])&&(s=!0)}return!0}function Pf(){return this._isValid}function Nf(){return lt(NaN)}function Wn(t){var e=$r(t),s=e.year||0,n=e.quarter||0,r=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,l=e.hour||0,h=e.minute||0,d=e.second||0,u=e.millisecond||0;this._isValid=Mf(e),this._milliseconds=+u+d*1e3+h*6e4+l*1e3*60*60,this._days=+a+o*7,this._months=+r+n*3+s*12,this._data={},this._locale=Nt(),this._bubble()}function on(t){return t instanceof Wn}function yr(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function Af(t,e,s){var n=Math.min(t.length,e.length),r=Math.abs(t.length-e.length),o=0,a;for(a=0;a<n;a++)(s&&t[a]!==e[a]||!s&&z(t[a])!==z(e[a]))&&o++;return o+r}function bl(t,e){k(t,0,0,function(){var s=this.utcOffset(),n="+";return s<0&&(s=-s,n="-"),n+mt(~~(s/60),2)+e+mt(~~s%60,2)})}bl("Z",":");bl("ZZ","");T("Z",Ln);T("ZZ",Ln);K(["Z","ZZ"],function(t,e,s){s._useUTC=!0,s._tzm=to(Ln,t)});var If=/([\+\-]|\d\d)/gi;function to(t,e){var s=(e||"").match(t),n,r,o;return s===null?null:(n=s[s.length-1]||[],r=(n+"").match(If)||["-",0,0],o=+(r[1]*60)+z(r[2]),o===0?0:r[0]==="+"?o:-o)}function io(t,e){var s,n;return e._isUTC?(s=e.clone(),n=(nt(t)||Ms(t)?t.valueOf():ie(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+n),x.updateOffset(s,!1),s):ie(t).local()}function vr(t){return-Math.round(t._d.getTimezoneOffset())}x.updateOffset=function(){};function Rf(t,e,s){var n=this._offset||0,r;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=to(Ln,t),t===null)return this}else Math.abs(t)<16&&!s&&(t=t*60);return!this._isUTC&&e&&(r=vr(this)),this._offset=t,this._isUTC=!0,r!=null&&this.add(r,"m"),n!==t&&(!e||this._changeInProgress?xl(this,lt(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,x.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:vr(this)}function Ff(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Lf(t){return this.utcOffset(0,t)}function Hf(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(vr(this),"m")),this}function Yf(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=to(rc,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Wf(t){return this.isValid()?(t=t?ie(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function Gf(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Uf(){if(!Ne(this._isDSTShifted))return this._isDSTShifted;var t={},e;return Ur(t,this),t=gl(t),t._a?(e=t._isUTC?gt(t._a):ie(t._a),this._isDSTShifted=this.isValid()&&Af(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Bf(){return this.isValid()?!this._isUTC:!1}function zf(){return this.isValid()?this._isUTC:!1}function _l(){return this.isValid()?this._isUTC&&this._offset===0:!1}var $f=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,jf=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function lt(t,e){var s=t,n=null,r,o,a;return on(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:Mt(t)||!isNaN(+t)?(s={},e?s[e]=+t:s.milliseconds=+t):(n=$f.exec(t))?(r=n[1]==="-"?-1:1,s={y:0,d:z(n[ut])*r,h:z(n[ge])*r,m:z(n[et])*r,s:z(n[Tt])*r,ms:z(yr(n[Qt]*1e3))*r}):(n=jf.exec(t))?(r=n[1]==="-"?-1:1,s={y:qt(n[2],r),M:qt(n[3],r),w:qt(n[4],r),d:qt(n[5],r),h:qt(n[6],r),m:qt(n[7],r),s:qt(n[8],r)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(a=Vf(ie(s.from),ie(s.to)),s={},s.ms=a.milliseconds,s.M=a.months),o=new Wn(s),on(t)&&X(t,"_locale")&&(o._locale=t._locale),on(t)&&X(t,"_isValid")&&(o._isValid=t._isValid),o}lt.fn=Wn.prototype;lt.invalid=Nf;function qt(t,e){var s=t&&parseFloat(t.replace(",","."));return(isNaN(s)?0:s)*e}function Ko(t,e){var s={};return s.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(s.months,"M").isAfter(e)&&--s.months,s.milliseconds=+e-+t.clone().add(s.months,"M"),s}function Vf(t,e){var s;return t.isValid()&&e.isValid()?(e=io(e,t),t.isBefore(e)?s=Ko(t,e):(s=Ko(e,t),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function wl(t,e){return function(s,n){var r,o;return n!==null&&!isNaN(+n)&&(qa(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=s,s=n,n=o),r=lt(s,n),xl(this,r,t),this}}function xl(t,e,s,n){var r=e._milliseconds,o=yr(e._days),a=yr(e._months);t.isValid()&&(n=n??!0,a&&rl(t,fn(t,"Month")+a*s),o&&Qa(t,"Date",fn(t,"Date")+o*s),r&&t._d.setTime(t._d.valueOf()+r*s),n&&x.updateOffset(t,o||a))}var Xf=wl(1,"add"),qf=wl(-1,"subtract");function Sl(t){return typeof t=="string"||t instanceof String}function Zf(t){return nt(t)||Ms(t)||Sl(t)||Mt(t)||Qf(t)||Kf(t)||t===null||t===void 0}function Kf(t){var e=ii(t)&&!Wr(t),s=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],r,o,a=n.length;for(r=0;r<a;r+=1)o=n[r],s=s||X(t,o);return e&&s}function Qf(t){var e=st(t),s=!1;return e&&(s=t.filter(function(n){return!Mt(n)&&Sl(t)}).length===0),e&&s}function Jf(t){var e=ii(t)&&!Wr(t),s=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],r,o;for(r=0;r<n.length;r+=1)o=n[r],s=s||X(t,o);return e&&s}function ep(t,e){var s=t.diff(e,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function tp(t,e){arguments.length===1&&(arguments[0]?Zf(arguments[0])?(t=arguments[0],e=void 0):Jf(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var s=t||ie(),n=io(s,this).startOf("day"),r=x.calendarFormat(this,n)||"sameElse",o=e&&(yt(e[r])?e[r].call(this,s):e[r]);return this.format(o||this.localeData().calendar(r,this,ie(s)))}function ip(){return new Ps(this)}function sp(t,e){var s=nt(t)?t:ie(t);return this.isValid()&&s.isValid()?(e=qe(e)||"millisecond",e==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(e).valueOf()):!1}function np(t,e){var s=nt(t)?t:ie(t);return this.isValid()&&s.isValid()?(e=qe(e)||"millisecond",e==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(e).valueOf()<s.valueOf()):!1}function rp(t,e,s,n){var r=nt(t)?t:ie(t),o=nt(e)?e:ie(e);return this.isValid()&&r.isValid()&&o.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(r,s):!this.isBefore(r,s))&&(n[1]===")"?this.isBefore(o,s):!this.isAfter(o,s))):!1}function op(t,e){var s=nt(t)?t:ie(t),n;return this.isValid()&&s.isValid()?(e=qe(e)||"millisecond",e==="millisecond"?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf())):!1}function ap(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function lp(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function hp(t,e,s){var n,r,o;if(!this.isValid())return NaN;if(n=io(t,this),!n.isValid())return NaN;switch(r=(n.utcOffset()-this.utcOffset())*6e4,e=qe(e),e){case"year":o=an(this,n)/12;break;case"month":o=an(this,n);break;case"quarter":o=an(this,n)/3;break;case"second":o=(this-n)/1e3;break;case"minute":o=(this-n)/6e4;break;case"hour":o=(this-n)/36e5;break;case"day":o=(this-n-r)/864e5;break;case"week":o=(this-n-r)/6048e5;break;default:o=this-n}return s?o:$e(o)}function an(t,e){if(t.date()<e.date())return-an(e,t);var s=(e.year()-t.year())*12+(e.month()-t.month()),n=t.clone().add(s,"months"),r,o;return e-n<0?(r=t.clone().add(s-1,"months"),o=(e-n)/(n-r)):(r=t.clone().add(s+1,"months"),o=(e-n)/(r-n)),-(s+o)||0}x.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";x.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function dp(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function up(t){if(!this.isValid())return null;var e=t!==!0,s=e?this.clone().utc():this;return s.year()<0||s.year()>9999?rn(s,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):yt(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",rn(s,"Z")):rn(s,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function cp(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",s,n,r,o;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),s="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",o=e+'[")]',this.format(s+n+r+o)}function fp(t){t||(t=this.isUtc()?x.defaultFormatUtc:x.defaultFormat);var e=rn(this,t);return this.localeData().postformat(e)}function pp(t,e){return this.isValid()&&(nt(t)&&t.isValid()||ie(t).isValid())?lt({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function mp(t){return this.from(ie(),t)}function gp(t,e){return this.isValid()&&(nt(t)&&t.isValid()||ie(t).isValid())?lt({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function yp(t){return this.to(ie(),t)}function Dl(t){var e;return t===void 0?this._locale._abbr:(e=Nt(t),e!=null&&(this._locale=e),this)}var Tl=Xe("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function Cl(){return this._locale}var gn=1e3,Ni=60*gn,yn=60*Ni,kl=(365*400+97)*24*yn;function Ai(t,e){return(t%e+e)%e}function El(t,e,s){return t<100&&t>=0?new Date(t+400,e,s)-kl:new Date(t,e,s).valueOf()}function Ol(t,e,s){return t<100&&t>=0?Date.UTC(t+400,e,s)-kl:Date.UTC(t,e,s)}function vp(t){var e,s;if(t=qe(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ol:El,t){case"year":e=s(this.year(),0,1);break;case"quarter":e=s(this.year(),this.month()-this.month()%3,1);break;case"month":e=s(this.year(),this.month(),1);break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=s(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Ai(e+(this._isUTC?0:this.utcOffset()*Ni),yn);break;case"minute":e=this._d.valueOf(),e-=Ai(e,Ni);break;case"second":e=this._d.valueOf(),e-=Ai(e,gn);break}return this._d.setTime(e),x.updateOffset(this,!0),this}function bp(t){var e,s;if(t=qe(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?Ol:El,t){case"year":e=s(this.year()+1,0,1)-1;break;case"quarter":e=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=s(this.year(),this.month()+1,1)-1;break;case"week":e=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=yn-Ai(e+(this._isUTC?0:this.utcOffset()*Ni),yn)-1;break;case"minute":e=this._d.valueOf(),e+=Ni-Ai(e,Ni)-1;break;case"second":e=this._d.valueOf(),e+=gn-Ai(e,gn)-1;break}return this._d.setTime(e),x.updateOffset(this,!0),this}function _p(){return this._d.valueOf()-(this._offset||0)*6e4}function wp(){return Math.floor(this.valueOf()/1e3)}function xp(){return new Date(this.valueOf())}function Sp(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Dp(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function Tp(){return this.isValid()?this.toISOString():null}function Cp(){return Gr(this)}function kp(){return Gt({},G(this))}function Ep(){return G(this).overflow}function Op(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}k("N",0,0,"eraAbbr");k("NN",0,0,"eraAbbr");k("NNN",0,0,"eraAbbr");k("NNNN",0,0,"eraName");k("NNNNN",0,0,"eraNarrow");k("y",["y",1],"yo","eraYear");k("y",["yy",2],0,"eraYear");k("y",["yyy",3],0,"eraYear");k("y",["yyyy",4],0,"eraYear");T("N",so);T("NN",so);T("NNN",so);T("NNNN",Wp);T("NNNNN",Gp);K(["N","NN","NNN","NNNN","NNNNN"],function(t,e,s,n){var r=s._locale.erasParse(t,n,s._strict);r?G(s).era=r:G(s).invalidEra=t});T("y",Vi);T("yy",Vi);T("yyy",Vi);T("yyyy",Vi);T("yo",Up);K(["y","yy","yyy","yyyy"],Se);K(["yo"],function(t,e,s,n){var r;s._locale._eraYearOrdinalRegex&&(r=t.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?e[Se]=s._locale.eraYearOrdinalParse(t,r):e[Se]=parseInt(t,10)});function Mp(t,e){var s,n,r,o=this._eras||Nt("en")._eras;for(s=0,n=o.length;s<n;++s){switch(typeof o[s].since){case"string":r=x(o[s].since).startOf("day"),o[s].since=r.valueOf();break}switch(typeof o[s].until){case"undefined":o[s].until=1/0;break;case"string":r=x(o[s].until).startOf("day").valueOf(),o[s].until=r.valueOf();break}}return o}function Pp(t,e,s){var n,r,o=this.eras(),a,l,h;for(t=t.toUpperCase(),n=0,r=o.length;n<r;++n)if(a=o[n].name.toUpperCase(),l=o[n].abbr.toUpperCase(),h=o[n].narrow.toUpperCase(),s)switch(e){case"N":case"NN":case"NNN":if(l===t)return o[n];break;case"NNNN":if(a===t)return o[n];break;case"NNNNN":if(h===t)return o[n];break}else if([a,l,h].indexOf(t)>=0)return o[n]}function Np(t,e){var s=t.since<=t.until?1:-1;return e===void 0?x(t.since).year():x(t.since).year()+(e-t.offset)*s}function Ap(){var t,e,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return n[t].name;return""}function Ip(){var t,e,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return n[t].narrow;return""}function Rp(){var t,e,s,n=this.localeData().eras();for(t=0,e=n.length;t<e;++t)if(s=this.clone().startOf("day").valueOf(),n[t].since<=s&&s<=n[t].until||n[t].until<=s&&s<=n[t].since)return n[t].abbr;return""}function Fp(){var t,e,s,n,r=this.localeData().eras();for(t=0,e=r.length;t<e;++t)if(s=r[t].since<=r[t].until?1:-1,n=this.clone().startOf("day").valueOf(),r[t].since<=n&&n<=r[t].until||r[t].until<=n&&n<=r[t].since)return(this.year()-x(r[t].since).year())*s+r[t].offset;return this.year()}function Lp(t){return X(this,"_erasNameRegex")||no.call(this),t?this._erasNameRegex:this._erasRegex}function Hp(t){return X(this,"_erasAbbrRegex")||no.call(this),t?this._erasAbbrRegex:this._erasRegex}function Yp(t){return X(this,"_erasNarrowRegex")||no.call(this),t?this._erasNarrowRegex:this._erasRegex}function so(t,e){return e.erasAbbrRegex(t)}function Wp(t,e){return e.erasNameRegex(t)}function Gp(t,e){return e.erasNarrowRegex(t)}function Up(t,e){return e._eraYearOrdinalRegex||Vi}function no(){var t=[],e=[],s=[],n=[],r,o,a=this.eras();for(r=0,o=a.length;r<o;++r)e.push(Fe(a[r].name)),t.push(Fe(a[r].abbr)),s.push(Fe(a[r].narrow)),n.push(Fe(a[r].name)),n.push(Fe(a[r].abbr)),n.push(Fe(a[r].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}k(0,["gg",2],0,function(){return this.weekYear()%100});k(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Gn(t,e){k(0,[t,t.length],0,e)}Gn("gggg","weekYear");Gn("ggggg","weekYear");Gn("GGGG","isoWeekYear");Gn("GGGGG","isoWeekYear");De("weekYear","gg");De("isoWeekYear","GG");Te("weekYear",1);Te("isoWeekYear",1);T("G",Fn);T("g",Fn);T("GG",se,Ye);T("gg",se,Ye);T("GGGG",Vr,jr);T("gggg",Vr,jr);T("GGGGG",Rn,An);T("ggggg",Rn,An);As(["gggg","ggggg","GGGG","GGGGG"],function(t,e,s,n){e[n.substr(0,2)]=z(t)});As(["gg","GG"],function(t,e,s,n){e[n]=x.parseTwoDigitYear(t)});function Bp(t){return Ml.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function zp(t){return Ml.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function $p(){return Ct(this.year(),1,4)}function jp(){return Ct(this.isoWeekYear(),1,4)}function Vp(){var t=this.localeData()._week;return Ct(this.year(),t.dow,t.doy)}function Xp(){var t=this.localeData()._week;return Ct(this.weekYear(),t.dow,t.doy)}function Ml(t,e,s,n,r){var o;return t==null?vs(this,n,r).year:(o=Ct(t,n,r),e>o&&(e=o),qp.call(this,t,e,s,n,r))}function qp(t,e,s,n,r){var o=hl(t,e,s,n,r),a=ys(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}k("Q",0,"Qo","quarter");De("quarter","Q");Te("quarter",7);T("Q",Ja);K("Q",function(t,e){e[Dt]=(z(t)-1)*3});function Zp(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}k("D",["DD",2],"Do","date");De("date","D");Te("date",9);T("D",se);T("DD",se,Ye);T("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});K(["D","DD"],ut);K("Do",function(t,e){e[ut]=z(t.match(se)[0])});var Pl=ji("Date",!0);k("DDD",["DDDD",3],"DDDo","dayOfYear");De("dayOfYear","DDD");Te("dayOfYear",4);T("DDD",In);T("DDDD",el);K(["DDD","DDDD"],function(t,e,s){s._dayOfYear=z(t)});function Kp(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}k("m",["mm",2],0,"minute");De("minute","m");Te("minute",14);T("m",se);T("mm",se,Ye);K(["m","mm"],et);var Qp=ji("Minutes",!1);k("s",["ss",2],0,"second");De("second","s");Te("second",15);T("s",se);T("ss",se,Ye);K(["s","ss"],Tt);var Jp=ji("Seconds",!1);k("S",0,0,function(){return~~(this.millisecond()/100)});k(0,["SS",2],0,function(){return~~(this.millisecond()/10)});k(0,["SSS",3],0,"millisecond");k(0,["SSSS",4],0,function(){return this.millisecond()*10});k(0,["SSSSS",5],0,function(){return this.millisecond()*100});k(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});k(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});k(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});k(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});De("millisecond","ms");Te("millisecond",16);T("S",In,Ja);T("SS",In,Ye);T("SSS",In,el);var Ut,Nl;for(Ut="SSSS";Ut.length<=9;Ut+="S")T(Ut,Vi);function em(t,e){e[Qt]=z(("0."+t)*1e3)}for(Ut="S";Ut.length<=9;Ut+="S")K(Ut,em);Nl=ji("Milliseconds",!1);k("z",0,0,"zoneAbbr");k("zz",0,0,"zoneName");function tm(){return this._isUTC?"UTC":""}function im(){return this._isUTC?"Coordinated Universal Time":""}var w=Ps.prototype;w.add=Xf;w.calendar=tp;w.clone=ip;w.diff=hp;w.endOf=bp;w.format=fp;w.from=pp;w.fromNow=mp;w.to=gp;w.toNow=yp;w.get=sc;w.invalidAt=Ep;w.isAfter=sp;w.isBefore=np;w.isBetween=rp;w.isSame=op;w.isSameOrAfter=ap;w.isSameOrBefore=lp;w.isValid=Cp;w.lang=Tl;w.locale=Dl;w.localeData=Cl;w.max=Cf;w.min=Tf;w.parsingFlags=kp;w.set=nc;w.startOf=vp;w.subtract=qf;w.toArray=Sp;w.toObject=Dp;w.toDate=xp;w.toISOString=up;w.inspect=cp;typeof Symbol<"u"&&Symbol.for!=null&&(w[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});w.toJSON=Tp;w.toString=dp;w.unix=wp;w.valueOf=_p;w.creationData=Op;w.eraName=Ap;w.eraNarrow=Ip;w.eraAbbr=Rp;w.eraYear=Fp;w.year=ll;w.isLeapYear=Sc;w.weekYear=Bp;w.isoWeekYear=zp;w.quarter=w.quarters=Zp;w.month=ol;w.daysInMonth=_c;w.week=w.weeks=Oc;w.isoWeek=w.isoWeeks=Mc;w.weeksInYear=Vp;w.weeksInWeekYear=Xp;w.isoWeeksInYear=$p;w.isoWeeksInISOWeekYear=jp;w.date=Pl;w.day=w.days=Bc;w.weekday=zc;w.isoWeekday=$c;w.dayOfYear=Kp;w.hour=w.hours=Qc;w.minute=w.minutes=Qp;w.second=w.seconds=Jp;w.millisecond=w.milliseconds=Nl;w.utcOffset=Rf;w.utc=Lf;w.local=Hf;w.parseZone=Yf;w.hasAlignedHourOffset=Wf;w.isDST=Gf;w.isLocal=Bf;w.isUtcOffset=zf;w.isUtc=_l;w.isUTC=_l;w.zoneAbbr=tm;w.zoneName=im;w.dates=Xe("dates accessor is deprecated. Use date instead.",Pl);w.months=Xe("months accessor is deprecated. Use month instead",ol);w.years=Xe("years accessor is deprecated. Use year instead",ll);w.zone=Xe("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ff);w.isDSTShifted=Xe("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Uf);function sm(t){return ie(t*1e3)}function nm(){return ie.apply(null,arguments).parseZone()}function Al(t){return t}var q=Br.prototype;q.calendar=Bu;q.longDateFormat=Vu;q.invalidDate=qu;q.ordinal=Qu;q.preparse=Al;q.postformat=Al;q.relativeTime=ec;q.pastFuture=tc;q.set=Gu;q.eras=Mp;q.erasParse=Pp;q.erasConvertYear=Np;q.erasAbbrRegex=Hp;q.erasNameRegex=Lp;q.erasNarrowRegex=Yp;q.months=gc;q.monthsShort=yc;q.monthsParse=bc;q.monthsRegex=xc;q.monthsShortRegex=wc;q.week=Tc;q.firstDayOfYear=Ec;q.firstDayOfWeek=kc;q.weekdays=Hc;q.weekdaysMin=Wc;q.weekdaysShort=Yc;q.weekdaysParse=Uc;q.weekdaysRegex=jc;q.weekdaysShortRegex=Vc;q.weekdaysMinRegex=Xc;q.isPM=Zc;q.meridiem=Jc;function vn(t,e,s,n){var r=Nt(),o=gt().set(n,e);return r[s](o,t)}function Il(t,e,s){if(Mt(t)&&(e=t,t=void 0),t=t||"",e!=null)return vn(t,e,s,"month");var n,r=[];for(n=0;n<12;n++)r[n]=vn(t,n,s,"month");return r}function ro(t,e,s,n){typeof t=="boolean"?(Mt(e)&&(s=e,e=void 0),e=e||""):(e=t,s=e,t=!1,Mt(e)&&(s=e,e=void 0),e=e||"");var r=Nt(),o=t?r._week.dow:0,a,l=[];if(s!=null)return vn(e,(s+o)%7,n,"day");for(a=0;a<7;a++)l[a]=vn(e,(a+o)%7,n,"day");return l}function rm(t,e){return Il(t,e,"months")}function om(t,e){return Il(t,e,"monthsShort")}function am(t,e,s){return ro(t,e,s,"weekdays")}function lm(t,e,s){return ro(t,e,s,"weekdaysShort")}function hm(t,e,s){return ro(t,e,s,"weekdaysMin")}Bt("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,s=z(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+s}});x.lang=Xe("moment.lang is deprecated. Use moment.locale instead.",Bt);x.langData=Xe("moment.langData is deprecated. Use moment.localeData instead.",Nt);var wt=Math.abs;function dm(){var t=this._data;return this._milliseconds=wt(this._milliseconds),this._days=wt(this._days),this._months=wt(this._months),t.milliseconds=wt(t.milliseconds),t.seconds=wt(t.seconds),t.minutes=wt(t.minutes),t.hours=wt(t.hours),t.months=wt(t.months),t.years=wt(t.years),this}function Rl(t,e,s,n){var r=lt(e,s);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function um(t,e){return Rl(this,t,e,1)}function cm(t,e){return Rl(this,t,e,-1)}function Qo(t){return t<0?Math.floor(t):Math.ceil(t)}function fm(){var t=this._milliseconds,e=this._days,s=this._months,n=this._data,r,o,a,l,h;return t>=0&&e>=0&&s>=0||t<=0&&e<=0&&s<=0||(t+=Qo(br(s)+e)*864e5,e=0,s=0),n.milliseconds=t%1e3,r=$e(t/1e3),n.seconds=r%60,o=$e(r/60),n.minutes=o%60,a=$e(o/60),n.hours=a%24,e+=$e(a/24),h=$e(Fl(e)),s+=h,e-=Qo(br(h)),l=$e(s/12),s%=12,n.days=e,n.months=s,n.years=l,this}function Fl(t){return t*4800/146097}function br(t){return t*146097/4800}function pm(t){if(!this.isValid())return NaN;var e,s,n=this._milliseconds;if(t=qe(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+n/864e5,s=this._months+Fl(e),t){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(e=this._days+Math.round(br(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return e*24+n/36e5;case"minute":return e*1440+n/6e4;case"second":return e*86400+n/1e3;case"millisecond":return Math.floor(e*864e5)+n;default:throw new Error("Unknown unit "+t)}}function mm(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+z(this._months/12)*31536e6:NaN}function At(t){return function(){return this.as(t)}}var gm=At("ms"),ym=At("s"),vm=At("m"),bm=At("h"),_m=At("d"),wm=At("w"),xm=At("M"),Sm=At("Q"),Dm=At("y");function Tm(){return lt(this)}function Cm(t){return t=qe(t),this.isValid()?this[t+"s"]():NaN}function pi(t){return function(){return this.isValid()?this._data[t]:NaN}}var km=pi("milliseconds"),Em=pi("seconds"),Om=pi("minutes"),Mm=pi("hours"),Pm=pi("days"),Nm=pi("months"),Am=pi("years");function Im(){return $e(this.days()/7)}var St=Math.round,ki={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Rm(t,e,s,n,r){return r.relativeTime(e||1,!!s,t,n)}function Fm(t,e,s,n){var r=lt(t).abs(),o=St(r.as("s")),a=St(r.as("m")),l=St(r.as("h")),h=St(r.as("d")),d=St(r.as("M")),u=St(r.as("w")),c=St(r.as("y")),f=o<=s.ss&&["s",o]||o<s.s&&["ss",o]||a<=1&&["m"]||a<s.m&&["mm",a]||l<=1&&["h"]||l<s.h&&["hh",l]||h<=1&&["d"]||h<s.d&&["dd",h];return s.w!=null&&(f=f||u<=1&&["w"]||u<s.w&&["ww",u]),f=f||d<=1&&["M"]||d<s.M&&["MM",d]||c<=1&&["y"]||["yy",c],f[2]=e,f[3]=+t>0,f[4]=n,Rm.apply(null,f)}function Lm(t){return t===void 0?St:typeof t=="function"?(St=t,!0):!1}function Hm(t,e){return ki[t]===void 0?!1:e===void 0?ki[t]:(ki[t]=e,t==="s"&&(ki.ss=e-1),!0)}function Ym(t,e){if(!this.isValid())return this.localeData().invalidDate();var s=!1,n=ki,r,o;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(s=t),typeof e=="object"&&(n=Object.assign({},ki,e),e.s!=null&&e.ss==null&&(n.ss=e.s-1)),r=this.localeData(),o=Fm(this,!s,n,r),s&&(o=r.pastFuture(+this,o)),r.postformat(o)}var ir=Math.abs;function bi(t){return(t>0)-(t<0)||+t}function Un(){if(!this.isValid())return this.localeData().invalidDate();var t=ir(this._milliseconds)/1e3,e=ir(this._days),s=ir(this._months),n,r,o,a,l=this.asSeconds(),h,d,u,c;return l?(n=$e(t/60),r=$e(n/60),t%=60,n%=60,o=$e(s/12),s%=12,a=t?t.toFixed(3).replace(/\.?0+$/,""):"",h=l<0?"-":"",d=bi(this._months)!==bi(l)?"-":"",u=bi(this._days)!==bi(l)?"-":"",c=bi(this._milliseconds)!==bi(l)?"-":"",h+"P"+(o?d+o+"Y":"")+(s?d+s+"M":"")+(e?u+e+"D":"")+(r||n||t?"T":"")+(r?c+r+"H":"")+(n?c+n+"M":"")+(t?c+a+"S":"")):"P0D"}var j=Wn.prototype;j.isValid=Pf;j.abs=dm;j.add=um;j.subtract=cm;j.as=pm;j.asMilliseconds=gm;j.asSeconds=ym;j.asMinutes=vm;j.asHours=bm;j.asDays=_m;j.asWeeks=wm;j.asMonths=xm;j.asQuarters=Sm;j.asYears=Dm;j.valueOf=mm;j._bubble=fm;j.clone=Tm;j.get=Cm;j.milliseconds=km;j.seconds=Em;j.minutes=Om;j.hours=Mm;j.days=Pm;j.weeks=Im;j.months=Nm;j.years=Am;j.humanize=Ym;j.toISOString=Un;j.toString=Un;j.toJSON=Un;j.locale=Dl;j.localeData=Cl;j.toIsoString=Xe("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Un);j.lang=Tl;k("X",0,0,"unix");k("x",0,0,"valueOf");T("x",Fn);T("X",oc);K("X",function(t,e,s){s._d=new Date(parseFloat(t)*1e3)});K("x",function(t,e,s){s._d=new Date(z(t))});//! moment.js
x.version="2.29.4";Yu(ie);x.fn=w;x.min=kf;x.max=Ef;x.now=Of;x.utc=gt;x.unix=sm;x.months=rm;x.isDate=Ms;x.locale=Bt;x.invalid=Pn;x.duration=lt;x.isMoment=nt;x.weekdays=am;x.parseZone=nm;x.localeData=Nt;x.isDuration=on;x.monthsShort=om;x.weekdaysMin=hm;x.defineLocale=Kr;x.updateLocale=nf;x.locales=rf;x.weekdaysShort=lm;x.normalizeUnits=qe;x.relativeTimeRounding=Lm;x.relativeTimeThreshold=Hm;x.calendarFormat=ep;x.prototype=w;x.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var Ll={exports:{}};(function(t){t.exports=e;function e(n){if(n)return s(n)}function s(n){for(var r in e.prototype)n[r]=e.prototype[r];return n}e.prototype.on=e.prototype.addEventListener=function(n,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(r),this},e.prototype.once=function(n,r){function o(){this.off(n,o),r.apply(this,arguments)}return o.fn=r,this.on(n,o),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+n];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var a,l=0;l<o.length;l++)if(a=o[l],a===r||a.fn===r){o.splice(l,1);break}return o.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),o=this._callbacks["$"+n],a=1;a<arguments.length;a++)r[a-1]=arguments[a];if(o){o=o.slice(0);for(var a=0,l=o.length;a<l;++a)o[a].apply(this,r)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(Ll);var Wm=Ll.exports;const oo=Lr(Wm);/*! Hammer.JS - v2.0.17-rc - 2019-12-16
 * http://naver.github.io/egjs
 *
 * Forked By Naver egjs
 * Copyright (c) hammerjs
 * Licensed under the MIT license */function rt(){return rt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},rt.apply(this,arguments)}function Ze(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Xs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var _r;typeof Object.assign!="function"?_r=function(e){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var o in r)r.hasOwnProperty(o)&&(s[o]=r[o])}return s}:_r=Object.assign;var ai=_r,Jo=["","webkit","Moz","MS","ms","o"],Gm=typeof document>"u"?{style:{}}:document.createElement("div"),Um="function",Ei=Math.round,li=Math.abs,ao=Date.now;function Bn(t,e){for(var s,n,r=e[0].toUpperCase()+e.slice(1),o=0;o<Jo.length;){if(s=Jo[o],n=s?s+r:e,n in t)return n;o++}}var kt;typeof window>"u"?kt={}:kt=window;var Hl=Bn(Gm.style,"touchAction"),Yl=Hl!==void 0;function Bm(){if(!Yl)return!1;var t={},e=kt.CSS&&kt.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){return t[s]=e?kt.CSS.supports("touch-action",s):!0}),t}var Wl="compute",Gl="auto",wr="manipulation",si="none",_s="pan-x",ws="pan-y",qs=Bm(),zm=/mobile|tablet|ip(ad|hone|od)|android/i,Ul="ontouchstart"in kt,$m=Bn(kt,"PointerEvent")!==void 0,jm=Ul&&zm.test(navigator.userAgent),Is="touch",Vm="pen",lo="mouse",Xm="kinect",qm=25,Oe=1,mi=2,me=4,Ie=8,bn=1,Rs=2,Fs=4,Ls=8,Li=16,pt=Rs|Fs,ni=Ls|Li,Bl=pt|ni,zl=["x","y"],_n=["clientX","clientY"];function Et(t,e,s){var n;if(t)if(t.forEach)t.forEach(e,s);else if(t.length!==void 0)for(n=0;n<t.length;)e.call(s,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(s,t[n],n,t)}function zn(t,e){return typeof t===Um?t.apply(e&&e[0]||void 0,e):t}function Jt(t,e){return t.indexOf(e)>-1}function Zm(t){if(Jt(t,si))return si;var e=Jt(t,_s),s=Jt(t,ws);return e&&s?si:e||s?e?_s:ws:Jt(t,wr)?wr:Gl}var $l=function(){function t(s,n){this.manager=s,this.set(n)}var e=t.prototype;return e.set=function(n){n===Wl&&(n=this.compute()),Yl&&this.manager.element.style&&qs[n]&&(this.manager.element.style[Hl]=n),this.actions=n.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var n=[];return Et(this.manager.recognizers,function(r){zn(r.options.enable,[r])&&(n=n.concat(r.getTouchAction()))}),Zm(n.join(" "))},e.preventDefaults=function(n){var r=n.srcEvent,o=n.offsetDirection;if(this.manager.session.prevented){r.preventDefault();return}var a=this.actions,l=Jt(a,si)&&!qs[si],h=Jt(a,ws)&&!qs[ws],d=Jt(a,_s)&&!qs[_s];if(l){var u=n.pointers.length===1,c=n.distance<2,f=n.deltaTime<250;if(u&&c&&f)return}if(!(d&&h)&&(l||h&&o&pt||d&&o&ni))return this.preventSrc(r)},e.preventSrc=function(n){this.manager.session.prevented=!0,n.preventDefault()},t}();function ho(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function jl(t){var e=t.length;if(e===1)return{x:Ei(t[0].clientX),y:Ei(t[0].clientY)};for(var s=0,n=0,r=0;r<e;)s+=t[r].clientX,n+=t[r].clientY,r++;return{x:Ei(s/e),y:Ei(n/e)}}function ea(t){for(var e=[],s=0;s<t.pointers.length;)e[s]={clientX:Ei(t.pointers[s].clientX),clientY:Ei(t.pointers[s].clientY)},s++;return{timeStamp:ao(),pointers:e,center:jl(e),deltaX:t.deltaX,deltaY:t.deltaY}}function wn(t,e,s){s||(s=zl);var n=e[s[0]]-t[s[0]],r=e[s[1]]-t[s[1]];return Math.sqrt(n*n+r*r)}function xr(t,e,s){s||(s=zl);var n=e[s[0]]-t[s[0]],r=e[s[1]]-t[s[1]];return Math.atan2(r,n)*180/Math.PI}function Vl(t,e){return t===e?bn:li(t)>=li(e)?t<0?Rs:Fs:e<0?Ls:Li}function Km(t,e){var s=e.center,n=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};(e.eventType===Oe||o.eventType===me)&&(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:s.x,y:s.y}),e.deltaX=r.x+(s.x-n.x),e.deltaY=r.y+(s.y-n.y)}function Xl(t,e,s){return{x:e/t||0,y:s/t||0}}function Qm(t,e){return wn(e[0],e[1],_n)/wn(t[0],t[1],_n)}function Jm(t,e){return xr(e[1],e[0],_n)+xr(t[1],t[0],_n)}function eg(t,e){var s=t.lastInterval||e,n=e.timeStamp-s.timeStamp,r,o,a,l;if(e.eventType!==Ie&&(n>qm||s.velocity===void 0)){var h=e.deltaX-s.deltaX,d=e.deltaY-s.deltaY,u=Xl(n,h,d);o=u.x,a=u.y,r=li(u.x)>li(u.y)?u.x:u.y,l=Vl(h,d),t.lastInterval=e}else r=s.velocity,o=s.velocityX,a=s.velocityY,l=s.direction;e.velocity=r,e.velocityX=o,e.velocityY=a,e.direction=l}function tg(t,e){var s=t.session,n=e.pointers,r=n.length;s.firstInput||(s.firstInput=ea(e)),r>1&&!s.firstMultiple?s.firstMultiple=ea(e):r===1&&(s.firstMultiple=!1);var o=s.firstInput,a=s.firstMultiple,l=a?a.center:o.center,h=e.center=jl(n);e.timeStamp=ao(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=xr(l,h),e.distance=wn(l,h),Km(s,e),e.offsetDirection=Vl(e.deltaX,e.deltaY);var d=Xl(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=li(d.x)>li(d.y)?d.x:d.y,e.scale=a?Qm(a.pointers,n):1,e.rotation=a?Jm(a.pointers,n):0,e.maxPointers=s.prevInput?e.pointers.length>s.prevInput.maxPointers?e.pointers.length:s.prevInput.maxPointers:e.pointers.length,eg(s,e);var u=t.element,c=e.srcEvent,f;c.composedPath?f=c.composedPath()[0]:c.path?f=c.path[0]:f=c.target,ho(f,u)&&(u=f),e.target=u}function ig(t,e,s){var n=s.pointers.length,r=s.changedPointers.length,o=e&Oe&&n-r===0,a=e&(me|Ie)&&n-r===0;s.isFirst=!!o,s.isFinal=!!a,o&&(t.session={}),s.eventType=e,tg(t,s),t.emit("hammer.input",s),t.recognize(s),t.session.prevInput=s}function xs(t){return t.trim().split(/\s+/g)}function ds(t,e,s){Et(xs(e),function(n){t.addEventListener(n,s,!1)})}function us(t,e,s){Et(xs(e),function(n){t.removeEventListener(n,s,!1)})}function ta(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Xi=function(){function t(s,n){var r=this;this.manager=s,this.callback=n,this.element=s.element,this.target=s.options.inputTarget,this.domHandler=function(o){zn(s.options.enable,[s])&&r.handler(o)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&ds(this.element,this.evEl,this.domHandler),this.evTarget&&ds(this.target,this.evTarget,this.domHandler),this.evWin&&ds(ta(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&us(this.element,this.evEl,this.domHandler),this.evTarget&&us(this.target,this.evTarget,this.domHandler),this.evWin&&us(ta(this.element),this.evWin,this.domHandler)},t}();function hi(t,e,s){if(t.indexOf&&!s)return t.indexOf(e);for(var n=0;n<t.length;){if(s&&t[n][s]==e||!s&&t[n]===e)return n;n++}return-1}var sg={pointerdown:Oe,pointermove:mi,pointerup:me,pointercancel:Ie,pointerout:Ie},ng={2:Is,3:Vm,4:lo,5:Xm},ql="pointerdown",Zl="pointermove pointerup pointercancel";kt.MSPointerEvent&&!kt.PointerEvent&&(ql="MSPointerDown",Zl="MSPointerMove MSPointerUp MSPointerCancel");var Kl=function(t){Ze(e,t);function e(){var n,r=e.prototype;return r.evEl=ql,r.evWin=Zl,n=t.apply(this,arguments)||this,n.store=n.manager.session.pointerEvents=[],n}var s=e.prototype;return s.handler=function(r){var o=this.store,a=!1,l=r.type.toLowerCase().replace("ms",""),h=sg[l],d=ng[r.pointerType]||r.pointerType,u=d===Is,c=hi(o,r.pointerId,"pointerId");h&Oe&&(r.button===0||u)?c<0&&(o.push(r),c=o.length-1):h&(me|Ie)&&(a=!0),!(c<0)&&(o[c]=r,this.callback(this.manager,h,{pointers:o,changedPointers:[r],pointerType:d,srcEvent:r}),a&&o.splice(c,1))},e}(Xi);function Ss(t){return Array.prototype.slice.call(t,0)}function uo(t,e,s){for(var n=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];hi(r,a)<0&&n.push(t[o]),r[o]=a,o++}return s&&(e?n=n.sort(function(l,h){return l[e]>h[e]}):n=n.sort()),n}var rg={touchstart:Oe,touchmove:mi,touchend:me,touchcancel:Ie},og="touchstart touchmove touchend touchcancel",co=function(t){Ze(e,t);function e(){var n;return e.prototype.evTarget=og,n=t.apply(this,arguments)||this,n.targetIds={},n}var s=e.prototype;return s.handler=function(r){var o=rg[r.type],a=ag.call(this,r,o);a&&this.callback(this.manager,o,{pointers:a[0],changedPointers:a[1],pointerType:Is,srcEvent:r})},e}(Xi);function ag(t,e){var s=Ss(t.touches),n=this.targetIds;if(e&(Oe|mi)&&s.length===1)return n[s[0].identifier]=!0,[s,s];var r,o,a=Ss(t.changedTouches),l=[],h=this.target;if(o=s.filter(function(d){return ho(d.target,h)}),e===Oe)for(r=0;r<o.length;)n[o[r].identifier]=!0,r++;for(r=0;r<a.length;)n[a[r].identifier]&&l.push(a[r]),e&(me|Ie)&&delete n[a[r].identifier],r++;if(l.length)return[uo(o.concat(l),"identifier",!0),l]}var lg={mousedown:Oe,mousemove:mi,mouseup:me},hg="mousedown",dg="mousemove mouseup",fo=function(t){Ze(e,t);function e(){var n,r=e.prototype;return r.evEl=hg,r.evWin=dg,n=t.apply(this,arguments)||this,n.pressed=!1,n}var s=e.prototype;return s.handler=function(r){var o=lg[r.type];o&Oe&&r.button===0&&(this.pressed=!0),o&mi&&r.which!==1&&(o=me),this.pressed&&(o&me&&(this.pressed=!1),this.callback(this.manager,o,{pointers:[r],changedPointers:[r],pointerType:lo,srcEvent:r}))},e}(Xi),ug=2500,ia=25;function sa(t){var e=t.changedPointers,s=e[0];if(s.identifier===this.primaryTouch){var n={x:s.clientX,y:s.clientY},r=this.lastTouches;this.lastTouches.push(n);var o=function(){var l=r.indexOf(n);l>-1&&r.splice(l,1)};setTimeout(o,ug)}}function cg(t,e){t&Oe?(this.primaryTouch=e.changedPointers[0].identifier,sa.call(this,e)):t&(me|Ie)&&sa.call(this,e)}function fg(t){for(var e=t.srcEvent.clientX,s=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var r=this.lastTouches[n],o=Math.abs(e-r.x),a=Math.abs(s-r.y);if(o<=ia&&a<=ia)return!0}return!1}var Ql=function(){var t=function(e){Ze(s,e);function s(r,o){var a;return a=e.call(this,r,o)||this,a.handler=function(l,h,d){var u=d.pointerType===Is,c=d.pointerType===lo;if(!(c&&d.sourceCapabilities&&d.sourceCapabilities.firesTouchEvents)){if(u)cg.call(Xs(Xs(a)),h,d);else if(c&&fg.call(Xs(Xs(a)),d))return;a.callback(l,h,d)}},a.touch=new co(a.manager,a.handler),a.mouse=new fo(a.manager,a.handler),a.primaryTouch=null,a.lastTouches=[],a}var n=s.prototype;return n.destroy=function(){this.touch.destroy(),this.mouse.destroy()},s}(Xi);return t}();function pg(t){var e,s=t.options.inputClass;return s?e=s:$m?e=Kl:jm?e=co:Ul?e=Ql:e=fo,new e(t,ig)}function Oi(t,e,s){return Array.isArray(t)?(Et(t,s[e],s),!0):!1}var ln=1,Ve=2,Hi=4,zt=8,Ot=zt,Ds=16,ct=32,mg=1;function gg(){return mg++}function Zs(t,e){var s=e.manager;return s?s.get(t):t}function na(t){return t&Ds?"cancel":t&zt?"end":t&Hi?"move":t&Ve?"start":""}var Hs=function(){function t(s){s===void 0&&(s={}),this.options=rt({enable:!0},s),this.id=gg(),this.manager=null,this.state=ln,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(n){return ai(this.options,n),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(n){if(Oi(n,"recognizeWith",this))return this;var r=this.simultaneous;return n=Zs(n,this),r[n.id]||(r[n.id]=n,n.recognizeWith(this)),this},e.dropRecognizeWith=function(n){return Oi(n,"dropRecognizeWith",this)?this:(n=Zs(n,this),delete this.simultaneous[n.id],this)},e.requireFailure=function(n){if(Oi(n,"requireFailure",this))return this;var r=this.requireFail;return n=Zs(n,this),hi(r,n)===-1&&(r.push(n),n.requireFailure(this)),this},e.dropRequireFailure=function(n){if(Oi(n,"dropRequireFailure",this))return this;n=Zs(n,this);var r=hi(this.requireFail,n);return r>-1&&this.requireFail.splice(r,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(n){return!!this.simultaneous[n.id]},e.emit=function(n){var r=this,o=this.state;function a(l){r.manager.emit(l,n)}o<zt&&a(r.options.event+na(o)),a(r.options.event),n.additionalEvent&&a(n.additionalEvent),o>=zt&&a(r.options.event+na(o))},e.tryEmit=function(n){if(this.canEmit())return this.emit(n);this.state=ct},e.canEmit=function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(ct|ln)))return!1;n++}return!0},e.recognize=function(n){var r=ai({},n);if(!zn(this.options.enable,[this,r])){this.reset(),this.state=ct;return}this.state&(Ot|Ds|ct)&&(this.state=ln),this.state=this.process(r),this.state&(Ve|Hi|zt|Ds)&&this.tryEmit(r)},e.process=function(n){},e.getTouchAction=function(){},e.reset=function(){},t}(),Sr=function(t){Ze(e,t);function e(n){var r;return n===void 0&&(n={}),r=t.call(this,rt({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},n))||this,r.pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}var s=e.prototype;return s.getTouchAction=function(){return[wr]},s.process=function(r){var o=this,a=this.options,l=r.pointers.length===a.pointers,h=r.distance<a.threshold,d=r.deltaTime<a.time;if(this.reset(),r.eventType&Oe&&this.count===0)return this.failTimeout();if(h&&d&&l){if(r.eventType!==me)return this.failTimeout();var u=this.pTime?r.timeStamp-this.pTime<a.interval:!0,c=!this.pCenter||wn(this.pCenter,r.center)<a.posThreshold;this.pTime=r.timeStamp,this.pCenter=r.center,!c||!u?this.count=1:this.count+=1,this._input=r;var f=this.count%a.taps;if(f===0)return this.hasRequireFailures()?(this._timer=setTimeout(function(){o.state=Ot,o.tryEmit()},a.interval),Ve):Ot}return ct},s.failTimeout=function(){var r=this;return this._timer=setTimeout(function(){r.state=ct},this.options.interval),ct},s.reset=function(){clearTimeout(this._timer)},s.emit=function(){this.state===Ot&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Hs),Yi=function(t){Ze(e,t);function e(n){return n===void 0&&(n={}),t.call(this,rt({pointers:1},n))||this}var s=e.prototype;return s.attrTest=function(r){var o=this.options.pointers;return o===0||r.pointers.length===o},s.process=function(r){var o=this.state,a=r.eventType,l=o&(Ve|Hi),h=this.attrTest(r);return l&&(a&Ie||!h)?o|Ds:l||h?a&me?o|zt:o&Ve?o|Hi:Ve:ct},e}(Hs);function Jl(t){return t===Li?"down":t===Ls?"up":t===Rs?"left":t===Fs?"right":""}var po=function(t){Ze(e,t);function e(n){var r;return n===void 0&&(n={}),r=t.call(this,rt({event:"pan",threshold:10,pointers:1,direction:Bl},n))||this,r.pX=null,r.pY=null,r}var s=e.prototype;return s.getTouchAction=function(){var r=this.options.direction,o=[];return r&pt&&o.push(ws),r&ni&&o.push(_s),o},s.directionTest=function(r){var o=this.options,a=!0,l=r.distance,h=r.direction,d=r.deltaX,u=r.deltaY;return h&o.direction||(o.direction&pt?(h=d===0?bn:d<0?Rs:Fs,a=d!==this.pX,l=Math.abs(r.deltaX)):(h=u===0?bn:u<0?Ls:Li,a=u!==this.pY,l=Math.abs(r.deltaY))),r.direction=h,a&&l>o.threshold&&h&o.direction},s.attrTest=function(r){return Yi.prototype.attrTest.call(this,r)&&(this.state&Ve||!(this.state&Ve)&&this.directionTest(r))},s.emit=function(r){this.pX=r.deltaX,this.pY=r.deltaY;var o=Jl(r.direction);o&&(r.additionalEvent=this.options.event+o),t.prototype.emit.call(this,r)},e}(Yi),eh=function(t){Ze(e,t);function e(n){return n===void 0&&(n={}),t.call(this,rt({event:"swipe",threshold:10,velocity:.3,direction:pt|ni,pointers:1},n))||this}var s=e.prototype;return s.getTouchAction=function(){return po.prototype.getTouchAction.call(this)},s.attrTest=function(r){var o=this.options.direction,a;return o&(pt|ni)?a=r.overallVelocity:o&pt?a=r.overallVelocityX:o&ni&&(a=r.overallVelocityY),t.prototype.attrTest.call(this,r)&&o&r.offsetDirection&&r.distance>this.options.threshold&&r.maxPointers===this.options.pointers&&li(a)>this.options.velocity&&r.eventType&me},s.emit=function(r){var o=Jl(r.offsetDirection);o&&this.manager.emit(this.options.event+o,r),this.manager.emit(this.options.event,r)},e}(Yi),th=function(t){Ze(e,t);function e(n){return n===void 0&&(n={}),t.call(this,rt({event:"pinch",threshold:0,pointers:2},n))||this}var s=e.prototype;return s.getTouchAction=function(){return[si]},s.attrTest=function(r){return t.prototype.attrTest.call(this,r)&&(Math.abs(r.scale-1)>this.options.threshold||this.state&Ve)},s.emit=function(r){if(r.scale!==1){var o=r.scale<1?"in":"out";r.additionalEvent=this.options.event+o}t.prototype.emit.call(this,r)},e}(Yi),ih=function(t){Ze(e,t);function e(n){return n===void 0&&(n={}),t.call(this,rt({event:"rotate",threshold:0,pointers:2},n))||this}var s=e.prototype;return s.getTouchAction=function(){return[si]},s.attrTest=function(r){return t.prototype.attrTest.call(this,r)&&(Math.abs(r.rotation)>this.options.threshold||this.state&Ve)},e}(Yi),sh=function(t){Ze(e,t);function e(n){var r;return n===void 0&&(n={}),r=t.call(this,rt({event:"press",pointers:1,time:251,threshold:9},n))||this,r._timer=null,r._input=null,r}var s=e.prototype;return s.getTouchAction=function(){return[Gl]},s.process=function(r){var o=this,a=this.options,l=r.pointers.length===a.pointers,h=r.distance<a.threshold,d=r.deltaTime>a.time;if(this._input=r,!h||!l||r.eventType&(me|Ie)&&!d)this.reset();else if(r.eventType&Oe)this.reset(),this._timer=setTimeout(function(){o.state=Ot,o.tryEmit()},a.time);else if(r.eventType&me)return Ot;return ct},s.reset=function(){clearTimeout(this._timer)},s.emit=function(r){this.state===Ot&&(r&&r.eventType&me?this.manager.emit(this.options.event+"up",r):(this._input.timeStamp=ao(),this.manager.emit(this.options.event,this._input)))},e}(Hs),nh={domEvents:!1,touchAction:Wl,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},ra=[[ih,{enable:!1}],[th,{enable:!1},["rotate"]],[eh,{direction:pt}],[po,{direction:pt},["swipe"]],[Sr],[Sr,{event:"doubletap",taps:2},["tap"]],[sh]],yg=1,oa=2;function aa(t,e){var s=t.element;if(s.style){var n;Et(t.options.cssProps,function(r,o){n=Bn(s.style,o),e?(t.oldCssProps[n]=s.style[n],s.style[n]=r):s.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={})}}function vg(t,e){var s=document.createEvent("Event");s.initEvent(t,!0,!0),s.gesture=e,e.target.dispatchEvent(s)}var la=function(){function t(s,n){var r=this;this.options=ai({},nh,n||{}),this.options.inputTarget=this.options.inputTarget||s,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=s,this.input=pg(this),this.touchAction=new $l(this,this.options.touchAction),aa(this,!0),Et(this.options.recognizers,function(o){var a=r.add(new o[0](o[1]));o[2]&&a.recognizeWith(o[2]),o[3]&&a.requireFailure(o[3])},this)}var e=t.prototype;return e.set=function(n){return ai(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},e.stop=function(n){this.session.stopped=n?oa:yg},e.recognize=function(n){var r=this.session;if(!r.stopped){this.touchAction.preventDefaults(n);var o,a=this.recognizers,l=r.curRecognizer;(!l||l&&l.state&Ot)&&(r.curRecognizer=null,l=null);for(var h=0;h<a.length;)o=a[h],r.stopped!==oa&&(!l||o===l||o.canRecognizeWith(l))?o.recognize(n):o.reset(),!l&&o.state&(Ve|Hi|zt)&&(r.curRecognizer=o,l=o),h++}},e.get=function(n){if(n instanceof Hs)return n;for(var r=this.recognizers,o=0;o<r.length;o++)if(r[o].options.event===n)return r[o];return null},e.add=function(n){if(Oi(n,"add",this))return this;var r=this.get(n.options.event);return r&&this.remove(r),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},e.remove=function(n){if(Oi(n,"remove",this))return this;var r=this.get(n);if(n){var o=this.recognizers,a=hi(o,r);a!==-1&&(o.splice(a,1),this.touchAction.update())}return this},e.on=function(n,r){if(n===void 0||r===void 0)return this;var o=this.handlers;return Et(xs(n),function(a){o[a]=o[a]||[],o[a].push(r)}),this},e.off=function(n,r){if(n===void 0)return this;var o=this.handlers;return Et(xs(n),function(a){r?o[a]&&o[a].splice(hi(o[a],r),1):delete o[a]}),this},e.emit=function(n,r){this.options.domEvents&&vg(n,r);var o=this.handlers[n]&&this.handlers[n].slice();if(!(!o||!o.length)){r.type=n,r.preventDefault=function(){r.srcEvent.preventDefault()};for(var a=0;a<o.length;)o[a](r),a++}},e.destroy=function(){this.element&&aa(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),bg={touchstart:Oe,touchmove:mi,touchend:me,touchcancel:Ie},_g="touchstart",wg="touchstart touchmove touchend touchcancel",xg=function(t){Ze(e,t);function e(){var n,r=e.prototype;return r.evTarget=_g,r.evWin=wg,n=t.apply(this,arguments)||this,n.started=!1,n}var s=e.prototype;return s.handler=function(r){var o=bg[r.type];if(o===Oe&&(this.started=!0),!!this.started){var a=Sg.call(this,r,o);o&(me|Ie)&&a[0].length-a[1].length===0&&(this.started=!1),this.callback(this.manager,o,{pointers:a[0],changedPointers:a[1],pointerType:Is,srcEvent:r})}},e}(Xi);function Sg(t,e){var s=Ss(t.touches),n=Ss(t.changedTouches);return e&(me|Ie)&&(s=uo(s.concat(n),"identifier",!0)),[s,n]}function rh(t,e,s){var n="DEPRECATED METHOD: "+e+`
`+s+` AT 
`;return function(){var r=new Error("get-stack-trace"),o=r&&r.stack?r.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=window.console&&(window.console.warn||window.console.log);return a&&a.call(window.console,n,o),t.apply(this,arguments)}}var oh=rh(function(t,e,s){for(var n=Object.keys(e),r=0;r<n.length;)(!s||s&&t[n[r]]===void 0)&&(t[n[r]]=e[n[r]]),r++;return t},"extend","Use `assign`."),Dg=rh(function(t,e){return oh(t,e,!0)},"merge","Use `assign`.");function Tg(t,e,s){var n=e.prototype,r;r=t.prototype=Object.create(n),r.constructor=t,r._super=n,s&&ai(r,s)}function ha(t,e){return function(){return t.apply(e,arguments)}}var ah=function(){var t=function(s,n){return n===void 0&&(n={}),new la(s,rt({recognizers:ra.concat()},n))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=Bl,t.DIRECTION_DOWN=Li,t.DIRECTION_LEFT=Rs,t.DIRECTION_RIGHT=Fs,t.DIRECTION_UP=Ls,t.DIRECTION_HORIZONTAL=pt,t.DIRECTION_VERTICAL=ni,t.DIRECTION_NONE=bn,t.DIRECTION_DOWN=Li,t.INPUT_START=Oe,t.INPUT_MOVE=mi,t.INPUT_END=me,t.INPUT_CANCEL=Ie,t.STATE_POSSIBLE=ln,t.STATE_BEGAN=Ve,t.STATE_CHANGED=Hi,t.STATE_ENDED=zt,t.STATE_RECOGNIZED=Ot,t.STATE_CANCELLED=Ds,t.STATE_FAILED=ct,t.Manager=la,t.Input=Xi,t.TouchAction=$l,t.TouchInput=co,t.MouseInput=fo,t.PointerEventInput=Kl,t.TouchMouseInput=Ql,t.SingleTouchInput=xg,t.Recognizer=Hs,t.AttrRecognizer=Yi,t.Tap=Sr,t.Pan=po,t.Swipe=eh,t.Pinch=th,t.Rotate=ih,t.Press=sh,t.on=ds,t.off=us,t.each=Et,t.merge=Dg,t.extend=oh,t.bindFn=ha,t.assign=ai,t.inherit=Tg,t.bindFn=ha,t.prefixed=Bn,t.toArray=Ss,t.inArray=hi,t.uniqueArray=uo,t.splitStr=xs,t.boolOrFn=zn,t.hasParent=ho,t.addEventListeners=ds,t.removeEventListeners=us,t.defaults=ai({},nh,{preset:ra}),t}();ah.defaults;const lh=ah;/**
 * vis-util
 * https://github.com/visjs/vis-util
 *
 * utilitie collection for visjs
 *
 * @version 5.0.3
 * @date    2022-03-04T18:53:16.725Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */const mo=Symbol("DELETE");function hh(t,...e){return go({},t,...e)}function go(...t){const e=xn(...t);return uh(e),e}function xn(...t){if(t.length<2)return t[0];if(t.length>2)return xn(go(t[0],t[1]),...t.slice(2));const e=t[0],s=t[1];for(const n of Reflect.ownKeys(s))Object.prototype.propertyIsEnumerable.call(s,n)&&(s[n]===mo?delete e[n]:e[n]!==null&&s[n]!==null&&typeof e[n]=="object"&&typeof s[n]=="object"&&!Array.isArray(e[n])&&!Array.isArray(s[n])?e[n]=xn(e[n],s[n]):e[n]=dh(s[n]));return e}function dh(t){return Array.isArray(t)?t.map(e=>dh(e)):typeof t=="object"&&t!==null?xn({},t):t}function uh(t){for(const e of Object.keys(t))t[e]===mo?delete t[e]:typeof t[e]=="object"&&t[e]!==null&&uh(t[e])}function Cg(...t){return kg(t.length?t:[Date.now()])}function kg(t){let[e,s,n]=Eg(t),r=1;const o=()=>{const a=2091639*e+r*23283064365386963e-26;return e=s,s=n,n=a-(r=a|0)};return o.uint32=()=>o()*4294967296,o.fract53=()=>o()+(o()*2097152|0)*11102230246251565e-32,o.algorithm="Alea",o.seed=t,o.version="0.9",o}function Eg(...t){const e=Og();let s=e(" "),n=e(" "),r=e(" ");for(let o=0;o<t.length;o++)s-=e(t[o]),s<0&&(s+=1),n-=e(t[o]),n<0&&(n+=1),r-=e(t[o]),r<0&&(r+=1);return[s,n,r]}function Og(){let t=4022871197;return function(e){const s=e.toString();for(let n=0;n<s.length;n++){t+=s.charCodeAt(n);let r=.02519603282416938*t;t=r>>>0,r-=t,r*=t,t=r>>>0,r-=t,t+=r*4294967296}return(t>>>0)*23283064365386963e-26}}function Mg(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(){return{set:t}}}}const yo=typeof window<"u"?window.Hammer||lh:function(){return Mg()};function ft(t){this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push(()=>{this._dom.overlay.parentNode.removeChild(this._dom.overlay)});const e=yo(this._dom.overlay);e.on("tap",this._onTapOverlay.bind(this)),this._cleanupQueue.push(()=>{e.destroy()}),["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(n=>{e.on(n,r=>{r.srcEvent.stopPropagation()})}),document&&document.body&&(this._onClick=n=>{Pg(n.target,t)||this.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push(()=>{document.body.removeEventListener("click",this._onClick)})),this._escListener=n=>{("key"in n?n.key==="Escape":n.keyCode===27)&&this.deactivate()}}oo(ft.prototype);ft.current=null;ft.prototype.destroy=function(){this.deactivate();for(const t of this._cleanupQueue.splice(0).reverse())t()};ft.prototype.activate=function(){ft.current&&ft.current.deactivate(),ft.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)};ft.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")};ft.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};function Pg(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const Ng=/^\/?Date\((-?\d+)/i,Ag=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Ig=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Rg=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Fg=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function cs(t){return t instanceof Number||typeof t=="number"}function ch(t){if(t)for(;t.hasChildNodes()===!0;){const e=t.firstChild;e&&(ch(e),t.removeChild(e))}}function Le(t){return t instanceof String||typeof t=="string"}function Dr(t){return typeof t=="object"&&t!==null}function Lg(t){if(t instanceof Date)return!0;if(Le(t)){if(Ng.exec(t))return!0;if(!isNaN(Date.parse(t)))return!0}return!1}function di(t,e,s,n){let r=!1;n===!0&&(r=e[s]===null&&t[s]!==void 0),r?delete t[s]:t[s]=e[s]}function fh(t,e,s=!1){for(const n in t)if(e[n]!==void 0)if(e[n]===null||typeof e[n]!="object")di(t,e,n,s);else{const r=t[n],o=e[n];Dr(r)&&Dr(o)&&fh(r,o,s)}}const Hg=Object.assign;function Yg(t,e,...s){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(const n of s)for(let r=0;r<t.length;r++){const o=t[r];n&&Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}function Wg(t,e,s,n=!1){if(Array.isArray(s))throw new TypeError("Arrays are not supported by deepExtend");for(let r=0;r<t.length;r++){const o=t[r];if(Object.prototype.hasOwnProperty.call(s,o))if(s[o]&&s[o].constructor===Object)e[o]===void 0&&(e[o]={}),e[o].constructor===Object?Ts(e[o],s[o],!1,n):di(e,s,o,n);else{if(Array.isArray(s[o]))throw new TypeError("Arrays are not supported by deepExtend");di(e,s,o,n)}}return e}function Gg(t,e,s,n=!1){if(Array.isArray(s))throw new TypeError("Arrays are not supported by deepExtend");for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&!t.includes(r))if(s[r]&&s[r].constructor===Object)e[r]===void 0&&(e[r]={}),e[r].constructor===Object?Ts(e[r],s[r]):di(e,s,r,n);else if(Array.isArray(s[r])){e[r]=[];for(let o=0;o<s[r].length;o++)e[r].push(s[r][o])}else di(e,s,r,n);return e}function Ts(t,e,s=!1,n=!1){for(const r in e)(Object.prototype.hasOwnProperty.call(e,r)||s===!0)&&(typeof e[r]=="object"&&e[r]!==null&&Object.getPrototypeOf(e[r])===Object.prototype?t[r]===void 0?t[r]=Ts({},e[r],s):typeof t[r]=="object"&&t[r]!==null&&Object.getPrototypeOf(t[r])===Object.prototype?Ts(t[r],e[r],s):di(t,e,r,n):Array.isArray(e[r])?t[r]=e[r].slice():di(t,e,r,n));return t}function Ug(t,e){if(t.length!==e.length)return!1;for(let s=0,n=t.length;s<n;s++)if(t[s]!=e[s])return!1;return!0}function rs(t){const e=typeof t;return e==="object"?t===null?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":Array.isArray(t)?"Array":t instanceof Date?"Date":"Object":e==="number"?"Number":e==="boolean"?"Boolean":e==="string"?"String":e===void 0?"undefined":e}function Cs(t,e){return[...t,e]}function ph(t){return t.slice()}function Bg(t){return t.getBoundingClientRect().left}function zg(t){return t.getBoundingClientRect().right}function $g(t){return t.getBoundingClientRect().top}function jg(t,e){let s=t.className.split(" ");const n=e.split(" ");s=s.concat(n.filter(function(r){return!s.includes(r)})),t.className=s.join(" ")}function Vg(t,e){let s=t.className.split(" ");const n=e.split(" ");s=s.filter(function(r){return!n.includes(r)}),t.className=s.join(" ")}function Xg(t,e){if(Array.isArray(t)){const s=t.length;for(let n=0;n<s;n++)e(t[n],n,t)}else for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(t[s],s,t)}const qg=Object.values;function Zg(t,e,s){return t[e]!==s?(t[e]=s,!0):!1}function Kg(t){let e=!1;return()=>{e||(e=!0,requestAnimationFrame(()=>{e=!1,t()}))}}function Qg(t,e,s,n){t.addEventListener?(n===void 0&&(n=!1),e==="mousewheel"&&navigator.userAgent.includes("Firefox")&&(e="DOMMouseScroll"),t.addEventListener(e,s,n)):t.attachEvent("on"+e,s)}function Jg(t,e,s,n){t.removeEventListener?(n===void 0&&(n=!1),e==="mousewheel"&&navigator.userAgent.includes("Firefox")&&(e="DOMMouseScroll"),t.removeEventListener(e,s,n)):t.detachEvent("on"+e,s)}function ey(t){t||(t=window.event),t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}function ty(t=window.event){let e=null;return t&&(t.target?e=t.target:t.srcElement&&(e=t.srcElement)),!(e instanceof Element)||e.nodeType!=null&&e.nodeType==3&&(e=e.parentNode,!(e instanceof Element))?null:e}function iy(t,e){let s=t;for(;s;){if(s===e)return!0;if(s.parentNode)s=s.parentNode;else return!1}return!1}const sy={asBoolean(t,e){return typeof t=="function"&&(t=t()),t!=null?t!=!1:e||null},asNumber(t,e){return typeof t=="function"&&(t=t()),t!=null?Number(t)||e||null:e||null},asString(t,e){return typeof t=="function"&&(t=t()),t!=null?String(t):e||null},asSize(t,e){return typeof t=="function"&&(t=t()),Le(t)?t:cs(t)?t+"px":e||null},asElement(t,e){return typeof t=="function"&&(t=t()),t||e||null}};function $n(t){let e;switch(t.length){case 3:case 4:return e=Ig.exec(t),e?{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16)}:null;case 6:case 7:return e=Ag.exec(t),e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null;default:return null}}function ny(t,e){if(t.includes("rgba"))return t;if(t.includes("rgb")){const s=t.substr(t.indexOf("(")+1).replace(")","").split(",");return"rgba("+s[0]+","+s[1]+","+s[2]+","+e+")"}else{const s=$n(t);return s==null?t:"rgba("+s.r+","+s.g+","+s.b+","+e+")"}}function vo(t,e,s){return"#"+((1<<24)+(t<<16)+(e<<8)+s).toString(16).slice(1)}function ry(t,e){if(Le(t)){let s=t;if(_o(s)){const n=s.substr(4).substr(0,s.length-5).split(",").map(function(r){return parseInt(r)});s=vo(n[0],n[1],n[2])}if(bo(s)===!0){const n=mh(s),r={h:n.h,s:n.s*.8,v:Math.min(1,n.v*1.02)},o={h:n.h,s:Math.min(1,n.s*1.25),v:n.v*.8},a=Tr(o.h,o.s,o.v),l=Tr(r.h,r.s,r.v);return{background:s,border:a,highlight:{background:l,border:a},hover:{background:l,border:a}}}else return{background:s,border:s,highlight:{background:s,border:s},hover:{background:s,border:s}}}else return e?{background:t.background||e.background,border:t.border||e.border,highlight:Le(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:Le(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}:{background:t.background||void 0,border:t.border||void 0,highlight:Le(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:Le(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function Mi(t,e,s){t=t/255,e=e/255,s=s/255;const n=Math.min(t,Math.min(e,s)),r=Math.max(t,Math.max(e,s));if(n===r)return{h:0,s:0,v:n};const o=t===n?e-s:s===n?t-e:s-t,l=60*((t===n?3:s===n?1:5)-o/(r-n))/360,h=(r-n)/r;return{h:l,s:h,v:r}}const Ii={split(t){const e={};return t.split(";").forEach(s=>{if(s.trim()!=""){const n=s.split(":"),r=n[0].trim(),o=n[1].trim();e[r]=o}}),e},join(t){return Object.keys(t).map(function(e){return e+": "+t[e]}).join("; ")}};function oy(t,e){const s=Ii.split(t.style.cssText),n=Ii.split(e),r={...s,...n};t.style.cssText=Ii.join(r)}function ay(t,e){const s=Ii.split(t.style.cssText),n=Ii.split(e);for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&delete s[r];t.style.cssText=Ii.join(s)}function fs(t,e,s){let n,r,o;const a=Math.floor(t*6),l=t*6-a,h=s*(1-e),d=s*(1-l*e),u=s*(1-(1-l)*e);switch(a%6){case 0:n=s,r=u,o=h;break;case 1:n=d,r=s,o=h;break;case 2:n=h,r=s,o=u;break;case 3:n=h,r=d,o=s;break;case 4:n=u,r=h,o=s;break;case 5:n=s,r=h,o=d;break}return{r:Math.floor(n*255),g:Math.floor(r*255),b:Math.floor(o*255)}}function Tr(t,e,s){const n=fs(t,e,s);return vo(n.r,n.g,n.b)}function mh(t){const e=$n(t);if(!e)throw new TypeError(`'${t}' is not a valid color.`);return Mi(e.r,e.g,e.b)}function bo(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function _o(t){return Rg.test(t)}function gh(t){return Fg.test(t)}function ly(t,e){if(e!==null&&typeof e=="object"){const s=Object.create(e);for(let n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(e,t[n])&&typeof e[t[n]]=="object"&&(s[t[n]]=wo(e[t[n]]));return s}else return null}function wo(t){if(t===null||typeof t!="object")return null;if(t instanceof Element)return t;const e=Object.create(t);for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&typeof t[s]=="object"&&(e[s]=wo(t[s]));return e}function hy(t,e){for(let s=0;s<t.length;s++){const n=t[s];let r;for(r=s;r>0&&e(n,t[r-1])<0;r--)t[r]=t[r-1];t[r]=n}return t}function dy(t,e,s,n={}){const r=function(p){return p!=null},o=function(p){return p!==null&&typeof p=="object"},a=function(p){for(const g in p)if(Object.prototype.hasOwnProperty.call(p,g))return!1;return!0};if(!o(t))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!r(s))throw new Error("Parameter option must have a value");if(!o(n))throw new Error("Parameter globalOptions must be an object");const l=function(p,g,y){o(p[y])||(p[y]={});const v=g[y],_=p[y];for(const D in v)Object.prototype.hasOwnProperty.call(v,D)&&(_[D]=v[D])},h=e[s],u=o(n)&&!a(n)?n[s]:void 0,c=u?u.enabled:void 0;if(h===void 0)return;if(typeof h=="boolean"){o(t[s])||(t[s]={}),t[s].enabled=h;return}if(h===null&&!o(t[s]))if(r(u))t[s]=Object.create(u);else return;if(!o(h))return;let f=!0;h.enabled!==void 0?f=h.enabled:c!==void 0&&(f=u.enabled),l(t,e,s),t[s].enabled=f}function uy(t,e,s,n){let o=0,a=0,l=t.length-1;for(;a<=l&&o<1e4;){const h=Math.floor((a+l)/2),d=t[h],u=n===void 0?d[s]:d[s][n],c=e(u);if(c==0)return h;c==-1?a=h+1:l=h-1,o++}return-1}function cy(t,e,s,n,r){let a=0,l=0,h=t.length-1,d,u,c,f;for(r=r??function(p,g){return p==g?0:p<g?-1:1};l<=h&&a<1e4;){if(f=Math.floor(.5*(h+l)),d=t[Math.max(0,f-1)][s],u=t[f][s],c=t[Math.min(t.length-1,f+1)][s],r(u,e)==0)return f;if(r(d,e)<0&&r(u,e)>0)return n=="before"?Math.max(0,f-1):f;if(r(u,e)<0&&r(c,e)>0)return n=="before"?f:Math.min(t.length-1,f+1);r(u,e)<0?l=f+1:h=f-1,a++}return-1}const fy={linear(t){return t},easeInQuad(t){return t*t},easeOutQuad(t){return t*(2-t)},easeInOutQuad(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic(t){return t*t*t},easeOutCubic(t){return--t*t*t+1},easeInOutCubic(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart(t){return t*t*t*t},easeOutQuart(t){return 1- --t*t*t*t},easeInOutQuart(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint(t){return t*t*t*t*t},easeOutQuint(t){return 1+--t*t*t*t*t},easeInOutQuint(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function py(){const t=document.createElement("p");t.style.width="100%",t.style.height="200px";const e=document.createElement("div");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.appendChild(t),document.body.appendChild(e);const s=t.offsetWidth;e.style.overflow="scroll";let n=t.offsetWidth;return s==n&&(n=e.clientWidth),document.body.removeChild(e),s-n}function my(t,e){let s;Array.isArray(e)||(e=[e]);for(const n of t)if(n){s=n[e[0]];for(let r=1;r<e.length;r++)s&&(s=s[e[r]]);if(typeof s<"u")break}return s}const gy={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class yh{constructor(e=1){this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return gy[e]}setColor(e,s=!0){if(e==="none")return;let n;const r=this._isColorString(e);if(r!==void 0&&(e=r),Le(e)===!0){if(_o(e)===!0){const o=e.substr(4).substr(0,e.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(gh(e)===!0){const o=e.substr(5).substr(0,e.length-6).split(",");n={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(bo(e)===!0){const o=$n(e);n={r:o.r,g:o.g,b:o.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){const o=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:o}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(n,s)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(e=!0){e===!0&&(this.previousColor=Object.assign({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e,s=!0){s===!0&&(this.initialColor=Object.assign({},e)),this.color=e;const n=Mi(e.r,e.g,e.b),r=2*Math.PI,o=this.r*n.s,a=this.centerCoordinates.x+o*Math.sin(r*n.h),l=this.centerCoordinates.y+o*Math.cos(r*n.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){const s=Mi(this.color.r,this.color.g,this.color.b);s.v=e/100;const n=fs(s.h,s.s,s.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(e=this.color){const s=Mi(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const r=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,r,o),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-s.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*s.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){const s=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{const s=document.createElement("DIV");s.style.color="red",s.style.fontWeight="bold",s.style.padding="10px",s.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(s)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);const e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)},this.opacityRange.oninput=function(){e._setOpacity(this.value)},this.brightnessRange.onchange=function(){e._setBrightness(this.value)},this.brightnessRange.oninput=function(){e._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new yo(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",e=>{e.isFirst&&this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){const e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);const s=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,s,n);let r,o,a,l;this.centerCoordinates={x:s*.5,y:n*.5},this.r=.49*s;const h=2*Math.PI/360,d=1/360,u=1/this.r;let c;for(a=0;a<360;a++)for(l=0;l<this.r;l++)r=this.centerCoordinates.x+l*Math.sin(h*a),o=this.centerCoordinates.y+l*Math.cos(h*a),c=fs(a*d,l*u,1),e.fillStyle="rgb("+c.r+","+c.g+","+c.b+")",e.fillRect(r-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,s,n)}this.generated=!0}_moveSelector(e){const s=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-s.left,r=e.center.y-s.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=n-a,h=r-o,d=Math.atan2(l,h),u=.98*Math.min(Math.sqrt(l*l+h*h),a),c=Math.cos(d)*u+o,f=Math.sin(d)*u+a;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=d/(2*Math.PI);p=p<0?p+1:p;const g=u/this.r,y=Mi(this.color.r,this.color.g,this.color.b);y.h=p,y.s=g;const v=fs(y.h,y.s,y.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}function Cr(...t){if(t.length<1)throw new TypeError("Invalid arguments.");if(t.length===1)return document.createTextNode(t[0]);{const e=document.createElement(t[0]);return e.appendChild(Cr(...t.slice(1))),e}}class yy{constructor(e,s,n,r=1,o=()=>!1){this.parent=e,this.changedOptions=[],this.container=s,this.allowCreation=!1,this.hideOption=o,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Object.assign(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new yh(r),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let s=!0;if(typeof e=="string")this.options.filter=e;else if(Array.isArray(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),e.filter!==void 0&&(this.options.filter=e.filter),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(s=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,s=e):typeof e=="function"&&(this.options.filter=e,s=!0);this.options.filter===!1&&(s=!1),this.options.enabled=s}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];const e=this.options.filter;let s=0,n=!1;for(const r in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,r)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(r,[]),n=n||this._handleObject(this.configureOptions[r],[r],!0)):(e===!0||e.indexOf(r)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,s>0&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r])),s++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(let e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(let e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let s=this.moduleOptions;for(let n=0;n<e.length;n++)if(s[e[n]]!==void 0)s=s[e[n]];else{s=void 0;break}return s}_makeItem(e,...s){if(this.allowCreation===!0){const n=document.createElement("div");return n.className="vis-configuration vis-config-item vis-config-s"+e.length,s.forEach(r=>{n.appendChild(r)}),this.domElements.push(n),this.domElements.length}return 0}_makeHeader(e){const s=document.createElement("div");s.className="vis-configuration vis-config-header",s.innerText=e,this._makeItem([],s)}_makeLabel(e,s,n=!1){const r=document.createElement("div");if(r.className="vis-configuration vis-config-label vis-config-s"+s.length,n===!0){for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(Cr("i","b",e))}else r.innerText=e+":";return r}_makeDropdown(e,s,n){const r=document.createElement("select");r.className="vis-configuration vis-config-select";let o=0;s!==void 0&&e.indexOf(s)!==-1&&(o=e.indexOf(s));for(let h=0;h<e.length;h++){const d=document.createElement("option");d.value=e[h],h===o&&(d.selected="selected"),d.innerText=e[h],r.appendChild(d)}const a=this;r.onchange=function(){a._update(this.value,n)};const l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,r)}_makeRange(e,s,n){const r=e[0],o=e[1],a=e[2],l=e[3],h=document.createElement("input");h.className="vis-configuration vis-config-range";try{h.type="range",h.min=o,h.max=a}catch{}h.step=l;let d="",u=0;s!==void 0?(s<0&&s*1.2<o?(h.min=Math.ceil(s*1.2),u=h.min,d="range increased"):s/1.2<o&&(h.min=Math.ceil(s/1.2),u=h.min,d="range increased"),s*1.2>a&&a!==1&&(h.max=Math.ceil(s*1.2),u=h.max,d="range increased"),h.value=s):h.value=r;const c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=h.value;const f=this;h.onchange=function(){c.value=this.value,f._update(Number(this.value),n)},h.oninput=function(){c.value=this.value};const p=this._makeLabel(n[n.length-1],n),g=this._makeItem(n,p,h,c);d!==""&&this.popupHistory[g]!==u&&(this.popupHistory[g]=u,this._setupPopup(d,g))}_makeButton(){if(this.options.showButton===!0){const e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,s){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){const n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerText=e,n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:s}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){const s=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=s.left+"px",this.popupDiv.html.style.top=s.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(e,s,n){const r=document.createElement("input");r.type="checkbox",r.className="vis-configuration vis-config-checkbox",r.checked=e,s!==void 0&&(r.checked=s,s!==e&&(typeof e=="object"?s!==e.enabled&&this.changedOptions.push({path:n,value:s}):this.changedOptions.push({path:n,value:s})));const o=this;r.onchange=function(){o._update(this.checked,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,r)}_makeTextInput(e,s,n){const r=document.createElement("input");r.type="text",r.className="vis-configuration vis-config-text",r.value=s,s!==e&&this.changedOptions.push({path:n,value:s});const o=this;r.onchange=function(){o._update(this.value,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,r)}_makeColorField(e,s,n){const r=e[1],o=document.createElement("div");s=s===void 0?r:s,s!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=s):o.className="vis-configuration vis-config-colorBlock none",s=s===void 0?r:s,o.onclick=()=>{this._showColorPicker(s,o,n)};const a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,o)}_showColorPicker(e,s,n){s.onclick=function(){},this.colorPicker.insertTo(s),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(r=>{const o="rgba("+r.r+","+r.g+","+r.b+","+r.a+")";s.style.backgroundColor=o,this._update(o,n)}),this.colorPicker.setCloseCallback(()=>{s.onclick=()=>{this._showColorPicker(e,s,n)}})}_handleObject(e,s=[],n=!1){let r=!1;const o=this.options.filter;let a=!1;for(const l in e)if(Object.prototype.hasOwnProperty.call(e,l)){r=!0;const h=e[l],d=Cs(s,l);if(typeof o=="function"&&(r=o(l,s),r===!1&&!Array.isArray(h)&&typeof h!="string"&&typeof h!="boolean"&&h instanceof Object&&(this.allowCreation=!1,r=this._handleObject(h,d,!0),this.allowCreation=n===!1)),r!==!1){a=!0;const u=this._getValue(d);if(Array.isArray(h))this._handleArray(h,u,d);else if(typeof h=="string")this._makeTextInput(h,u,d);else if(typeof h=="boolean")this._makeCheckbox(h,u,d);else if(h instanceof Object){if(!this.hideOption(s,l,this.moduleOptions))if(h.enabled!==void 0){const c=Cs(d,"enabled"),f=this._getValue(c);if(f===!0){const p=this._makeLabel(l,d,!0);this._makeItem(d,p),a=this._handleObject(h,d)||a}else this._makeCheckbox(h,f,d)}else{const c=this._makeLabel(l,d,!0);this._makeItem(d,c),a=this._handleObject(h,d)||a}}else console.error("dont know how to handle",h,l,d)}}return a}_handleArray(e,s,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,s,n),e[1]!==s&&this.changedOptions.push({path:n,value:s})):typeof e[0]=="string"?(this._makeDropdown(e,s,n),e[0]!==s&&this.changedOptions.push({path:n,value:s})):typeof e[0]=="number"&&(this._makeRange(e,s,n),e[0]!==s&&this.changedOptions.push({path:n,value:Number(s)}))}_update(e,s){const n=this._constructOptions(e,s);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,s,n={}){let r=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let o=0;o<s.length;o++)s[o]!=="global"&&(r[s[o]]===void 0&&(r[s[o]]={}),o!==s.length-1?r=r[s[o]]:r[s[o]]=e);return n}_printOptions(){const e=this.getOptions();for(;this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Cr("pre","const options = "+JSON.stringify(e,null,2)))}getOptions(){const e={};for(let s=0;s<this.changedOptions.length;s++)this._constructOptions(this.changedOptions[s].value,this.changedOptions[s].path,e);return e}}class vy{constructor(e,s){this.container=e,this.overflowMethod=s||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,s){this.x=parseInt(e),this.y=parseInt(s)}setText(e){if(e instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(e)}else this.frame.innerText=e}show(e){if(e===void 0&&(e=!0),e===!0){const s=this.frame.clientHeight,n=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth;let a=0,l=0;if(this.overflowMethod=="flip"){let h=!1,d=!0;this.y-s<this.padding&&(d=!1),this.x+n>o-this.padding&&(h=!0),h?a=this.x-n:a=this.x,d?l=this.y-s:l=this.y}else l=this.y-s,l+s+this.padding>r&&(l=r-s-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+n+this.padding>o&&(a=o-n-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}let is=!1,da;const kr="background: #FFeeee; color: #dd0000";class le{static validate(e,s,n){is=!1,da=s;let r=s;return n!==void 0&&(r=s[n]),le.parse(e,r,[]),is}static parse(e,s,n){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&le.check(r,e,s,n)}static check(e,s,n,r){if(n[e]===void 0&&n.__any__===void 0){le.getSuggestion(e,n,r);return}let o=e,a=!0;n[e]===void 0&&n.__any__!==void 0&&(o="__any__",a=le.getType(s[e])==="object");let l=n[o];a&&l.__type__!==void 0&&(l=l.__type__),le.checkFields(e,s,n,o,l,r)}static checkFields(e,s,n,r,o,a){const l=function(u){console.error("%c"+u+le.printLocation(a,e),kr)},h=le.getType(s[e]),d=o[h];d!==void 0?le.getType(d)==="array"&&d.indexOf(s[e])===-1?(l('Invalid option detected in "'+e+'". Allowed values are:'+le.print(d)+' not "'+s[e]+'". '),is=!0):h==="object"&&r!=="__any__"&&(a=Cs(a,e),le.parse(s[e],n[r],a)):o.any===void 0&&(l('Invalid type received for "'+e+'". Expected: '+le.print(Object.keys(o))+". Received ["+h+'] "'+s[e]+'"'),is=!0)}static getType(e){const s=typeof e;return s==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":s==="number"?"number":s==="boolean"?"boolean":s==="string"?"string":s===void 0?"undefined":s}static getSuggestion(e,s,n){const r=le.findInOptions(e,s,n,!1),o=le.findInOptions(e,da,[],!0),a=8,l=4;let h;r.indexMatch!==void 0?h=" in "+le.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+`"?

`:o.distance<=l&&r.distance>o.distance?h=" in "+le.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+le.printLocation(o.path,o.closestMatch,""):r.distance<=a?h='. Did you mean "'+r.closestMatch+'"?'+le.printLocation(r.path,e):h=". Did you mean one of these: "+le.print(Object.keys(s))+le.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+h,kr),is=!0}static findInOptions(e,s,n,r=!1){let o=1e9,a="",l=[];const h=e.toLowerCase();let d;for(const u in s){let c;if(s[u].__type__!==void 0&&r===!0){const f=le.findInOptions(e,s[u],Cs(n,u));o>f.distance&&(a=f.closestMatch,l=f.path,o=f.distance,d=f.indexMatch)}else u.toLowerCase().indexOf(h)!==-1&&(d=u),c=le.levenshteinDistance(e,u),o>c&&(a=u,l=ph(n),o=c)}return{closestMatch:a,path:l,distance:o,indexMatch:d}}static printLocation(e,s,n=`Problem value found at: 
`){let r=`

`+n+`options = {
`;for(let o=0;o<e.length;o++){for(let a=0;a<o+1;a++)r+="  ";r+=e[o]+`: {
`}for(let o=0;o<e.length+1;o++)r+="  ";r+=s+`
`;for(let o=0;o<e.length+1;o++){for(let a=0;a<e.length-o;a++)r+="  ";r+=`}
`}return r+`

`}static print(e){return JSON.stringify(e).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}static levenshteinDistance(e,s){if(e.length===0)return s.length;if(s.length===0)return e.length;const n=[];let r;for(r=0;r<=s.length;r++)n[r]=[r];let o;for(o=0;o<=e.length;o++)n[0][o]=o;for(r=1;r<=s.length;r++)for(o=1;o<=e.length;o++)s.charAt(r-1)==e.charAt(o-1)?n[r][o]=n[r-1][o-1]:n[r][o]=Math.min(n[r-1][o-1]+1,Math.min(n[r][o-1]+1,n[r-1][o]+1));return n[s.length][e.length]}}const by=ft,_y=yh,wy=yy,xy=yo,Sy=vy,Dy=kr,Ty=le,Cy=Object.freeze(Object.defineProperty({__proto__:null,Activator:by,Alea:Cg,ColorPicker:_y,Configurator:wy,DELETE:mo,HSVToHex:Tr,HSVToRGB:fs,Hammer:xy,Popup:Sy,RGBToHSV:Mi,RGBToHex:vo,VALIDATOR_PRINT_STYLE:Dy,Validator:Ty,addClassName:jg,addCssText:oy,addEventListener:Qg,binarySearchCustom:uy,binarySearchValue:cy,bridgeObject:wo,copyAndExtendArray:Cs,copyArray:ph,deepExtend:Ts,deepObjectAssign:go,easingFunctions:fy,equalArray:Ug,extend:Hg,fillIfDefined:fh,forEach:Xg,getAbsoluteLeft:Bg,getAbsoluteRight:zg,getAbsoluteTop:$g,getScrollBarWidth:py,getTarget:ty,getType:rs,hasParent:iy,hexToHSV:mh,hexToRGB:$n,insertSort:hy,isDate:Lg,isNumber:cs,isObject:Dr,isString:Le,isValidHex:bo,isValidRGB:_o,isValidRGBA:gh,mergeOptions:dy,option:sy,overrideOpacity:ny,parseColor:ry,preventDefault:ey,pureDeepObjectAssign:hh,recursiveDOMDelete:ch,removeClassName:Vg,removeCssText:ay,removeEventListener:Jg,selectiveBridgeObject:ly,selectiveDeepExtend:Wg,selectiveExtend:Yg,selectiveNotDeepExtend:Gg,throttle:Kg,toArray:qg,topMost:my,updateProperty:Zg},Symbol.toStringTag,{value:"Module"}));let Ks;const ky=new Uint8Array(16);function Ey(){if(!Ks&&(Ks=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ks))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ks(ky)}const be=[];for(let t=0;t<256;++t)be.push((t+256).toString(16).slice(1));function Oy(t,e=0){return(be[t[e+0]]+be[t[e+1]]+be[t[e+2]]+be[t[e+3]]+"-"+be[t[e+4]]+be[t[e+5]]+"-"+be[t[e+6]]+be[t[e+7]]+"-"+be[t[e+8]]+be[t[e+9]]+"-"+be[t[e+10]]+be[t[e+11]]+be[t[e+12]]+be[t[e+13]]+be[t[e+14]]+be[t[e+15]]).toLowerCase()}const My=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ua={randomUUID:My};function ri(t,e,s){if(ua.randomUUID&&!e&&!t)return ua.randomUUID();t=t||{};const n=t.random||(t.rng||Ey)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){s=s||0;for(let r=0;r<16;++r)e[s+r]=n[r];return e}return Oy(n)}/**
 * vis-data
 * http://visjs.org/
 *
 * Manage unstructured data using DataSet. Add, update, and remove data, and listen for changes in the data.
 *
 * @version 7.1.6
 * @date    2023-03-22T11:39:37.256Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */function Py(t){return new Ay(t)}class Ny{constructor(e,s,n){$(this,"_source");$(this,"_transformers");$(this,"_target");$(this,"_listeners",{add:this._add.bind(this),remove:this._remove.bind(this),update:this._update.bind(this)});this._source=e,this._transformers=s,this._target=n}all(){return this._target.update(this._transformItems(this._source.get())),this}start(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}stop(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}_transformItems(e){return this._transformers.reduce((s,n)=>n(s),e)}_add(e,s){s!=null&&this._target.add(this._transformItems(this._source.get(s.items)))}_update(e,s){s!=null&&this._target.update(this._transformItems(this._source.get(s.items)))}_remove(e,s){s!=null&&this._target.remove(this._transformItems(s.oldData))}}class Ay{constructor(e){$(this,"_source");$(this,"_transformers",[]);this._source=e}filter(e){return this._transformers.push(s=>s.filter(e)),this}map(e){return this._transformers.push(s=>s.map(e)),this}flatMap(e){return this._transformers.push(s=>s.flatMap(e)),this}to(e){return new Ny(this._source,this._transformers,e)}}function Er(t){return typeof t=="string"||typeof t=="number"}class xo{constructor(e){$(this,"delay");$(this,"max");$(this,"_queue",[]);$(this,"_timeout",null);$(this,"_extended",null);this.delay=null,this.max=1/0,this.setOptions(e)}setOptions(e){e&&typeof e.delay<"u"&&(this.delay=e.delay),e&&typeof e.max<"u"&&(this.max=e.max),this._flushIfNeeded()}static extend(e,s){const n=new xo(s);if(e.flush!==void 0)throw new Error("Target object already has a property flush");e.flush=()=>{n.flush()};const r=[{name:"flush",original:void 0}];if(s&&s.replace)for(let o=0;o<s.replace.length;o++){const a=s.replace[o];r.push({name:a,original:e[a]}),n.replace(e,a)}return n._extended={object:e,methods:r},n}destroy(){if(this.flush(),this._extended){const e=this._extended.object,s=this._extended.methods;for(let n=0;n<s.length;n++){const r=s[n];r.original?e[r.name]=r.original:delete e[r.name]}this._extended=null}}replace(e,s){const n=this,r=e[s];if(!r)throw new Error("Method "+s+" undefined");e[s]=function(...o){n.queue({args:o,fn:r,context:this})}}queue(e){typeof e=="function"?this._queue.push({fn:e}):this._queue.push(e),this._flushIfNeeded()}_flushIfNeeded(){this._queue.length>this.max&&this.flush(),this._timeout!=null&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&typeof this.delay=="number"&&(this._timeout=setTimeout(()=>{this.flush()},this.delay))}flush(){this._queue.splice(0).forEach(e=>{e.fn.apply(e.context||e.fn,e.args||[])})}}class ks{constructor(){$(this,"_subscribers",{"*":[],add:[],remove:[],update:[]});$(this,"subscribe",ks.prototype.on);$(this,"unsubscribe",ks.prototype.off)}_trigger(e,s,n){if(e==="*")throw new Error("Cannot trigger event *");[...this._subscribers[e],...this._subscribers["*"]].forEach(r=>{r(e,s,n??null)})}on(e,s){typeof s=="function"&&this._subscribers[e].push(s)}off(e,s){this._subscribers[e]=this._subscribers[e].filter(n=>n!==s)}}class ei{constructor(e){$(this,"_pairs");this._pairs=e}*[Symbol.iterator](){for(const[e,s]of this._pairs)yield[e,s]}*entries(){for(const[e,s]of this._pairs)yield[e,s]}*keys(){for(const[e]of this._pairs)yield e}*values(){for(const[,e]of this._pairs)yield e}toIdArray(){return[...this._pairs].map(e=>e[0])}toItemArray(){return[...this._pairs].map(e=>e[1])}toEntryArray(){return[...this._pairs]}toObjectMap(){const e=Object.create(null);for(const[s,n]of this._pairs)e[s]=n;return e}toMap(){return new Map(this._pairs)}toIdSet(){return new Set(this.toIdArray())}toItemSet(){return new Set(this.toItemArray())}cache(){return new ei([...this._pairs])}distinct(e){const s=new Set;for(const[n,r]of this._pairs)s.add(e(r,n));return s}filter(e){const s=this._pairs;return new ei({*[Symbol.iterator](){for(const[n,r]of s)e(r,n)&&(yield[n,r])}})}forEach(e){for(const[s,n]of this._pairs)e(n,s)}map(e){const s=this._pairs;return new ei({*[Symbol.iterator](){for(const[n,r]of s)yield[n,e(r,n)]}})}max(e){const s=this._pairs[Symbol.iterator]();let n=s.next();if(n.done)return null;let r=n.value[1],o=e(n.value[1],n.value[0]);for(;!(n=s.next()).done;){const[a,l]=n.value,h=e(l,a);h>o&&(o=h,r=l)}return r}min(e){const s=this._pairs[Symbol.iterator]();let n=s.next();if(n.done)return null;let r=n.value[1],o=e(n.value[1],n.value[0]);for(;!(n=s.next()).done;){const[a,l]=n.value,h=e(l,a);h<o&&(o=h,r=l)}return r}reduce(e,s){for(const[n,r]of this._pairs)s=e(s,r,n);return s}sort(e){return new ei({[Symbol.iterator]:()=>[...this._pairs].sort(([s,n],[r,o])=>e(n,o,s,r))[Symbol.iterator]()})}}function Iy(t,e){return t[e]==null&&(t[e]=ri()),t}class Wi extends ks{constructor(s,n){super();$(this,"flush");$(this,"length");$(this,"_options");$(this,"_data");$(this,"_idProp");$(this,"_queue",null);s&&!Array.isArray(s)&&(n=s,s=[]),this._options=n||{},this._data=new Map,this.length=0,this._idProp=this._options.fieldId||"id",s&&s.length&&this.add(s),this.setOptions(n)}get idProp(){return this._idProp}setOptions(s){s&&s.queue!==void 0&&(s.queue===!1?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=xo.extend(this,{replace:["add","update","remove"]})),s.queue&&typeof s.queue=="object"&&this._queue.setOptions(s.queue)))}add(s,n){const r=[];let o;if(Array.isArray(s)){if(s.map(l=>l[this._idProp]).some(l=>this._data.has(l)))throw new Error("A duplicate id was found in the parameter array.");for(let l=0,h=s.length;l<h;l++)o=this._addItem(s[l]),r.push(o)}else if(s&&typeof s=="object")o=this._addItem(s),r.push(o);else throw new Error("Unknown dataType");return r.length&&this._trigger("add",{items:r},n),r}update(s,n){const r=[],o=[],a=[],l=[],h=this._idProp,d=u=>{const c=u[h];if(c!=null&&this._data.has(c)){const f=u,p=Object.assign({},this._data.get(c)),g=this._updateItem(f);o.push(g),l.push(f),a.push(p)}else{const f=this._addItem(u);r.push(f)}};if(Array.isArray(s))for(let u=0,c=s.length;u<c;u++)s[u]&&typeof s[u]=="object"?d(s[u]):console.warn("Ignoring input item, which is not an object at index "+u);else if(s&&typeof s=="object")d(s);else throw new Error("Unknown dataType");if(r.length&&this._trigger("add",{items:r},n),o.length){const u={items:o,oldData:a,data:l};this._trigger("update",u,n)}return r.concat(o)}updateOnly(s,n){Array.isArray(s)||(s=[s]);const r=s.map(o=>{const a=this._data.get(o[this._idProp]);if(a==null)throw new Error("Updating non-existent items is not allowed.");return{oldData:a,update:o}}).map(({oldData:o,update:a})=>{const l=o[this._idProp],h=hh(o,a);return this._data.set(l,h),{id:l,oldData:o,updatedData:h}});if(r.length){const o={items:r.map(a=>a.id),oldData:r.map(a=>a.oldData),data:r.map(a=>a.updatedData)};return this._trigger("update",o,n),o.items}else return[]}get(s,n){let r,o,a;Er(s)?(r=s,a=n):Array.isArray(s)?(o=s,a=n):a=s;const l=a&&a.returnType==="Object"?"Object":"Array",h=a&&a.filter,d=[];let u,c,f;if(r!=null)u=this._data.get(r),u&&h&&!h(u)&&(u=void 0);else if(o!=null)for(let p=0,g=o.length;p<g;p++)u=this._data.get(o[p]),u!=null&&(!h||h(u))&&d.push(u);else{c=[...this._data.keys()];for(let p=0,g=c.length;p<g;p++)f=c[p],u=this._data.get(f),u!=null&&(!h||h(u))&&d.push(u)}if(a&&a.order&&r==null&&this._sort(d,a.order),a&&a.fields){const p=a.fields;if(r!=null&&u!=null)u=this._filterFields(u,p);else for(let g=0,y=d.length;g<y;g++)d[g]=this._filterFields(d[g],p)}if(l=="Object"){const p={};for(let g=0,y=d.length;g<y;g++){const v=d[g],_=v[this._idProp];p[_]=v}return p}else return r!=null?u??null:d}getIds(s){const n=this._data,r=s&&s.filter,o=s&&s.order,a=[...n.keys()],l=[];if(r)if(o){const h=[];for(let d=0,u=a.length;d<u;d++){const c=a[d],f=this._data.get(c);f!=null&&r(f)&&h.push(f)}this._sort(h,o);for(let d=0,u=h.length;d<u;d++)l.push(h[d][this._idProp])}else for(let h=0,d=a.length;h<d;h++){const u=a[h],c=this._data.get(u);c!=null&&r(c)&&l.push(c[this._idProp])}else if(o){const h=[];for(let d=0,u=a.length;d<u;d++){const c=a[d];h.push(n.get(c))}this._sort(h,o);for(let d=0,u=h.length;d<u;d++)l.push(h[d][this._idProp])}else for(let h=0,d=a.length;h<d;h++){const u=a[h],c=n.get(u);c!=null&&l.push(c[this._idProp])}return l}getDataSet(){return this}forEach(s,n){const r=n&&n.filter,a=[...this._data.keys()];if(n&&n.order){const l=this.get(n);for(let h=0,d=l.length;h<d;h++){const u=l[h],c=u[this._idProp];s(u,c)}}else for(let l=0,h=a.length;l<h;l++){const d=a[l],u=this._data.get(d);u!=null&&(!r||r(u))&&s(u,d)}}map(s,n){const r=n&&n.filter,o=[],l=[...this._data.keys()];for(let h=0,d=l.length;h<d;h++){const u=l[h],c=this._data.get(u);c!=null&&(!r||r(c))&&o.push(s(c,u))}return n&&n.order&&this._sort(o,n.order),o}_filterFields(s,n){return s&&(Array.isArray(n)?n:Object.keys(n)).reduce((r,o)=>(r[o]=s[o],r),{})}_sort(s,n){if(typeof n=="string"){const r=n;s.sort((o,a)=>{const l=o[r],h=a[r];return l>h?1:l<h?-1:0})}else if(typeof n=="function")s.sort(n);else throw new TypeError("Order must be a function or a string")}remove(s,n){const r=[],o=[],a=Array.isArray(s)?s:[s];for(let l=0,h=a.length;l<h;l++){const d=this._remove(a[l]);if(d){const u=d[this._idProp];u!=null&&(r.push(u),o.push(d))}}return r.length&&this._trigger("remove",{items:r,oldData:o},n),r}_remove(s){let n;if(Er(s)?n=s:s&&typeof s=="object"&&(n=s[this._idProp]),n!=null&&this._data.has(n)){const r=this._data.get(n)||null;return this._data.delete(n),--this.length,r}return null}clear(s){const n=[...this._data.keys()],r=[];for(let o=0,a=n.length;o<a;o++)r.push(this._data.get(n[o]));return this._data.clear(),this.length=0,this._trigger("remove",{items:n,oldData:r},s),n}max(s){let n=null,r=null;for(const o of this._data.values()){const a=o[s];typeof a=="number"&&(r==null||a>r)&&(n=o,r=a)}return n||null}min(s){let n=null,r=null;for(const o of this._data.values()){const a=o[s];typeof a=="number"&&(r==null||a<r)&&(n=o,r=a)}return n||null}distinct(s){const n=this._data,r=[...n.keys()],o=[];let a=0;for(let l=0,h=r.length;l<h;l++){const d=r[l],c=n.get(d)[s];let f=!1;for(let p=0;p<a;p++)if(o[p]==c){f=!0;break}!f&&c!==void 0&&(o[a]=c,a++)}return o}_addItem(s){const n=Iy(s,this._idProp),r=n[this._idProp];if(this._data.has(r))throw new Error("Cannot add item: item with id "+r+" already exists");return this._data.set(r,n),++this.length,r}_updateItem(s){const n=s[this._idProp];if(n==null)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(s)+")");const r=this._data.get(n);if(!r)throw new Error("Cannot update item: no item with id "+n+" found");return this._data.set(n,{...r,...s}),n}stream(s){if(s){const n=this._data;return new ei({*[Symbol.iterator](){for(const r of s){const o=n.get(r);o!=null&&(yield[r,o])}}})}else return new ei({[Symbol.iterator]:this._data.entries.bind(this._data)})}}class So extends ks{constructor(s,n){super();$(this,"length",0);$(this,"_listener");$(this,"_data");$(this,"_ids",new Set);$(this,"_options");this._options=n||{},this._listener=this._onEvent.bind(this),this.setData(s)}get idProp(){return this.getDataSet().idProp}setData(s){if(this._data){this._data.off&&this._data.off("*",this._listener);const n=this._data.getIds({filter:this._options.filter}),r=this._data.get(n);this._ids.clear(),this.length=0,this._trigger("remove",{items:n,oldData:r})}if(s!=null){this._data=s;const n=this._data.getIds({filter:this._options.filter});for(let r=0,o=n.length;r<o;r++){const a=n[r];this._ids.add(a)}this.length=n.length,this._trigger("add",{items:n})}else this._data=new Wi;this._data.on&&this._data.on("*",this._listener)}refresh(){const s=this._data.getIds({filter:this._options.filter}),n=[...this._ids],r={},o=[],a=[],l=[];for(let h=0,d=s.length;h<d;h++){const u=s[h];r[u]=!0,this._ids.has(u)||(o.push(u),this._ids.add(u))}for(let h=0,d=n.length;h<d;h++){const u=n[h],c=this._data.get(u);c==null?console.error("If you see this, report it please."):r[u]||(a.push(u),l.push(c),this._ids.delete(u))}this.length+=o.length-a.length,o.length&&this._trigger("add",{items:o}),a.length&&this._trigger("remove",{items:a,oldData:l})}get(s,n){if(this._data==null)return null;let r=null,o;Er(s)||Array.isArray(s)?(r=s,o=n):o=s;const a=Object.assign({},this._options,o),l=this._options.filter,h=o&&o.filter;return l&&h&&(a.filter=d=>l(d)&&h(d)),r==null?this._data.get(a):this._data.get(r,a)}getIds(s){if(this._data.length){const n=this._options.filter,r=s!=null?s.filter:null;let o;return r?n?o=a=>n(a)&&r(a):o=r:o=n,this._data.getIds({filter:o,order:s&&s.order})}else return[]}forEach(s,n){if(this._data){const r=this._options.filter,o=n&&n.filter;let a;o?r?a=function(l){return r(l)&&o(l)}:a=o:a=r,this._data.forEach(s,{filter:a,order:n&&n.order})}}map(s,n){if(this._data){const r=this._options.filter,o=n&&n.filter;let a;return o?r?a=l=>r(l)&&o(l):a=o:a=r,this._data.map(s,{filter:a,order:n&&n.order})}else return[]}getDataSet(){return this._data.getDataSet()}stream(s){return this._data.stream(s||{[Symbol.iterator]:this._ids.keys.bind(this._ids)})}dispose(){var r;(r=this._data)!=null&&r.off&&this._data.off("*",this._listener);const s="This data view has already been disposed of.",n={get:()=>{throw new Error(s)},set:()=>{throw new Error(s)},configurable:!1};for(const o of Reflect.ownKeys(So.prototype))Object.defineProperty(this,o,n)}_onEvent(s,n,r){if(!n||!n.items||!this._data)return;const o=n.items,a=[],l=[],h=[],d=[],u=[],c=[];switch(s){case"add":for(let f=0,p=o.length;f<p;f++){const g=o[f];this.get(g)&&(this._ids.add(g),a.push(g))}break;case"update":for(let f=0,p=o.length;f<p;f++){const g=o[f];this.get(g)?this._ids.has(g)?(l.push(g),u.push(n.data[f]),d.push(n.oldData[f])):(this._ids.add(g),a.push(g)):this._ids.has(g)&&(this._ids.delete(g),h.push(g),c.push(n.oldData[f]))}break;case"remove":for(let f=0,p=o.length;f<p;f++){const g=o[f];this._ids.has(g)&&(this._ids.delete(g),h.push(g),c.push(n.oldData[f]))}break}this.length+=a.length-h.length,a.length&&this._trigger("add",{items:a},r),l.length&&this._trigger("update",{items:l,oldData:d,data:u},r),h.length&&this._trigger("remove",{items:h,oldData:c},r)}}function Ry(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.add=="function"&&typeof e.clear=="function"&&typeof e.distinct=="function"&&typeof e.forEach=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof e.map=="function"&&typeof e.max=="function"&&typeof e.min=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.remove=="function"&&typeof e.setOptions=="function"&&typeof e.stream=="function"&&typeof e.update=="function"&&typeof e.updateOnly=="function"}function Fy(t,e){return typeof e=="object"&&e!==null&&t===e.idProp&&typeof e.forEach=="function"&&typeof e.get=="function"&&typeof e.getDataSet=="function"&&typeof e.getIds=="function"&&typeof e.length=="number"&&typeof e.map=="function"&&typeof e.off=="function"&&typeof e.on=="function"&&typeof e.stream=="function"&&Ry(t,e.getDataSet())}var Or={exports:{}},he={},Mr={exports:{}},gi={};function vh(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function Ly(t,e,s){}function Hy(t,e,s){}var Yy=/javascript\s*\:/img;function Wy(t,e){return Yy.test(e)?"":e}gi.whiteList=vh();gi.getDefaultWhiteList=vh;gi.onAttr=Ly;gi.onIgnoreAttr=Hy;gi.safeAttrValue=Wy;var Gy={indexOf:function(t,e){var s,n;if(Array.prototype.indexOf)return t.indexOf(e);for(s=0,n=t.length;s<n;s++)if(t[s]===e)return s;return-1},forEach:function(t,e,s){var n,r;if(Array.prototype.forEach)return t.forEach(e,s);for(n=0,r=t.length;n<r;n++)e.call(s,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},ss=Gy;function Uy(t,e){t=ss.trimRight(t),t[t.length-1]!==";"&&(t+=";");var s=t.length,n=!1,r=0,o=0,a="";function l(){if(!n){var u=ss.trim(t.slice(r,o)),c=u.indexOf(":");if(c!==-1){var f=ss.trim(u.slice(0,c)),p=ss.trim(u.slice(c+1));if(f){var g=e(r,a.length,f,p,u);g&&(a+=g+"; ")}}}r=o+1}for(;o<s;o++){var h=t[o];if(h==="/"&&t[o+1]==="*"){var d=t.indexOf("*/",o+2);if(d===-1)break;o=d+1,r=o+1,n=!1}else h==="("?n=!0:h===")"?n=!1:h===";"?n||l():h===`
`&&l()}return ss.trim(a)}var By=Uy,Qs=gi,zy=By;function ca(t){return t==null}function $y(t){var e={};for(var s in t)e[s]=t[s];return e}function bh(t){t=$y(t||{}),t.whiteList=t.whiteList||Qs.whiteList,t.onAttr=t.onAttr||Qs.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||Qs.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||Qs.safeAttrValue,this.options=t}bh.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,s=e.options,n=s.whiteList,r=s.onAttr,o=s.onIgnoreAttr,a=s.safeAttrValue,l=zy(t,function(h,d,u,c,f){var p=n[u],g=!1;if(p===!0?g=p:typeof p=="function"?g=p(c):p instanceof RegExp&&(g=p.test(c)),g!==!0&&(g=!1),c=a(u,c),!!c){var y={position:d,sourcePosition:h,source:f,isWhite:g};if(g){var v=r(u,c,y);return ca(v)?u+":"+c:v}else{var v=o(u,c,y);if(!ca(v))return v}}});return l};var jy=bh;(function(t,e){var s=gi,n=jy;function r(a,l){var h=new n(l);return h.process(a)}e=t.exports=r,e.FilterCSS=n;for(var o in s)e[o]=s[o];typeof window<"u"&&(window.filterCSS=t.exports)})(Mr,Mr.exports);var Do=Mr.exports,To={indexOf:function(t,e){var s,n;if(Array.prototype.indexOf)return t.indexOf(e);for(s=0,n=t.length;s<n;s++)if(t[s]===e)return s;return-1},forEach:function(t,e,s){var n,r;if(Array.prototype.forEach)return t.forEach(e,s);for(n=0,r=t.length;n<r;n++)e.call(s,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,s=e.exec(t);return s?s.index:-1}},Vy=Do.FilterCSS,Xy=Do.getDefaultWhiteList,Sn=To;function _h(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var wh=new Vy;function qy(t,e,s){}function Zy(t,e,s){}function Ky(t,e,s){}function Qy(t,e,s){}function xh(t){return t.replace(ev,"&lt;").replace(tv,"&gt;")}function Jy(t,e,s,n){if(s=Eh(s),e==="href"||e==="src"){if(s=Sn.trim(s),s==="#")return"#";if(!(s.substr(0,7)==="http://"||s.substr(0,8)==="https://"||s.substr(0,7)==="mailto:"||s.substr(0,4)==="tel:"||s.substr(0,11)==="data:image/"||s.substr(0,6)==="ftp://"||s.substr(0,2)==="./"||s.substr(0,3)==="../"||s[0]==="#"||s[0]==="/"))return""}else if(e==="background"){if(Js.lastIndex=0,Js.test(s))return""}else if(e==="style"){if(fa.lastIndex=0,fa.test(s)||(pa.lastIndex=0,pa.test(s)&&(Js.lastIndex=0,Js.test(s))))return"";n!==!1&&(n=n||wh,s=n.process(s))}return s=Oh(s),s}var ev=/</g,tv=/>/g,iv=/"/g,sv=/&quot;/g,nv=/&#([a-zA-Z0-9]*);?/gim,rv=/&colon;?/gim,ov=/&newline;?/gim,Js=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,fa=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,pa=/u\s*r\s*l\s*\(.*/gi;function Sh(t){return t.replace(iv,"&quot;")}function Dh(t){return t.replace(sv,'"')}function Th(t){return t.replace(nv,function(s,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function Ch(t){return t.replace(rv,":").replace(ov," ")}function kh(t){for(var e="",s=0,n=t.length;s<n;s++)e+=t.charCodeAt(s)<32?" ":t.charAt(s);return Sn.trim(e)}function Eh(t){return t=Dh(t),t=Th(t),t=Ch(t),t=kh(t),t}function Oh(t){return t=Sh(t),t=xh(t),t}function av(){return""}function lv(t,e){typeof e!="function"&&(e=function(){});var s=!Array.isArray(t);function n(a){return s?!0:Sn.indexOf(t,a)!==-1}var r=[],o=!1;return{onIgnoreTag:function(a,l,h){if(n(a))if(h.isClosing){var d="[/removed]",u=h.position+d.length;return r.push([o!==!1?o:h.position,u]),o=!1,d}else return o||(o=h.position),"[removed]";else return e(a,l,h)},remove:function(a){var l="",h=0;return Sn.forEach(r,function(d){l+=a.slice(h,d[0]),h=d[1]}),l+=a.slice(h),l}}}function hv(t){for(var e="",s=0;s<t.length;){var n=t.indexOf("<!--",s);if(n===-1){e+=t.slice(s);break}e+=t.slice(s,n);var r=t.indexOf("-->",n);if(r===-1)break;s=r+3}return e}function dv(t){var e=t.split("");return e=e.filter(function(s){var n=s.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),e.join("")}he.whiteList=_h();he.getDefaultWhiteList=_h;he.onTag=qy;he.onIgnoreTag=Zy;he.onTagAttr=Ky;he.onIgnoreTagAttr=Qy;he.safeAttrValue=Jy;he.escapeHtml=xh;he.escapeQuote=Sh;he.unescapeQuote=Dh;he.escapeHtmlEntities=Th;he.escapeDangerHtml5Entities=Ch;he.clearNonPrintableCharacter=kh;he.friendlyAttrValue=Eh;he.escapeAttrValue=Oh;he.onIgnoreTagStripAll=av;he.StripTagBody=lv;he.stripCommentTag=hv;he.stripBlankChar=dv;he.cssFilter=wh;he.getDefaultCSSWhiteList=Xy;var jn={},Ht=To;function uv(t){var e=Ht.spaceIndex(t),s;return e===-1?s=t.slice(1,-1):s=t.slice(1,e+1),s=Ht.trim(s).toLowerCase(),s.slice(0,1)==="/"&&(s=s.slice(1)),s.slice(-1)==="/"&&(s=s.slice(0,-1)),s}function cv(t){return t.slice(0,2)==="</"}function fv(t,e,s){var n="",r=0,o=!1,a=!1,l=0,h=t.length,d="",u="";e:for(l=0;l<h;l++){var c=t.charAt(l);if(o===!1){if(c==="<"){o=l;continue}}else if(a===!1){if(c==="<"){n+=s(t.slice(r,l)),o=l,r=l;continue}if(c===">"||l===h-1){n+=s(t.slice(r,o)),u=t.slice(o,l+1),d=uv(u),n+=e(o,n.length,d,u,cv(u)),r=l+1,o=!1;continue}if(c==='"'||c==="'")for(var f=1,p=t.charAt(l-f);p.trim()===""||p==="=";){if(p==="="){a=c;continue e}p=t.charAt(l-++f)}}else if(c===a){a=!1;continue}}return r<h&&(n+=s(t.substr(r))),n}var pv=/[^a-zA-Z0-9\\_:.-]/gim;function mv(t,e){var s=0,n=0,r=[],o=!1,a=t.length;function l(f,p){if(f=Ht.trim(f),f=f.replace(pv,"").toLowerCase(),!(f.length<1)){var g=e(f,p||"");g&&r.push(g)}}for(var h=0;h<a;h++){var d=t.charAt(h),u,c;if(o===!1&&d==="="){o=t.slice(s,h),s=h+1,n=t.charAt(s)==='"'||t.charAt(s)==="'"?s:yv(t,h+1);continue}if(o!==!1&&h===n){if(c=t.indexOf(d,h+1),c===-1)break;u=Ht.trim(t.slice(n+1,c)),l(o,u),o=!1,h=c,s=h+1;continue}if(/\s|\n|\t/.test(d))if(t=t.replace(/\s|\n|\t/g," "),o===!1)if(c=gv(t,h),c===-1){u=Ht.trim(t.slice(s,h)),l(u),o=!1,s=h+1;continue}else{h=c-1;continue}else if(c=vv(t,h-1),c===-1){u=Ht.trim(t.slice(s,h)),u=ma(u),l(o,u),o=!1,s=h+1;continue}else continue}return s<t.length&&(o===!1?l(t.slice(s)):l(o,ma(Ht.trim(t.slice(s))))),Ht.trim(r.join(" "))}function gv(t,e){for(;e<t.length;e++){var s=t[e];if(s!==" ")return s==="="?e:-1}}function yv(t,e){for(;e<t.length;e++){var s=t[e];if(s!==" ")return s==="'"||s==='"'?e:-1}}function vv(t,e){for(;e>0;e--){var s=t[e];if(s!==" ")return s==="="?e:-1}}function bv(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function ma(t){return bv(t)?t.substr(1,t.length-2):t}jn.parseTag=fv;jn.parseAttr=mv;var _v=Do.FilterCSS,Je=he,Mh=jn,wv=Mh.parseTag,xv=Mh.parseAttr,hn=To;function en(t){return t==null}function Sv(t){var e=hn.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=hn.trim(t.slice(e+1,-1));var s=t[t.length-1]==="/";return s&&(t=hn.trim(t.slice(0,-1))),{html:t,closing:s}}function Dv(t){var e={};for(var s in t)e[s]=t[s];return e}function Tv(t){var e={};for(var s in t)Array.isArray(t[s])?e[s.toLowerCase()]=t[s].map(function(n){return n.toLowerCase()}):e[s.toLowerCase()]=t[s];return e}function Ph(t){t=Dv(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=Je.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=Tv(t.whiteList||t.allowList):t.whiteList=Je.whiteList,t.onTag=t.onTag||Je.onTag,t.onTagAttr=t.onTagAttr||Je.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||Je.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||Je.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||Je.safeAttrValue,t.escapeHtml=t.escapeHtml||Je.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new _v(t.css))}Ph.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,s=e.options,n=s.whiteList,r=s.onTag,o=s.onIgnoreTag,a=s.onTagAttr,l=s.onIgnoreTagAttr,h=s.safeAttrValue,d=s.escapeHtml,u=e.cssFilter;s.stripBlankChar&&(t=Je.stripBlankChar(t)),s.allowCommentTag||(t=Je.stripCommentTag(t));var c=!1;s.stripIgnoreTagBody&&(c=Je.StripTagBody(s.stripIgnoreTagBody,o),o=c.onIgnoreTag);var f=wv(t,function(p,g,y,v,_){var D={sourcePosition:p,position:g,isClosing:_,isWhite:Object.prototype.hasOwnProperty.call(n,y)},C=r(y,v,D);if(!en(C))return C;if(D.isWhite){if(D.isClosing)return"</"+y+">";var A=Sv(v),M=n[y],E=xv(A.html,function(I,B){var Ce=hn.indexOf(M,I)!==-1,We=a(y,I,B,Ce);return en(We)?Ce?(B=h(y,I,B,u),B?I+'="'+B+'"':I):(We=l(y,I,B,Ce),en(We)?void 0:We):We});return v="<"+y,E&&(v+=" "+E),A.closing&&(v+=" /"),v+=">",v}else return C=o(y,v,D),en(C)?d(v):C},d);return c&&(f=c.remove(f)),f};var Cv=Ph;(function(t,e){var s=he,n=jn,r=Cv;function o(l,h){var d=new r(h);return d.process(l)}e=t.exports=o,e.filterXSS=o,e.FilterXSS=r,function(){for(var l in s)e[l]=s[l];for(var h in n)e[h]=n[h]}(),typeof window<"u"&&(window.filterXSS=t.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=t.exports)})(Or,Or.exports);var kv=Or.exports;const Ev=Lr(kv);var tn=null;function Pr(t,e){var s=e||{preventDefault:!1};if(t.Manager){var n=t,r=function(d,u){var c=Object.create(s);return u&&n.assign(c,u),Pr(new n(d,c),c)};return n.assign(r,n),r.Manager=function(d,u){var c=Object.create(s);return u&&n.assign(c,u),Pr(new n.Manager(d,c),c)},r}var o=Object.create(t),a=t.element;a.hammer||(a.hammer=[]),a.hammer.push(o),t.on("hammer.input",function(d){(s.preventDefault===!0||s.preventDefault===d.pointerType)&&d.preventDefault(),d.isFirst&&(tn=d.target)}),o._handlers={},o.on=function(d,u){return l(d).forEach(function(c){var f=o._handlers[c];f||(o._handlers[c]=f=[],t.on(c,h)),f.push(u)}),o},o.off=function(d,u){return l(d).forEach(function(c){var f=o._handlers[c];f&&(f=u?f.filter(function(p){return p!==u}):[],f.length>0?o._handlers[c]=f:(t.off(c,h),delete o._handlers[c]))}),o},o.emit=function(d,u){tn=u.target,t.emit(d,u)},o.destroy=function(){var d=t.element.hammer,u=d.indexOf(o);u!==-1&&d.splice(u,1),d.length||delete t.element.hammer,o._handlers={},t.destroy()};function l(d){return d.match(/[^ ]+/g)}function h(d){if(d.type!=="hammer.input"){if(d.srcEvent._handled||(d.srcEvent._handled={}),d.srcEvent._handled[d.type])return;d.srcEvent._handled[d.type]=!0}var u=!1;d.stopPropagation=function(){u=!0};var c=d.srcEvent.stopPropagation.bind(d.srcEvent);typeof c=="function"&&(d.srcEvent.stopPropagation=function(){c(),d.stopPropagation()}),d.firstTarget=tn;for(var f=tn;f&&!u;){var p=f.hammer;if(p){for(var g,y=0;y<p.length;y++)if(g=p[y]._handlers[d.type],g)for(var v=0;v<g.length&&!u;v++)g[v](d)}f=f.parentNode}}return o}function Ov(t){var e=t&&t.preventDefault||!1,s=t&&t.container||window,n={},r={keydown:{},keyup:{}},o={},a;for(a=97;a<=122;a++)o[String.fromCharCode(a)]={code:65+(a-97),shift:!1};for(a=65;a<=90;a++)o[String.fromCharCode(a)]={code:a,shift:!0};for(a=0;a<=9;a++)o[""+a]={code:48+a,shift:!1};for(a=1;a<=12;a++)o["F"+a]={code:111+a,shift:!1};for(a=0;a<=9;a++)o["num"+a]={code:96+a,shift:!1};o["num*"]={code:106,shift:!1},o["num+"]={code:107,shift:!1},o["num-"]={code:109,shift:!1},o["num/"]={code:111,shift:!1},o["num."]={code:110,shift:!1},o.left={code:37,shift:!1},o.up={code:38,shift:!1},o.right={code:39,shift:!1},o.down={code:40,shift:!1},o.space={code:32,shift:!1},o.enter={code:13,shift:!1},o.shift={code:16,shift:void 0},o.esc={code:27,shift:!1},o.backspace={code:8,shift:!1},o.tab={code:9,shift:!1},o.ctrl={code:17,shift:!1},o.alt={code:18,shift:!1},o.delete={code:46,shift:!1},o.pageup={code:33,shift:!1},o.pagedown={code:34,shift:!1},o["="]={code:187,shift:!1},o["-"]={code:189,shift:!1},o["]"]={code:221,shift:!1},o["["]={code:219,shift:!1};var l=function(u){d(u,"keydown")},h=function(u){d(u,"keyup")},d=function(u,c){if(r[c][u.keyCode]!==void 0){for(var f=r[c][u.keyCode],p=0;p<f.length;p++)(f[p].shift===void 0||f[p].shift==!0&&u.shiftKey==!0||f[p].shift==!1&&u.shiftKey==!1)&&f[p].fn(u);e==!0&&u.preventDefault()}};return n.bind=function(u,c,f){if(f===void 0&&(f="keydown"),o[u]===void 0)throw new Error("unsupported key: "+u);r[f][o[u].code]===void 0&&(r[f][o[u].code]=[]),r[f][o[u].code].push({fn:c,shift:o[u].shift})},n.bindAll=function(u,c){c===void 0&&(c="keydown");for(var f in o)o.hasOwnProperty(f)&&n.bind(f,u,c)},n.getKey=function(u){for(var c in o)if(o.hasOwnProperty(c)){if(u.shiftKey==!0&&o[c].shift==!0&&u.keyCode==o[c].code)return c;if(u.shiftKey==!1&&o[c].shift==!1&&u.keyCode==o[c].code)return c;if(u.keyCode==o[c].code&&c=="shift")return c}return"unknown key, currently not supported"},n.unbind=function(u,c,f){if(f===void 0&&(f="keydown"),o[u]===void 0)throw new Error("unsupported key: "+u);if(c!==void 0){var p=[],g=r[f][o[u].code];if(g!==void 0)for(var y=0;y<g.length;y++)g[y].fn==c&&g[y].shift==o[u].shift||p.push(r[f][o[u].code][y]);r[f][o[u].code]=p}else r[f][o[u].code]=[]},n.reset=function(){r={keydown:{},keyup:{}}},n.destroy=function(){r={keydown:{},keyup:{}},s.removeEventListener("keydown",l,!0),s.removeEventListener("keyup",h,!0)},s.addEventListener("keydown",l,!0),s.addEventListener("keyup",h,!0),n}/**
 * vis-timeline and vis-graph2d
 * https://visjs.github.io/vis-timeline/
 *
 * Create a fully customizable, interactive timeline with items and ranges.
 *
 * @version 7.7.2
 * @date    2023-03-22T11:14:31.874Z
 *
 * @copyright (c) 2011-2017 Almende B.V, http://almende.com
 * @copyright (c) 2017-2019 visjs contributors, https://github.com/visjs
 *
 * @license
 * vis.js is dual licensed under both
 *
 *   1. The Apache 2.0 License
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *   and
 *
 *   2. The MIT License
 *      http://opensource.org/licenses/MIT
 *
 * vis.js may be distributed under either license.
 */var Ae=typeof window<"u"&&window.moment||x;function Pt(t){if(!t)return!1;let e=t.idProp??t._idProp;return e?Fy(e,t):!1}const sr=/^\/?Date\((-?\d+)/i,Mv=/^\d+$/;function Co(t,e){let s;if(t!==void 0){if(t===null)return null;if(!e)return t;if(typeof e!="string"&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return!!t;case"number":case"Number":return Le(t)&&!isNaN(Date.parse(t))?x(t).valueOf():Number(t.valueOf());case"string":case"String":return String(t);case"Date":try{return Co(t,"Moment").toDate()}catch(n){throw n instanceof TypeError?new TypeError("Cannot convert object of type "+rs(t)+" to type "+e):n}case"Moment":if(cs(t))return x(t);if(t instanceof Date)return x(t.valueOf());if(x.isMoment(t))return x(t);if(Le(t))return s=sr.exec(t),s?x(Number(s[1])):(s=Mv.exec(t),x(s?Number(t):t));throw new TypeError("Cannot convert object of type "+rs(t)+" to type "+e);case"ISODate":if(cs(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(x.isMoment(t))return t.toDate().toISOString();if(Le(t))return s=sr.exec(t),s?new Date(Number(s[1])).toISOString():x(t).format();throw new Error("Cannot convert object of type "+rs(t)+" to type ISODate");case"ASPDate":if(cs(t))return"/Date("+t+")/";if(t instanceof Date||x.isMoment(t))return"/Date("+t.valueOf()+")/";if(Le(t)){s=sr.exec(t);let n;return s?n=new Date(Number(s[1])).valueOf():n=new Date(t).valueOf(),"/Date("+n+")/"}else throw new Error("Cannot convert object of type "+rs(t)+" to type ASPDate");default:throw new Error(`Unknown type ${e}`)}}}function Gi(t,e={start:"Date",end:"Date"}){const s=t._idProp,n=new Wi({fieldId:s}),r=Py(t).map(o=>Object.keys(o).reduce((a,l)=>(a[l]=Co(o[l],e[l]),a),{})).to(n);return r.all().start(),{add:(...o)=>t.getDataSet().add(...o),remove:(...o)=>t.getDataSet().remove(...o),update:(...o)=>t.getDataSet().update(...o),updateOnly:(...o)=>t.getDataSet().updateOnly(...o),clear:(...o)=>t.getDataSet().clear(...o),forEach:n.forEach.bind(n),get:n.get.bind(n),getIds:n.getIds.bind(n),off:n.off.bind(n),on:n.on.bind(n),get length(){return n.length},idProp:s,type:e,rawDS:t,coercedDS:n,dispose:()=>r.stop()}}const Nh=t=>{const e=new Ev.FilterXSS(t);return s=>e.process(s)},Pv=t=>t;let Nr=Nh();const Nv=t=>{t&&(t.disabled===!0?(Nr=Pv,console.warn("You disabled XSS protection for vis-Timeline. I sure hope you know what you're doing!")):t.filterOptions&&(Nr=Nh(t.filterOptions)))},m={...Cy,convert:Co,setupXSSProtection:Nv};Object.defineProperty(m,"xss",{get:function(){return Nr}});class $t{constructor(e,s){this.options=null,this.props=null}setOptions(e){e&&m.extend(this.options,e)}redraw(){return!1}destroy(){}_isResized(){const e=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,e}}function ko(t,e,s){if(s&&!Array.isArray(s))return ko(t,e,[s]);if(e.hiddenDates=[],s&&Array.isArray(s)==!0){for(let n=0;n<s.length;n++)if(s[n].repeat===void 0){const r={};r.start=t(s[n].start).toDate().valueOf(),r.end=t(s[n].end).toDate().valueOf(),e.hiddenDates.push(r)}e.hiddenDates.sort((n,r)=>n.start-r.start)}}function Dn(t,e,s){if(s&&!Array.isArray(s))return Dn(t,e,[s]);if(s&&e.domProps.centerContainer.width!==void 0){ko(t,e,s);const n=t(e.range.start),r=t(e.range.end),a=(e.range.end-e.range.start)/e.domProps.centerContainer.width;for(let c=0;c<s.length;c++)if(s[c].repeat!==void 0){const f=t(s[c].start);let p=t(s[c].end);if(f._d=="Invalid Date")throw new Error(`Supplied start date is not valid: ${s[c].start}`);if(p._d=="Invalid Date")throw new Error(`Supplied end date is not valid: ${s[c].end}`);if(p-f>=4*a){let y=0;const v=r.clone();switch(s[c].repeat){case"daily":f.day()!=p.day()&&(y=1),f.dayOfYear(n.dayOfYear()),f.year(n.year()),f.subtract(7,"days"),p.dayOfYear(n.dayOfYear()),p.year(n.year()),p.subtract(7-y,"days"),v.add(1,"weeks");break;case"weekly":{const _=p.diff(f,"days"),D=f.day();f.date(n.date()),f.month(n.month()),f.year(n.year()),p=f.clone(),f.day(D),p.day(D),p.add(_,"days"),f.subtract(1,"weeks"),p.subtract(1,"weeks"),v.add(1,"weeks");break}case"monthly":f.month()!=p.month()&&(y=1),f.month(n.month()),f.year(n.year()),f.subtract(1,"months"),p.month(n.month()),p.year(n.year()),p.subtract(1,"months"),p.add(y,"months"),v.add(1,"months");break;case"yearly":f.year()!=p.year()&&(y=1),f.year(n.year()),f.subtract(1,"years"),p.year(n.year()),p.subtract(1,"years"),p.add(y,"years"),v.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",s[c].repeat);return}for(;f<v;)switch(e.hiddenDates.push({start:f.valueOf(),end:p.valueOf()}),s[c].repeat){case"daily":f.add(1,"days"),p.add(1,"days");break;case"weekly":f.add(1,"weeks"),p.add(1,"weeks");break;case"monthly":f.add(1,"months"),p.add(1,"months");break;case"yearly":f.add(1,"y"),p.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",s[c].repeat);return}e.hiddenDates.push({start:f.valueOf(),end:p.valueOf()})}}Av(e);const l=Cn(e.range.start,e.hiddenDates),h=Cn(e.range.end,e.hiddenDates);let d=e.range.start,u=e.range.end;l.hidden==!0&&(d=e.range.startToFront==!0?l.startDate-1:l.endDate+1),h.hidden==!0&&(u=e.range.endToFront==!0?h.startDate-1:h.endDate+1),(l.hidden==!0||h.hidden==!0)&&e.range._applyRange(d,u)}}function Av(t){const e=t.hiddenDates,s=[];for(var n=0;n<e.length;n++)for(let r=0;r<e.length;r++)n!=r&&e[r].remove!=!0&&e[n].remove!=!0&&(e[r].start>=e[n].start&&e[r].end<=e[n].end?e[r].remove=!0:e[r].start>=e[n].start&&e[r].start<=e[n].end?(e[n].end=e[r].end,e[r].remove=!0):e[r].end>=e[n].start&&e[r].end<=e[n].end&&(e[n].start=e[r].start,e[r].remove=!0));for(n=0;n<e.length;n++)e[n].remove!==!0&&s.push(e[n]);t.hiddenDates=s,t.hiddenDates.sort((r,o)=>r.start-o.start)}function Iv(t,e,s){let n=!1;const r=e.current.valueOf();for(let a=0;a<e.hiddenDates.length;a++){const l=e.hiddenDates[a].start;var o=e.hiddenDates[a].end;if(r>=l&&r<o){n=!0;break}}if(n==!0&&r<e._end.valueOf()&&r!=s){const a=t(s),l=t(o);a.year()!=l.year()?e.switchedYear=!0:a.month()!=l.month()?e.switchedMonth=!0:a.dayOfYear()!=l.dayOfYear()&&(e.switchedDay=!0),e.current=l}}function ga(t,e,s){let n;if(t.body.hiddenDates.length==0)return n=t.range.conversion(s),(e.valueOf()-n.offset)*n.scale;{const r=Cn(e,t.body.hiddenDates);r.hidden==!0&&(e=r.startDate);const o=ps(t.body.hiddenDates,t.range.start,t.range.end);if(e<t.range.start){n=t.range.conversion(s,o);const a=Rv(t.body.hiddenDates,e,n.offset);return e=t.options.moment(e).toDate().valueOf(),e=e+a,-(n.offset-e.valueOf())*n.scale}else if(e>t.range.end){const a={start:t.range.start,end:e};return e=va(t.options.moment,t.body.hiddenDates,a,e),n=t.range.conversion(s,o),(e.valueOf()-n.offset)*n.scale}else return e=va(t.options.moment,t.body.hiddenDates,t.range,e),n=t.range.conversion(s,o),(e.valueOf()-n.offset)*n.scale}}function ya(t,e,s){if(t.body.hiddenDates.length==0){const n=t.range.conversion(s);return new Date(e/n.scale+n.offset)}else{const n=ps(t.body.hiddenDates,t.range.start,t.range.end),o=(t.range.end-t.range.start-n)*e/s,a=Fv(t.body.hiddenDates,t.range,o);return new Date(a+o+t.range.start)}}function ps(t,e,s){let n=0;for(let r=0;r<t.length;r++){const o=t[r].start,a=t[r].end;o>=e&&a<s&&(n+=a-o)}return n}function Rv(t,e,s){let n=0;for(let r=0;r<t.length;r++){const o=t[r].start,a=t[r].end;o>=e&&a<=s&&(n+=a-o)}return n}function va(t,e,s,n){return n=t(n).toDate().valueOf(),n-=Tn(t,e,s,n),n}function Tn(t,e,s,n){let r=0;n=t(n).toDate().valueOf();for(let o=0;o<e.length;o++){const a=e[o].start,l=e[o].end;a>=s.start&&l<s.end&&n>=l&&(r+=l-a)}return r}function Fv(t,e,s){let n=0,r=0,o=e.start;for(let a=0;a<t.length;a++){const l=t[a].start,h=t[a].end;if(l>=e.start&&h<e.end){if(r+=l-o,o=h,r>=s)break;n+=h-l}}return n}function Kt(t,e,s,n){const r=Cn(e,t);return r.hidden==!0?s<0?n==!0?r.startDate-(r.endDate-e)-1:r.startDate-1:n==!0?r.endDate+(e-r.startDate)+1:r.endDate+1:e}function Cn(t,e){for(let r=0;r<e.length;r++){var s=e[r].start,n=e[r].end;if(t>=s&&t<n)return{hidden:!0,startDate:s,endDate:n}}return{hidden:!1,startDate:s,endDate:n}}class Vn extends $t{constructor(e,s){super();const n=Ae().hours(0).minutes(0).seconds(0).milliseconds(0),r=n.clone().add(-3,"days").valueOf(),o=n.clone().add(3,"days").valueOf();this.millisecondsPerPixelCache=void 0,s===void 0?(this.start=r,this.end=o):(this.start=s.start||r,this.end=s.end||o),this.rolling=!1,this.body=e,this.deltaDifference=0,this.scaleOffset=0,this.startToFront=!1,this.endToFront=!0,this.defaultOptions={rtl:!1,start:null,end:null,moment:Ae,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:1e3*60*60*24*365*1e4,rollingMode:{follow:!1,offset:.5}},this.options=m.extend({},this.defaultOptions),this.props={touch:{}},this.animationTimer=null,this.body.emitter.on("panstart",this._onDragStart.bind(this)),this.body.emitter.on("panmove",this._onDrag.bind(this)),this.body.emitter.on("panend",this._onDragEnd.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.body.dom.rollingModeBtn.addEventListener("click",this.startRolling.bind(this)),this.setOptions(s)}setOptions(e){if(e){const s=["animation","direction","min","max","zoomMin","zoomMax","moveable","zoomable","moment","activate","hiddenDates","zoomKey","zoomFriction","rtl","showCurrentTime","rollingMode","horizontalScroll"];m.selectiveExtend(s,this.options,e),e.rollingMode&&e.rollingMode.follow&&this.startRolling(),("start"in e||"end"in e)&&this.setRange(e.start,e.end)}}startRolling(){const e=this;function s(){e.stopRolling(),e.rolling=!0;let n=e.end-e.start;const r=m.convert(new Date,"Date").valueOf(),o=e.options.rollingMode&&e.options.rollingMode.offset||.5,a=r-n*o,l=r+n*(1-o),h={animation:!1};e.setRange(a,l,h),n=1/e.conversion(e.body.domProps.center.width).scale/10,n<30&&(n=30),n>1e3&&(n=1e3),e.body.dom.rollingModeBtn.style.visibility="hidden",e.currentTimeTimer=setTimeout(s,n)}s()}stopRolling(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}setRange(e,s,n,r,o){n||(n={}),n.byUser!==!0&&(n.byUser=!1);const a=this,l=e!=null?m.convert(e,"Date").valueOf():null,h=s!=null?m.convert(s,"Date").valueOf():null;if(this._cancelAnimation(),this.millisecondsPerPixelCache=void 0,n.animation){const u=this.start,c=this.end,f=typeof n.animation=="object"&&"duration"in n.animation?n.animation.duration:500,p=typeof n.animation=="object"&&"easingFunction"in n.animation?n.animation.easingFunction:"easeInOutQuad",g=m.easingFunctions[p];if(!g)throw new Error(`Unknown easing function ${JSON.stringify(p)}. Choose from: ${Object.keys(m.easingFunctions).join(", ")}`);const y=Date.now();let v=!1;const _=()=>{if(!a.props.touch.dragging){const C=Date.now()-y,A=g(C/f),M=C>f,E=M||l===null?l:u+(l-u)*A,I=M||h===null?h:c+(h-c)*A;d=a._applyRange(E,I),Dn(a.options.moment,a.body,a.options.hiddenDates),v=v||d;const B={start:new Date(a.start),end:new Date(a.end),byUser:n.byUser,event:n.event};if(o&&o(A,d,M),d&&a.body.emitter.emit("rangechange",B),M){if(v&&(a.body.emitter.emit("rangechanged",B),r))return r()}else a.animationTimer=setTimeout(_,20)}};return _()}else{var d=this._applyRange(l,h);if(Dn(this.options.moment,this.body,this.options.hiddenDates),d){const u={start:new Date(this.start),end:new Date(this.end),byUser:n.byUser,event:n.event};if(this.body.emitter.emit("rangechange",u),clearTimeout(a.timeoutID),a.timeoutID=setTimeout(()=>{a.body.emitter.emit("rangechanged",u)},200),r)return r()}}}getMillisecondsPerPixel(){return this.millisecondsPerPixelCache===void 0&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth),this.millisecondsPerPixelCache}_cancelAnimation(){this.animationTimer&&(clearTimeout(this.animationTimer),this.animationTimer=null)}_applyRange(e,s){let n=e!=null?m.convert(e,"Date").valueOf():this.start,r=s!=null?m.convert(s,"Date").valueOf():this.end;const o=this.options.max!=null?m.convert(this.options.max,"Date").valueOf():null,a=this.options.min!=null?m.convert(this.options.min,"Date").valueOf():null;let l;if(isNaN(n)||n===null)throw new Error(`Invalid start "${e}"`);if(isNaN(r)||r===null)throw new Error(`Invalid end "${s}"`);if(r<n&&(r=n),a!==null&&n<a&&(l=a-n,n+=l,r+=l,o!=null&&r>o&&(r=o)),o!==null&&r>o&&(l=r-o,n-=l,r-=l,a!=null&&n<a&&(n=a)),this.options.zoomMin!==null){let d=parseFloat(this.options.zoomMin);d<0&&(d=0),r-n<d&&(this.end-this.start===d&&n>=this.start-.5&&r<=this.end?(n=this.start,r=this.end):(l=d-(r-n),n-=l/2,r+=l/2))}if(this.options.zoomMax!==null){let d=parseFloat(this.options.zoomMax);d<0&&(d=0),r-n>d&&(this.end-this.start===d&&n<this.start&&r>this.end?(n=this.start,r=this.end):(l=r-n-d,n+=l/2,r-=l/2))}const h=this.start!=n||this.end!=r;return!(n>=this.start&&n<=this.end||r>=this.start&&r<=this.end)&&!(this.start>=n&&this.start<=r||this.end>=n&&this.end<=r)&&this.body.emitter.emit("checkRangedItems"),this.start=n,this.end=r,h}getRange(){return{start:this.start,end:this.end}}conversion(e,s){return Vn.conversion(this.start,this.end,e,s)}static conversion(e,s,n,r){return r===void 0&&(r=0),n!=0&&s-e!=0?{offset:e,scale:n/(s-e-r)}:{offset:0,scale:1}}_onDragStart(e){this.deltaDifference=0,this.previousDelta=0,this.options.moveable&&this._isInsideRange(e)&&this.props.touch.allowDragging&&(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}_onDrag(e){if(!e||!this.props.touch.dragging||!this.options.moveable||!this.props.touch.allowDragging)return;const s=this.options.direction;ba(s);let n=s=="horizontal"?e.deltaX:e.deltaY;n-=this.deltaDifference;let r=this.props.touch.end-this.props.touch.start;const o=ps(this.body.hiddenDates,this.start,this.end);r-=o;const a=s=="horizontal"?this.body.domProps.center.width:this.body.domProps.center.height;let l;this.options.rtl?l=n/a*r:l=-n/a*r;const h=this.props.touch.start+l,d=this.props.touch.end+l,u=Kt(this.body.hiddenDates,h,this.previousDelta-n,!0),c=Kt(this.body.hiddenDates,d,this.previousDelta-n,!0);if(u!=h||c!=d){this.deltaDifference+=n,this.props.touch.start=u,this.props.touch.end=c,this._onDrag(e);return}this.previousDelta=n,this._applyRange(h,d);const f=new Date(this.start),p=new Date(this.end);this.body.emitter.emit("rangechange",{start:f,end:p,byUser:!0,event:e}),this.body.emitter.emit("panmove")}_onDragEnd(e){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:e}))}_onMouseWheel(e){let s=0;if(e.wheelDelta?s=e.wheelDelta/120:e.detail?s=-e.detail/3:e.deltaY&&(s=-e.deltaY/3),!(this.options.zoomKey&&!e[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(e)&&s){const n=this.options.zoomFriction||5;let r;s<0?r=1-s/n:r=1/(1+s/n);let o;if(this.rolling){const a=this.options.rollingMode&&this.options.rollingMode.offset||.5;o=this.start+(this.end-this.start)*a}else{const a=this.getPointer({x:e.clientX,y:e.clientY},this.body.dom.center);o=this._pointerToDate(a)}this.zoom(r,o,s,e),e.preventDefault()}}_onTouch(e){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null,this.props.touch.centerDate=null,this.scaleOffset=0,this.deltaDifference=0,m.preventDefault(e)}_onPinch(e){if(!(this.options.zoomable&&this.options.moveable))return;m.preventDefault(e),this.props.touch.allowDragging=!1,this.props.touch.center||(this.props.touch.center=this.getPointer(e.center,this.body.dom.center),this.props.touch.centerDate=this._pointerToDate(this.props.touch.center)),this.stopRolling();const s=1/(e.scale+this.scaleOffset),n=this.props.touch.centerDate,r=ps(this.body.hiddenDates,this.start,this.end),o=Tn(this.options.moment,this.body.hiddenDates,this,n),a=r-o;let l=n-o+(this.props.touch.start-(n-o))*s,h=n+a+(this.props.touch.end-(n+a))*s;this.startToFront=1-s<=0,this.endToFront=s-1<=0;const d=Kt(this.body.hiddenDates,l,1-s,!0),u=Kt(this.body.hiddenDates,h,s-1,!0);(d!=l||u!=h)&&(this.props.touch.start=d,this.props.touch.end=u,this.scaleOffset=1-e.scale,l=d,h=u);const c={animation:!1,byUser:!0,event:e};this.setRange(l,h,c),this.startToFront=!1,this.endToFront=!0}_isInsideRange(e){const s=e.center?e.center.x:e.clientX,n=this.body.dom.centerContainer.getBoundingClientRect(),r=this.options.rtl?s-n.left:n.right-s,o=this.body.util.toTime(r);return o>=this.start&&o<=this.end}_pointerToDate(e){let s;const n=this.options.direction;if(ba(n),n=="horizontal")return this.body.util.toTime(e.x).valueOf();{const r=this.body.domProps.center.height;return s=this.conversion(r),e.y/s.scale+s.offset}}getPointer(e,s){const n=s.getBoundingClientRect();return this.options.rtl?{x:n.right-e.x,y:e.y-n.top}:{x:e.x-n.left,y:e.y-n.top}}zoom(e,s,n,r){s==null&&(s=(this.start+this.end)/2);const o=ps(this.body.hiddenDates,this.start,this.end),a=Tn(this.options.moment,this.body.hiddenDates,this,s),l=o-a;let h=s-a+(this.start-(s-a))*e,d=s+l+(this.end-(s+l))*e;this.startToFront=!(n>0),this.endToFront=!(-n>0);const u=Kt(this.body.hiddenDates,h,n,!0),c=Kt(this.body.hiddenDates,d,-n,!0);(u!=h||c!=d)&&(h=u,d=c);const f={animation:!1,byUser:!0,event:r};this.setRange(h,d,f),this.startToFront=!1,this.endToFront=!0}move(e){const s=this.end-this.start,n=this.start+s*e,r=this.end+s*e;this.start=n,this.end=r}moveTo(e){const n=(this.start+this.end)/2-e,r=this.start-n,o=this.end-n,a={animation:!1,byUser:!0,event:null};this.setRange(r,o,a)}}function ba(t){if(t!="horizontal"&&t!="vertical")throw new TypeError(`Unknown direction "${t}". Choose "horizontal" or "vertical".`)}function Lv(){const t=()=>{};return{on:t,off:t,destroy:t,emit:t,get(e){return{set:t}}}}let Ar;if(typeof window<"u"){const t=window.Hammer||lh;Ar=Pr(t,{preventDefault:"mouse"})}else Ar=()=>Lv();var ke=Ar;function Ah(t,e){e.inputHandler=function(s){s.isFirst&&e(s)},t.on("hammer.input",e.inputHandler)}function Hv(t,e){return e.inputHandler=function(s){s.isFinal&&e(s)},t.on("hammer.input",e.inputHandler)}function Yv(t){const e="pan-y";return t.getTouchAction=function(){return[e]},t}class ui{constructor(e,s,n,r,o){this.moment=o&&o.moment||Ae,this.options=o||{},this.current=this.moment(),this._start=this.moment(),this._end=this.moment(),this.autoScale=!0,this.scale="day",this.step=1,this.setRange(e,s,n),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Array.isArray(r)?this.hiddenDates=r:r!=null?this.hiddenDates=[r]:this.hiddenDates=[],this.format=ui.FORMAT}setMoment(e){this.moment=e,this.current=this.moment(this.current.valueOf()),this._start=this.moment(this._start.valueOf()),this._end=this.moment(this._end.valueOf())}setFormat(e){const s=m.deepExtend({},ui.FORMAT);this.format=m.deepExtend(s,e)}setRange(e,s,n){if(!(e instanceof Date)||!(s instanceof Date))throw"No legal start or end date in method setRange";this._start=e!=null?this.moment(e.valueOf()):Date.now(),this._end=s!=null?this.moment(s.valueOf()):Date.now(),this.autoScale&&this.setMinimumStep(n)}start(){this.current=this._start.clone(),this.roundToMinor()}roundToMinor(){switch(this.scale=="week"&&this.current.weekday(0),this.scale){case"year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case"month":this.current.date(1);case"week":case"day":case"weekday":this.current.hours(0);case"hour":this.current.minutes(0);case"minute":this.current.seconds(0);case"second":this.current.milliseconds(0)}if(this.step!=1){let e=this.current.clone();switch(this.scale){case"millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case"second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case"minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case"hour":this.current.subtract(this.current.hours()%this.step,"hours");break;case"weekday":case"day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case"week":this.current.subtract(this.current.week()%this.step,"week");break;case"month":this.current.subtract(this.current.month()%this.step,"month");break;case"year":this.current.subtract(this.current.year()%this.step,"year");break}e.isSame(this.current)||(this.current=this.moment(Kt(this.hiddenDates,this.current.valueOf(),-1,!0)))}}hasNext(){return this.current.valueOf()<=this._end.valueOf()}next(){const e=this.current.valueOf();switch(this.scale){case"millisecond":this.current.add(this.step,"millisecond");break;case"second":this.current.add(this.step,"second");break;case"minute":this.current.add(this.step,"minute");break;case"hour":this.current.add(this.step,"hour"),this.current.month()<6?this.current.subtract(this.current.hours()%this.step,"hour"):this.current.hours()%this.step!==0&&this.current.add(this.step-this.current.hours()%this.step,"hour");break;case"weekday":case"day":this.current.add(this.step,"day");break;case"week":if(this.current.weekday()!==0)this.current.weekday(0),this.current.add(this.step,"week");else if(this.options.showMajorLabels===!1)this.current.add(this.step,"week");else{const s=this.current.clone();s.add(1,"week"),s.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case"month":this.current.add(this.step,"month");break;case"year":this.current.add(this.step,"year");break}if(this.step!=1)switch(this.scale){case"millisecond":this.current.milliseconds()>0&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case"second":this.current.seconds()>0&&this.current.seconds()<this.step&&this.current.seconds(0);break;case"minute":this.current.minutes()>0&&this.current.minutes()<this.step&&this.current.minutes(0);break;case"hour":this.current.hours()>0&&this.current.hours()<this.step&&this.current.hours(0);break;case"weekday":case"day":this.current.date()<this.step+1&&this.current.date(1);break;case"week":this.current.week()<this.step&&this.current.week(1);break;case"month":this.current.month()<this.step&&this.current.month(0);break}this.current.valueOf()==e&&(this.current=this._end.clone()),this.switchedDay=!1,this.switchedMonth=!1,this.switchedYear=!1,Iv(this.moment,this,e)}getCurrent(){return this.current.clone()}setScale(e){e&&typeof e.scale=="string"&&(this.scale=e.scale,this.step=e.step>0?e.step:1,this.autoScale=!1)}setAutoScale(e){this.autoScale=e}setMinimumStep(e){if(e==null)return;const s=1e3*60*60*24*30*12,n=1e3*60*60*24*30,r=1e3*60*60*24,o=1e3*60*60,a=1e3*60,l=1e3,h=1;s*1e3>e&&(this.scale="year",this.step=1e3),s*500>e&&(this.scale="year",this.step=500),s*100>e&&(this.scale="year",this.step=100),s*50>e&&(this.scale="year",this.step=50),s*10>e&&(this.scale="year",this.step=10),s*5>e&&(this.scale="year",this.step=5),s>e&&(this.scale="year",this.step=1),n*3>e&&(this.scale="month",this.step=3),n>e&&(this.scale="month",this.step=1),r*7>e&&this.options.showWeekScale&&(this.scale="week",this.step=1),r*2>e&&(this.scale="day",this.step=2),r>e&&(this.scale="day",this.step=1),r/2>e&&(this.scale="weekday",this.step=1),o*4>e&&(this.scale="hour",this.step=4),o>e&&(this.scale="hour",this.step=1),a*15>e&&(this.scale="minute",this.step=15),a*10>e&&(this.scale="minute",this.step=10),a*5>e&&(this.scale="minute",this.step=5),a>e&&(this.scale="minute",this.step=1),l*15>e&&(this.scale="second",this.step=15),l*10>e&&(this.scale="second",this.step=10),l*5>e&&(this.scale="second",this.step=5),l>e&&(this.scale="second",this.step=1),h*200>e&&(this.scale="millisecond",this.step=200),h*100>e&&(this.scale="millisecond",this.step=100),h*50>e&&(this.scale="millisecond",this.step=50),h*10>e&&(this.scale="millisecond",this.step=10),h*5>e&&(this.scale="millisecond",this.step=5),h>e&&(this.scale="millisecond",this.step=1)}static snap(e,s,n){const r=Ae(e);if(s=="year"){const o=r.year()+Math.round(r.month()/12);r.year(Math.round(o/n)*n),r.month(0),r.date(0),r.hours(0),r.minutes(0),r.seconds(0),r.milliseconds(0)}else if(s=="month")r.date()>15?(r.date(1),r.add(1,"month")):r.date(1),r.hours(0),r.minutes(0),r.seconds(0),r.milliseconds(0);else if(s=="week")r.weekday()>2?(r.weekday(0),r.add(1,"week")):r.weekday(0),r.hours(0),r.minutes(0),r.seconds(0),r.milliseconds(0);else if(s=="day"){switch(n){case 5:case 2:r.hours(Math.round(r.hours()/24)*24);break;default:r.hours(Math.round(r.hours()/12)*12);break}r.minutes(0),r.seconds(0),r.milliseconds(0)}else if(s=="weekday"){switch(n){case 5:case 2:r.hours(Math.round(r.hours()/12)*12);break;default:r.hours(Math.round(r.hours()/6)*6);break}r.minutes(0),r.seconds(0),r.milliseconds(0)}else if(s=="hour"){switch(n){case 4:r.minutes(Math.round(r.minutes()/60)*60);break;default:r.minutes(Math.round(r.minutes()/30)*30);break}r.seconds(0),r.milliseconds(0)}else if(s=="minute"){switch(n){case 15:case 10:r.minutes(Math.round(r.minutes()/5)*5),r.seconds(0);break;case 5:r.seconds(Math.round(r.seconds()/60)*60);break;default:r.seconds(Math.round(r.seconds()/30)*30);break}r.milliseconds(0)}else if(s=="second")switch(n){case 15:case 10:r.seconds(Math.round(r.seconds()/5)*5),r.milliseconds(0);break;case 5:r.milliseconds(Math.round(r.milliseconds()/1e3)*1e3);break;default:r.milliseconds(Math.round(r.milliseconds()/500)*500);break}else if(s=="millisecond"){const o=n>5?n/2:1;r.milliseconds(Math.round(r.milliseconds()/o)*o)}return r}isMajor(){if(this.switchedYear==!0)switch(this.scale){case"year":case"month":case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedMonth==!0)switch(this.scale){case"week":case"weekday":case"day":case"hour":case"minute":case"second":case"millisecond":return!0;default:return!1}else if(this.switchedDay==!0)switch(this.scale){case"millisecond":case"second":case"minute":case"hour":return!0;default:return!1}const e=this.moment(this.current);switch(this.scale){case"millisecond":return e.milliseconds()==0;case"second":return e.seconds()==0;case"minute":return e.hours()==0&&e.minutes()==0;case"hour":return e.hours()==0;case"weekday":case"day":return this.options.showWeekScale?e.isoWeekday()==1:e.date()==1;case"week":return e.date()==1;case"month":return e.month()==0;case"year":return!1;default:return!1}}getLabelMinor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.minorLabels=="function")return this.format.minorLabels(e,this.scale,this.step);const s=this.format.minorLabels[this.scale];switch(this.scale){case"week":if(e.date()===1&&e.weekday()!==0)return"";default:return s&&s.length>0?this.moment(e).format(s):""}}getLabelMajor(e){if(e==null&&(e=this.current),e instanceof Date&&(e=this.moment(e)),typeof this.format.majorLabels=="function")return this.format.majorLabels(e,this.scale,this.step);const s=this.format.majorLabels[this.scale];return s&&s.length>0?this.moment(e).format(s):""}getClassName(){const e=this.moment,s=this.moment(this.current),n=s.locale?s.locale("en"):s.lang("en"),r=this.step,o=[];function a(c){return c/r%2==0?" vis-even":" vis-odd"}function l(c){return c.isSame(Date.now(),"day")?" vis-today":c.isSame(e().add(1,"day"),"day")?" vis-tomorrow":c.isSame(e().add(-1,"day"),"day")?" vis-yesterday":""}function h(c){return c.isSame(Date.now(),"week")?" vis-current-week":""}function d(c){return c.isSame(Date.now(),"month")?" vis-current-month":""}function u(c){return c.isSame(Date.now(),"year")?" vis-current-year":""}switch(this.scale){case"millisecond":o.push(l(n)),o.push(a(n.milliseconds()));break;case"second":o.push(l(n)),o.push(a(n.seconds()));break;case"minute":o.push(l(n)),o.push(a(n.minutes()));break;case"hour":o.push(`vis-h${n.hours()}${this.step==4?"-h"+(n.hours()+4):""}`),o.push(l(n)),o.push(a(n.hours()));break;case"weekday":o.push(`vis-${n.format("dddd").toLowerCase()}`),o.push(l(n)),o.push(h(n)),o.push(a(n.date()));break;case"day":o.push(`vis-day${n.date()}`),o.push(`vis-${n.format("MMMM").toLowerCase()}`),o.push(l(n)),o.push(d(n)),o.push(this.step<=2?l(n):""),o.push(this.step<=2?`vis-${n.format("dddd").toLowerCase()}`:""),o.push(a(n.date()-1));break;case"week":o.push(`vis-week${n.format("w")}`),o.push(h(n)),o.push(a(n.week()));break;case"month":o.push(`vis-${n.format("MMMM").toLowerCase()}`),o.push(d(n)),o.push(a(n.month()));break;case"year":o.push(`vis-year${n.year()}`),o.push(u(n)),o.push(a(n.year()));break}return o.filter(String).join(" ")}}ui.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};class kn extends $t{constructor(e,s){super(),this.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:m.extend({},ui.FORMAT),moment:Ae,timeAxis:null},this.options=m.extend({},this.defaultOptions),this.body=e,this._create(),this.setOptions(s)}setOptions(e){e&&(m.selectiveExtend(["showMinorLabels","showMajorLabels","showWeekScale","maxMinorChars","hiddenDates","timeAxis","moment","rtl"],this.options,e),m.selectiveDeepExtend(["format"],this.options,e),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.axis=e.orientation:typeof e.orientation=="object"&&"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis)),"locale"in e&&(typeof Ae.locale=="function"?Ae.locale(e.locale):Ae.lang(e.locale)))}_create(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="vis-time-axis vis-foreground",this.dom.background.className="vis-time-axis vis-background"}destroy(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null}redraw(){const e=this.props,s=this.dom.foreground,n=this.dom.background,r=this.options.orientation.axis=="top"?this.body.dom.top:this.body.dom.bottom,o=s.parentNode!==r;this._calculateCharSize();const a=this.options.showMinorLabels&&this.options.orientation.axis!=="none",l=this.options.showMajorLabels&&this.options.orientation.axis!=="none";e.minorLabelHeight=a?e.minorCharHeight:0,e.majorLabelHeight=l?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=s.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-(this.options.orientation.axis=="top"?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;const h=s.nextSibling,d=n.nextSibling;return s.parentNode&&s.parentNode.removeChild(s),n.parentNode&&n.parentNode.removeChild(n),s.style.height=`${this.props.height}px`,this._repaintLabels(),h?r.insertBefore(s,h):r.appendChild(s),d?this.body.dom.backgroundVertical.insertBefore(n,d):this.body.dom.backgroundVertical.appendChild(n),this._isResized()||o}_repaintLabels(){const e=this.options.orientation.axis,s=m.convert(this.body.range.start,"Number"),n=m.convert(this.body.range.end,"Number"),r=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();let o=r-Tn(this.options.moment,this.body.hiddenDates,this.body.range,r);o-=this.body.util.toTime(0).valueOf();const a=new ui(new Date(s),new Date(n),o,this.body.hiddenDates,this.options);a.setMoment(this.options.moment),this.options.format&&a.setFormat(this.options.format),this.options.timeAxis&&a.setScale(this.options.timeAxis),this.step=a;const l=this.dom;l.redundant.lines=l.lines,l.redundant.majorTexts=l.majorTexts,l.redundant.minorTexts=l.minorTexts,l.lines=[],l.majorTexts=[],l.minorTexts=[];let h,d,u,c,f,p,g=0,y,v,_,D=0;const C=1e3;let A;for(a.start(),d=a.getCurrent(),c=this.body.util.toScreen(d);a.hasNext()&&D<C;){switch(D++,f=a.isMajor(),A=a.getClassName(),h=d,u=c,a.next(),d=a.getCurrent(),c=this.body.util.toScreen(d),y=g,g=c-u,a.scale){case"week":p=!0;break;default:p=g>=y*.4;break}if(this.options.showMinorLabels&&p){var M=this._repaintMinorText(u,a.getLabelMinor(h),e,A);M.style.width=`${g}px`}f&&this.options.showMajorLabels?(u>0&&(_==null&&(_=u),M=this._repaintMajorText(u,a.getLabelMajor(h),e,A)),v=this._repaintMajorLine(u,g,e,A)):p?v=this._repaintMinorLine(u,g,e,A):v&&(v.style.width=`${parseInt(v.style.width)+g}px`)}if(D===C&&!_a&&(console.warn(`Something is wrong with the Timeline scale. Limited drawing of grid lines to ${C} lines.`),_a=!0),this.options.showMajorLabels){const E=this.body.util.toTime(0),I=a.getLabelMajor(E),B=I.length*(this.props.majorCharWidth||10)+10;(_==null||B<_)&&this._repaintMajorText(0,I,e,A)}m.forEach(this.dom.redundant,E=>{for(;E.length;){const I=E.pop();I&&I.parentNode&&I.parentNode.removeChild(I)}})}_repaintMinorText(e,s,n,r){let o=this.dom.redundant.minorTexts.shift();if(!o){const l=document.createTextNode("");o=document.createElement("div"),o.appendChild(l),this.dom.foreground.appendChild(o)}this.dom.minorTexts.push(o),o.innerHTML=m.xss(s);let a=n=="top"?this.props.majorLabelHeight:0;return this._setXY(o,e,a),o.className=`vis-text vis-minor ${r}`,o}_repaintMajorText(e,s,n,r){let o=this.dom.redundant.majorTexts.shift();if(!o){const l=document.createElement("div");o=document.createElement("div"),o.appendChild(l),this.dom.foreground.appendChild(o)}o.childNodes[0].innerHTML=m.xss(s),o.className=`vis-text vis-major ${r}`;let a=n=="top"?0:this.props.minorLabelHeight;return this._setXY(o,e,a),this.dom.majorTexts.push(o),o}_setXY(e,s,n){const r=this.options.rtl?s*-1:s;e.style.transform=`translate(${r}px, ${n}px)`}_repaintMinorLine(e,s,n,r){let o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);const a=this.props;o.style.width=`${s}px`,o.style.height=`${a.minorLineHeight}px`;let l=n=="top"?a.majorLabelHeight:this.body.domProps.top.height,h=e-a.minorLineWidth/2;return this._setXY(o,h,l),o.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-minor ${r}`,o}_repaintMajorLine(e,s,n,r){let o=this.dom.redundant.lines.shift();o||(o=document.createElement("div"),this.dom.background.appendChild(o)),this.dom.lines.push(o);const a=this.props;o.style.width=`${s}px`,o.style.height=`${a.majorLineHeight}px`;let l=n=="top"?0:this.body.domProps.top.height,h=e-a.majorLineWidth/2;return this._setXY(o,h,l),o.className=`vis-grid ${this.options.rtl?"vis-vertical-rtl":"vis-vertical"} vis-major ${r}`,o}_calculateCharSize(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}var _a=!1;function je(t){this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=ke(this.dom.overlay),this.hammer.on("tap",this._onTapOverlay.bind(this));var e=this,s=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];s.forEach(function(n){e.hammer.on(n,function(r){r.stopPropagation()})}),document&&document.body&&(this.onClick=function(n){Wv(n.target,t)||e.deactivate()},document.body.addEventListener("click",this.onClick)),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=Ov(),this.escListener=this.deactivate.bind(this)}oo(je.prototype);je.current=null;je.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),this.keycharm!==void 0&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null};je.prototype.activate=function(){je.current&&je.current.deactivate(),je.current=this,this.active=!0,this.dom.overlay.style.display="none",m.addClassName(this.dom.container,"vis-active"),this.emit("change"),this.emit("activate"),this.keycharm.bind("esc",this.escListener)};je.prototype.deactivate=function(){je.current===this&&(je.current=null),this.active=!1,this.dom.overlay.style.display="",m.removeClassName(this.dom.container,"vis-active"),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")};je.prototype._onTapOverlay=function(t){this.activate(),t.stopPropagation()};function Wv(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}const Eo={current:"current",time:"time",deleteSelected:"Delete selected"},Gv=Eo,Uv=Eo,Oo={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},Bv=Oo,zv=Oo,Mo={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},$v=Mo,jv=Mo,Ih={current:"Aktuelle",time:"Zeit",deleteSelected:"Lösche Auswahl"},Vv=Ih,Xn={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},Xv=Xn,qv=Xn,Zv=Xn,Rh={current:"corriente",time:"hora",deleteSelected:"Eliminar selección"},Kv=Rh,Fh={current:"поточний",time:"час",deleteSelected:"Видалити обране"},Qv=Fh,Lh={current:"текущее",time:"время",deleteSelected:"Удалить выбранное"},Jv=Lh,Hh={current:"aktualny",time:"czas",deleteSelected:"Usuń wybrane"},eb=Hh,Po={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},tb=Po,ib=Po,Yh={current:"現在",time:"時刻",deleteSelected:"選択されたものを削除"},sb=Yh,Wh={current:"nuvarande",time:"tid",deleteSelected:"Radera valda"},nb=Wh,qn={current:"nåværende",time:"tid",deleteSelected:"Slett valgte"},rb=qn,ob=qn,ab=qn,Gh={current:"einamas",time:"laikas",deleteSelected:"Pašalinti pasirinktą"},lb=Gh,Ui={en:Eo,en_EN:Gv,en_US:Uv,it:Oo,it_IT:Bv,it_CH:zv,nl:Mo,nl_NL:$v,nl_BE:jv,de:Ih,de_DE:Vv,fr:Xn,fr_FR:Xv,fr_CA:qv,fr_BE:Zv,es:Rh,es_ES:Kv,uk:Fh,uk_UA:Qv,ru:Lh,ru_RU:Jv,pl:Hh,pl_PL:eb,pt:Po,pt_BR:tb,pt_PT:ib,ja:Yh,ja_JP:sb,lt:Gh,lt_LT:lb,sv:Wh,sv_SE:nb,nb:qn,nn:ob,nb_NO:rb,nn_NO:ab};class No extends $t{constructor(e,s){super(),this.body=e,this.defaultOptions={moment:Ae,locales:Ui,locale:"en",id:void 0,title:void 0},this.options=m.extend({},this.defaultOptions),this.setOptions(s),this.options.locales=m.extend({},Ui,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(r=>{this.options.locales[r]=m.extend({},n,this.options.locales[r])}),s&&s.time!=null?this.customTime=s.time:this.customTime=new Date,this.eventParams={},this._create()}setOptions(e){e&&m.selectiveExtend(["moment","locale","locales","id","title","rtl","snap"],this.options,e)}_create(){const e=document.createElement("div");e["custom-time"]=this,e.className=`vis-custom-time ${this.options.id||""}`,e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e;const s=document.createElement("div");s.style.position="relative",s.style.top="0px",this.options.rtl?s.style.right="-10px":s.style.left="-10px",s.style.height="100%",s.style.width="20px";function n(r){this.body.range._onMouseWheel(r)}s.addEventListener?(s.addEventListener("mousewheel",n.bind(this),!1),s.addEventListener("DOMMouseScroll",n.bind(this),!1)):s.attachEvent("onmousewheel",n.bind(this)),e.appendChild(s),this.hammer=new ke(s),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:ke.DIRECTION_ALL}),this.hammer.get("press").set({time:1e4})}destroy(){this.hide(),this.hammer.destroy(),this.hammer=null,this.body=null}redraw(){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar));const s=this.body.util.toScreen(this.customTime);let n=this.options.locales[this.options.locale];n||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),n=this.options.locales.en);let r=this.options.title;return r===void 0?(r=`${n.time}: ${this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")}`,r=r.charAt(0).toUpperCase()+r.substring(1)):typeof r=="function"&&(r=r.call(this,this.customTime)),this.options.rtl?this.bar.style.right=`${s}px`:this.bar.style.left=`${s}px`,this.bar.title=r,!1}hide(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}setCustomTime(e){this.customTime=m.convert(e,"Date"),this.redraw()}getCustomTime(){return new Date(this.customTime.valueOf())}setCustomMarker(e,s){const n=document.createElement("div");n.className="vis-custom-time-marker",n.innerHTML=m.xss(e),n.style.position="absolute",s&&(n.setAttribute("contenteditable","true"),n.addEventListener("pointerdown",function(){n.focus()}),n.addEventListener("input",this._onMarkerChange.bind(this)),n.title=e,n.addEventListener("blur",(function(r){this.title!=r.target.innerHTML&&(this._onMarkerChanged(r),this.title=r.target.innerHTML)}).bind(this))),this.bar.appendChild(n)}setCustomTitle(e){this.options.title=e}_onDragStart(e){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,e.stopPropagation()}_onDrag(e){if(!this.eventParams.dragging)return;let s=this.options.rtl?-1*e.deltaX:e.deltaX;const n=this.body.util.toScreen(this.eventParams.customTime)+s,r=this.body.util.toTime(n),o=this.body.util.getScale(),a=this.body.util.getStep(),l=this.options.snap,h=l?l(r,o,a):r;this.setCustomTime(h),this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation()}_onDragEnd(e){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:e}),e.stopPropagation())}_onMarkerChange(e){this.body.emitter.emit("markerchange",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}_onMarkerChanged(e){this.body.emitter.emit("markerchanged",{id:this.options.id,title:e.target.innerHTML,event:e}),e.stopPropagation()}static customTimeFromTarget(e){let s=e.target;for(;s;){if(s.hasOwnProperty("custom-time"))return s["custom-time"];s=s.parentNode}return null}}class Ri{_create(e){this.dom={},this.dom.container=e,this.dom.container.style.position="relative",this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.rollingModeBtn=document.createElement("div"),this.dom.loadingScreen=document.createElement("div"),this.dom.root.className="vis-timeline",this.dom.background.className="vis-panel vis-background",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical",this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal",this.dom.centerContainer.className="vis-panel vis-center",this.dom.leftContainer.className="vis-panel vis-left",this.dom.rightContainer.className="vis-panel vis-right",this.dom.top.className="vis-panel vis-top",this.dom.bottom.className="vis-panel vis-bottom",this.dom.left.className="vis-content",this.dom.center.className="vis-content",this.dom.right.className="vis-content",this.dom.shadowTop.className="vis-shadow vis-top",this.dom.shadowBottom.className="vis-shadow vis-bottom",this.dom.shadowTopLeft.className="vis-shadow vis-top",this.dom.shadowBottomLeft.className="vis-shadow vis-bottom",this.dom.shadowTopRight.className="vis-shadow vis-top",this.dom.shadowBottomRight.className="vis-shadow vis-bottom",this.dom.rollingModeBtn.className="vis-rolling-mode-btn",this.dom.loadingScreen.className="vis-loading-screen",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.root.appendChild(this.dom.rollingModeBtn),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.on("rangechange",()=>{this.initialDrawDone===!0&&this._redraw()}),this.on("rangechanged",()=>{this.initialRangeChangeDone||(this.initialRangeChangeDone=!0)}),this.on("touch",this._onTouch.bind(this)),this.on("panmove",this._onDrag.bind(this));const s=this;this._origRedraw=this._redraw.bind(this),this._redraw=m.throttle(this._origRedraw),this.on("_change",c=>{s.itemSet&&s.itemSet.initialItemSetDrawn&&c&&c.queue==!0?s._redraw():s._origRedraw()}),this.hammer=new ke(this.dom.root);const n=this.hammer.get("pinch").set({enable:!0});n&&Yv(n),this.hammer.get("pan").set({threshold:5,direction:ke.DIRECTION_ALL}),this.timelineListeners={},["tap","doubletap","press","pinch","pan","panstart","panmove","panend"].forEach(c=>{const f=p=>{s.isActive()&&s.emit(c,p)};s.hammer.on(c,f),s.timelineListeners[c]=f}),Ah(this.hammer,c=>{s.emit("touch",c)}),Hv(this.hammer,c=>{s.emit("release",c)});function o(c){this.isActive()&&this.emit("mousewheel",c);let g=0,y=0;if("detail"in c&&(y=c.detail*-1),"wheelDelta"in c&&(y=c.wheelDelta),"wheelDeltaY"in c&&(y=c.wheelDeltaY),"wheelDeltaX"in c&&(g=c.wheelDeltaX*-1),"axis"in c&&c.axis===c.HORIZONTAL_AXIS&&(g=y*-1,y=0),"deltaY"in c&&(y=c.deltaY*-1),"deltaX"in c&&(g=c.deltaX),c.deltaMode&&(c.deltaMode===1?(g*=40,y*=40):(g*=40,y*=800)),this.options.preferZoom){if(!this.options.zoomKey||c[this.options.zoomKey])return}else if(this.options.zoomKey&&c[this.options.zoomKey])return;if(!(!this.options.verticalScroll&&!this.options.horizontalScroll)){if(this.options.verticalScroll&&Math.abs(y)>=Math.abs(g)){const v=this.props.scrollTop,_=v+y;this.isActive()&&this._setScrollTop(_)!==v&&(this._redraw(),this.emit("scroll",c),c.preventDefault())}else if(this.options.horizontalScroll){const _=(Math.abs(g)>=Math.abs(y)?g:y)/120*(this.range.end-this.range.start)/20,D=this.range.start+_,C=this.range.end+_,A={animation:!1,byUser:!0,event:c};this.range.setRange(D,C,A),c.preventDefault()}}}const a="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener,this.dom.bottom.addEventListener,this.dom.centerContainer.addEventListener(a,o.bind(this),!1),this.dom.top.addEventListener(a,o.bind(this),!1),this.dom.bottom.addEventListener(a,o.bind(this),!1);function l(c){if(s.options.verticalScroll&&(c.preventDefault(),s.isActive())){const f=-c.target.scrollTop;s._setScrollTop(f),s._redraw(),s.emit("scrollSide",c)}}this.dom.left.parentNode.addEventListener("scroll",l.bind(this)),this.dom.right.parentNode.addEventListener("scroll",l.bind(this));let h=!1;function d(c){if(c.preventDefault&&(s.emit("dragover",s.getEventProperties(c)),c.preventDefault()),c.target.className.indexOf("timeline")>-1&&!h)return c.dataTransfer.dropEffect="move",h=!0,!1}function u(c){c.preventDefault&&c.preventDefault(),c.stopPropagation&&c.stopPropagation();try{var f=JSON.parse(c.dataTransfer.getData("text"));if(!f||!f.content)return}catch{return!1}return h=!1,c.center={x:c.clientX,y:c.clientY},f.target!=="item"?s.itemSet._onAddItem(c):s.itemSet._onDropObjectOnItem(c),s.emit("drop",s.getEventProperties(c)),!1}if(this.dom.center.addEventListener("dragover",d.bind(this),!1),this.dom.center.addEventListener("drop",u.bind(this),!1),this.customTimes=[],this.touch={},this.redrawCount=0,this.initialDrawDone=!1,this.initialRangeChangeDone=!1,!e)throw new Error("No container provided");e.appendChild(this.dom.root),e.appendChild(this.dom.loadingScreen)}setOptions(e){if(e){const s=["width","height","minHeight","maxHeight","autoResize","start","end","clickToUse","dataAttributes","hiddenDates","locale","locales","moment","preferZoom","rtl","zoomKey","horizontalScroll","verticalScroll","longSelectPressTime","snap"];if(m.selectiveExtend(s,this.options,e),this.dom.rollingModeBtn.style.visibility="hidden",this.options.rtl&&(this.dom.container.style.direction="rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl"),this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll"),typeof this.options.orientation!="object"&&(this.options.orientation={item:void 0,axis:void 0}),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation={item:e.orientation,axis:e.orientation}:typeof e.orientation=="object"&&("item"in e.orientation&&(this.options.orientation.item=e.orientation.item),"axis"in e.orientation&&(this.options.orientation.axis=e.orientation.axis))),this.options.orientation.axis==="both"){if(!this.timeAxis2){const n=this.timeAxis2=new kn(this.body);n.setOptions=r=>{const o=r?m.extend({},r):{};o.orientation="top",kn.prototype.setOptions.call(n,o)},this.components.push(n)}}else if(this.timeAxis2){const n=this.components.indexOf(this.timeAxis2);n!==-1&&this.components.splice(n,1),this.timeAxis2.destroy(),this.timeAxis2=null}typeof e.drawPoints=="function"&&(e.drawPoints={onRender:e.drawPoints}),"hiddenDates"in this.options&&ko(this.options.moment,this.body,this.options.hiddenDates),"clickToUse"in e&&(e.clickToUse?this.activator||(this.activator=new je(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator)),this._initAutoResize()}if(this.components.forEach(s=>s.setOptions(e)),"configure"in e){this.configurator||(this.configurator=this._createConfigurator()),this.configurator.setOptions(e.configure);const s=m.deepExtend({},this.options);this.components.forEach(n=>{m.deepExtend(s,n.options)}),this.configurator.setModuleOptions({global:s})}this._redraw()}isActive(){return!this.activator||this.activator.active}destroy(){this.setItems(null),this.setGroups(null),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null,this.activator&&(this.activator.destroy(),delete this.activator);for(const e in this.timelineListeners)this.timelineListeners.hasOwnProperty(e)&&delete this.timelineListeners[e];this.timelineListeners=null,this.hammer&&this.hammer.destroy(),this.hammer=null,this.components.forEach(e=>e.destroy()),this.body=null}setCustomTime(e,s){const n=this.customTimes.filter(r=>s===r.options.id);if(n.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(s)}`);n.length>0&&n[0].setCustomTime(e)}getCustomTime(e){const s=this.customTimes.filter(n=>n.options.id===e);if(s.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);return s[0].getCustomTime()}setCustomTimeMarker(e,s,n){const r=this.customTimes.filter(o=>o.options.id===s);if(r.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(s)}`);r.length>0&&r[0].setCustomMarker(e,n)}setCustomTimeTitle(e,s){const n=this.customTimes.filter(r=>r.options.id===s);if(n.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(s)}`);if(n.length>0)return n[0].setCustomTitle(e)}getEventProperties(e){return{event:e}}addCustomTime(e,s){const n=e!==void 0?m.convert(e,"Date"):new Date;if(this.customTimes.some(a=>a.options.id===s))throw new Error(`A custom time with id ${JSON.stringify(s)} already exists`);const o=new No(this.body,m.extend({},this.options,{time:n,id:s,snap:this.itemSet?this.itemSet.options.snap:this.options.snap}));return this.customTimes.push(o),this.components.push(o),this._redraw(),s}removeCustomTime(e){const s=this.customTimes.filter(n=>n.options.id===e);if(s.length===0)throw new Error(`No custom time bar found with id ${JSON.stringify(e)}`);s.forEach(n=>{this.customTimes.splice(this.customTimes.indexOf(n),1),this.components.splice(this.components.indexOf(n),1),n.destroy()})}getVisibleItems(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}getItemsAtCurrentTime(e){return this.time=e,this.itemSet&&this.itemSet.getItemsAtCurrentTime(this.time)||[]}getVisibleGroups(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}fit(e,s){const n=this.getDataRange();if(n.min===null&&n.max===null)return;const r=n.max-n.min,o=new Date(n.min.valueOf()-r*.01),a=new Date(n.max.valueOf()+r*.01),l=e&&e.animation!==void 0?e.animation:!0;this.range.setRange(o,a,{animation:l},s)}getDataRange(){throw new Error("Cannot invoke abstract method getDataRange")}setWindow(e,s,n,r){typeof arguments[2]=="function"&&(r=arguments[2],n={});let o,a;arguments.length==1?(a=arguments[0],o=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:o})):arguments.length==2&&typeof arguments[1]=="function"?(a=arguments[0],r=arguments[1],o=a.animation!==void 0?a.animation:!0,this.range.setRange(a.start,a.end,{animation:o},r)):(o=n&&n.animation!==void 0?n.animation:!0,this.range.setRange(e,s,{animation:o},r))}moveTo(e,s,n){typeof arguments[1]=="function"&&(n=arguments[1],s={});const r=this.range.end-this.range.start,o=m.convert(e,"Date").valueOf(),a=o-r/2,l=o+r/2,h=s&&s.animation!==void 0?s.animation:!0;this.range.setRange(a,l,{animation:h},n)}getWindow(){const e=this.range.getRange();return{start:new Date(e.start),end:new Date(e.end)}}zoomIn(e,s,n){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(n=arguments[1],s={});const r=this.getWindow(),o=r.start.valueOf(),a=r.end.valueOf(),l=a-o,h=l/(1+e),d=(l-h)/2,u=o+d,c=a-d;this.setWindow(u,c,s,n)}zoomOut(e,s,n){if(!e||e<0||e>1)return;typeof arguments[1]=="function"&&(n=arguments[1],s={});const r=this.getWindow(),o=r.start.valueOf(),a=r.end.valueOf(),l=a-o,h=o-l*e/2,d=a+l*e/2;this.setWindow(h,d,s,n)}redraw(){this._redraw()}_redraw(){this.redrawCount++;const e=this.dom;if(!e||!e.container||e.root.offsetWidth==0)return;let s=!1;const n=this.options,r=this.props;Dn(this.options.moment,this.body,this.options.hiddenDates),n.orientation=="top"?(m.addClassName(e.root,"vis-top"),m.removeClassName(e.root,"vis-bottom")):(m.removeClassName(e.root,"vis-top"),m.addClassName(e.root,"vis-bottom")),n.rtl?(m.addClassName(e.root,"vis-rtl"),m.removeClassName(e.root,"vis-ltr")):(m.addClassName(e.root,"vis-ltr"),m.removeClassName(e.root,"vis-rtl")),e.root.style.maxHeight=m.option.asSize(n.maxHeight,""),e.root.style.minHeight=m.option.asSize(n.minHeight,""),e.root.style.width=m.option.asSize(n.width,"");const o=e.root.offsetWidth;r.border.left=1,r.border.right=1,r.border.top=1,r.border.bottom=1,r.center.height=e.center.offsetHeight,r.left.height=e.left.offsetHeight,r.right.height=e.right.offsetHeight,r.top.height=e.top.clientHeight||-r.border.top,r.bottom.height=Math.round(e.bottom.getBoundingClientRect().height)||e.bottom.clientHeight||-r.border.bottom;const a=Math.max(r.left.height,r.center.height,r.right.height),l=r.top.height+a+r.bottom.height+r.border.top+r.border.bottom;e.root.style.height=m.option.asSize(n.height,`${l}px`),r.root.height=e.root.offsetHeight,r.background.height=r.root.height;const h=r.root.height-r.top.height-r.bottom.height;r.centerContainer.height=h,r.leftContainer.height=h,r.rightContainer.height=r.leftContainer.height,r.root.width=o,r.background.width=r.root.width,this.initialDrawDone||(r.scrollbarWidth=m.getScrollBarWidth());const d=e.leftContainer.clientWidth,u=e.rightContainer.clientWidth;n.verticalScroll?n.rtl?(r.left.width=d||-r.border.left,r.right.width=u+r.scrollbarWidth||-r.border.right):(r.left.width=d+r.scrollbarWidth||-r.border.left,r.right.width=u||-r.border.right):(r.left.width=d||-r.border.left,r.right.width=u||-r.border.right),this._setDOM();let c=this._updateScrollTop();n.orientation.item!="top"&&(c+=Math.max(r.centerContainer.height-r.center.height-r.border.top-r.border.bottom,0)),e.center.style.transform=`translateY(${c}px)`;const f=r.scrollTop==0?"hidden":"",p=r.scrollTop==r.scrollTopMin?"hidden":"";e.shadowTop.style.visibility=f,e.shadowBottom.style.visibility=p,e.shadowTopLeft.style.visibility=f,e.shadowBottomLeft.style.visibility=p,e.shadowTopRight.style.visibility=f,e.shadowBottomRight.style.visibility=p,n.verticalScroll&&(e.rightContainer.className="vis-panel vis-right vis-vertical-scroll",e.leftContainer.className="vis-panel vis-left vis-vertical-scroll",e.shadowTopRight.style.visibility="hidden",e.shadowBottomRight.style.visibility="hidden",e.shadowTopLeft.style.visibility="hidden",e.shadowBottomLeft.style.visibility="hidden",e.left.style.top="0px",e.right.style.top="0px"),(!n.verticalScroll||r.center.height<r.centerContainer.height)&&(e.left.style.top=`${c}px`,e.right.style.top=`${c}px`,e.rightContainer.className=e.rightContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),e.leftContainer.className=e.leftContainer.className.replace(new RegExp("(?:^|\\s)vis-vertical-scroll(?:\\s|$)")," "),r.left.width=d||-r.border.left,r.right.width=u||-r.border.right,this._setDOM());const g=r.center.height>r.centerContainer.height;this.hammer.get("pan").set({direction:g?ke.DIRECTION_ALL:ke.DIRECTION_HORIZONTAL}),this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.components.forEach(v=>{s=v.redraw()||s});const y=5;if(s)if(this.redrawCount<y){this.body.emitter.emit("_change");return}else console.log("WARNING: infinite loop in redraw?");else this.redrawCount=0;this.body.emitter.emit("changed")}_setDOM(){const e=this.props,s=this.dom;e.leftContainer.width=e.left.width,e.rightContainer.width=e.right.width;const n=e.root.width-e.left.width-e.right.width;e.center.width=n,e.centerContainer.width=n,e.top.width=n,e.bottom.width=n,s.background.style.height=`${e.background.height}px`,s.backgroundVertical.style.height=`${e.background.height}px`,s.backgroundHorizontal.style.height=`${e.centerContainer.height}px`,s.centerContainer.style.height=`${e.centerContainer.height}px`,s.leftContainer.style.height=`${e.leftContainer.height}px`,s.rightContainer.style.height=`${e.rightContainer.height}px`,s.background.style.width=`${e.background.width}px`,s.backgroundVertical.style.width=`${e.centerContainer.width}px`,s.backgroundHorizontal.style.width=`${e.background.width}px`,s.centerContainer.style.width=`${e.center.width}px`,s.top.style.width=`${e.top.width}px`,s.bottom.style.width=`${e.bottom.width}px`,s.background.style.left="0",s.background.style.top="0",s.backgroundVertical.style.left=`${e.left.width+e.border.left}px`,s.backgroundVertical.style.top="0",s.backgroundHorizontal.style.left="0",s.backgroundHorizontal.style.top=`${e.top.height}px`,s.centerContainer.style.left=`${e.left.width}px`,s.centerContainer.style.top=`${e.top.height}px`,s.leftContainer.style.left="0",s.leftContainer.style.top=`${e.top.height}px`,s.rightContainer.style.left=`${e.left.width+e.center.width}px`,s.rightContainer.style.top=`${e.top.height}px`,s.top.style.left=`${e.left.width}px`,s.top.style.top="0",s.bottom.style.left=`${e.left.width}px`,s.bottom.style.top=`${e.top.height+e.centerContainer.height}px`,s.center.style.left="0",s.left.style.left="0",s.right.style.left="0"}setCurrentTime(e){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(e)}getCurrentTime(){if(!this.currentTime)throw new Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}_toTime(e){return ya(this,e,this.props.center.width)}_toGlobalTime(e){return ya(this,e,this.props.root.width)}_toScreen(e){return ga(this,e,this.props.center.width)}_toGlobalScreen(e){return ga(this,e,this.props.root.width)}_initAutoResize(){this.options.autoResize==!0?this._startAutoResize():this._stopAutoResize()}_startAutoResize(){const e=this;this._stopAutoResize(),this._onResize=()=>{if(e.options.autoResize!=!0){e._stopAutoResize();return}if(e.dom.root){const s=e.dom.root.offsetHeight,n=e.dom.root.offsetWidth;(n!=e.props.lastWidth||s!=e.props.lastHeight)&&(e.props.lastWidth=n,e.props.lastHeight=s,e.props.scrollbarWidth=m.getScrollBarWidth(),e.body.emitter.emit("_change"))}},m.addEventListener(window,"resize",this._onResize),e.dom.root&&(e.props.lastWidth=e.dom.root.offsetWidth,e.props.lastHeight=e.dom.root.offsetHeight),this.watchTimer=setInterval(this._onResize,1e3)}_stopAutoResize(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),this._onResize&&(m.removeEventListener(window,"resize",this._onResize),this._onResize=null)}_onTouch(e){this.touch.allowDragging=!0,this.touch.initialScrollTop=this.props.scrollTop}_onPinch(e){this.touch.allowDragging=!1}_onDrag(e){if(!e||!this.touch.allowDragging)return;const s=e.deltaY,n=this._getScrollTop(),r=this._setScrollTop(this.touch.initialScrollTop+s);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),r!=n&&this.emit("verticalDrag")}_setScrollTop(e){return this.props.scrollTop=e,this._updateScrollTop(),this.props.scrollTop}_updateScrollTop(){const e=Math.min(this.props.centerContainer.height-this.props.border.top-this.props.border.bottom-this.props.center.height,0);return e!=this.props.scrollTopMin&&(this.options.orientation.item!="top"&&(this.props.scrollTop+=e-this.props.scrollTopMin),this.props.scrollTopMin=e),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<e&&(this.props.scrollTop=e),this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop),this.props.scrollTop}_getScrollTop(){return this.props.scrollTop}_createConfigurator(){throw new Error("Cannot invoke abstract method _createConfigurator")}}oo(Ri.prototype);class Uh extends $t{constructor(e,s){super(),this.body=e,this.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:Ae,locales:Ui,locale:"en"},this.options=m.extend({},this.defaultOptions),this.setOptions(s),this.options.locales=m.extend({},Ui,this.options.locales);const n=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(r=>{this.options.locales[r]=m.extend({},n,this.options.locales[r])}),this.offset=0,this._create()}_create(){const e=document.createElement("div");e.className="vis-current-time",e.style.position="absolute",e.style.top="0px",e.style.height="100%",this.bar=e}destroy(){this.options.showCurrentTime=!1,this.redraw(),this.body=null}setOptions(e){e&&m.selectiveExtend(["rtl","showCurrentTime","alignCurrentTime","moment","locale","locales"],this.options,e)}redraw(){if(this.options.showCurrentTime){const e=this.body.dom.backgroundVertical;this.bar.parentNode!=e&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),e.appendChild(this.bar),this.start());let s=this.options.moment(Date.now()+this.offset);this.options.alignCurrentTime&&(s=s.startOf(this.options.alignCurrentTime));const n=this.body.util.toScreen(s);let r=this.options.locales[this.options.locale];r||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),r=this.options.locales.en);let o=`${r.current} ${r.time}: ${s.format("dddd, MMMM Do YYYY, H:mm:ss")}`;o=o.charAt(0).toUpperCase()+o.substring(1),this.options.rtl?this.bar.style.transform=`translateX(${n*-1}px)`:this.bar.style.transform=`translateX(${n}px)`,this.bar.title=o}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}start(){const e=this;function s(){e.stop();let r=1/e.body.range.conversion(e.body.domProps.center.width).scale/10;r<30&&(r=30),r>1e3&&(r=1e3),e.redraw(),e.body.emitter.emit("currentTimeTick"),e.currentTimeTimer=setTimeout(s,r)}s()}stop(){this.currentTimeTimer!==void 0&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}setCurrentTime(e){const s=m.convert(e,"Date").valueOf(),n=Date.now();this.offset=s-n,this.redraw()}getCurrentTime(){return new Date(Date.now()+this.offset)}}const Re=.001;function hb(t){t.sort((e,s)=>e.data.start-s.data.start)}function db(t){t.sort((e,s)=>{const n="end"in e.data?e.data.end:e.data.start,r="end"in s.data?s.data.end:s.data.start;return n-r})}function wa(t,e,s,n){return Ao(t,e.item,!1,o=>o.stack&&(s||o.top===null),o=>o.stack,o=>e.axis,n)===null}function ub(t,e,s){const n=Ao(t,e.item,!1,r=>r.stack,r=>!0,r=>r.baseTop);s.height=n-s.top+.5*e.item.vertical}function cb(t,e,s,n){for(let r=0;r<t.length;r++)if(t[r].data.subgroup==null)t[r].top=e.item.vertical;else if(t[r].data.subgroup!==void 0&&n){let o=0;for(const a in s)s.hasOwnProperty(a)&&s[a].visible==!0&&s[a].index<s[t[r].data.subgroup].index&&(o+=s[a].height,s[t[r].data.subgroup].top=o);t[r].top=o+.5*e.item.vertical}n||fb(t,e,s)}function fb(t,e,s){Ao(Object.values(s).sort((n,r)=>n.index>r.index?1:n.index<r.index?-1:0),{vertical:0},!0,n=>!0,n=>!0,n=>0);for(let n=0;n<t.length;n++)t[n].data.subgroup!==void 0&&(t[n].top=s[t[n].data.subgroup].top+.5*e.item.vertical)}function xa(t,e,s){let n=!1;const r=[];for(var o in s)s[o].hasOwnProperty("index")?r[s[o].index]=o:r.push(o);for(let a=0;a<r.length;a++)if(o=r[a],s.hasOwnProperty(o)){n=n||s[o].stack,s[o].top=0;for(const h in s)s[h].visible&&s[o].index>s[h].index&&(s[o].top+=s[h].height);const l=t[o];for(let h=0;h<l.length;h++)l[h].data.subgroup!==void 0&&(l[h].top=s[l[h].data.subgroup].top+.5*e.item.vertical,s[o].stack&&(l[h].baseTop=l[h].top));n&&s[o].stack&&ub(t[o],e,s[o])}}function Ao(t,e,s,n,r,o,a){let l=_=>_.start,h=_=>_.end;s||(!!(t[0]&&t[0].options.rtl)?l=D=>D.right:l=D=>D.left,h=D=>l(D)+D.width+e.horizontal);const d=[],u=[];let c=null,f=0;for(const _ of t)if(n(_))d.push(_);else if(r(_)){const D=l(_);c!==null&&D<c-Re&&(f=0),c=D,f=sn(u,C=>l(C)-Re>D,f),u.splice(f,0,_),f++}c=null;let p=null;f=0;let g=0,y=0,v=0;for(;d.length>0;){const _=d.shift();_.top=o(_);const D=l(_),C=h(_);c!==null&&D<c-Re&&(g=0,y=0,f=0,p=null),c=D,g=sn(u,E=>D<h(E)-Re,g),(p===null||p<C-Re)&&(y=sn(u,E=>C<l(E)-Re,Math.max(g,y))),p!==null&&p-Re>C&&(y=mb(u,E=>C+Re>=l(E),g,horizontalOVerlapEndIndex)+1);const A=u.slice(g,y).filter(E=>D<h(E)-Re&&C-Re>l(E)).sort((E,I)=>E.top-I.top);for(let E=0;E<A.length;E++){const I=A[E];pb(_,I,e)&&(_.top=I.top+I.height+e.vertical)}r(_)&&(f=sn(u,E=>l(E)-Re>D,f),u.splice(f,0,_),f++);const M=_.top+_.height;if(M>v&&(v=M),a&&a())return null}return v}function pb(t,e,s){return t.top-s.vertical+Re<e.top+e.height&&t.top+t.height+s.vertical-Re>e.top}function sn(t,e,s){s||(s=0);const n=t.slice(s).findIndex(e);return n===-1?t.length:n+s}function mb(t,e,s,n){for(s||(s=0),n||(n=t.length),i=n-1;i>=s;i--)if(e(t[i]))return i;return s-1}const gb="__ungrouped__",yb="__background__",Sa={UNGROUPED:gb,BACKGROUND:yb};class Ir{constructor(e,s,n){if(this.groupId=e,this.subgroups={},this.subgroupStack={},this.subgroupStackAll=!1,this.subgroupVisibility={},this.doInnerStack=!1,this.shouldBailStackItems=!1,this.subgroupIndex=0,this.subgroupOrderer=s&&s.subgroupOrder,this.itemSet=n,this.isVisible=null,this.stackDirty=!0,this._disposeCallbacks=[],s&&s.nestedGroups&&(this.nestedGroups=s.nestedGroups,s.showNested==!1?this.showNested=!1:this.showNested=!0),s&&s.subgroupStack)if(typeof s.subgroupStack=="boolean")this.doInnerStack=s.subgroupStack,this.subgroupStackAll=s.subgroupStack;else for(const o in s.subgroupStack)this.subgroupStack[o]=s.subgroupStack[o],this.doInnerStack=this.doInnerStack||s.subgroupStack[o];s&&s.heightMode?this.heightMode=s.heightMode:this.heightMode=n.options.groupHeightMode,this.nestedInGroup=null,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.itemsInRange=[],this.orderedItems={byStart:[],byEnd:[]},this.checkRangedItems=!1;const r=()=>{this.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",r),this._disposeCallbacks.push(()=>{this.itemSet.body.emitter.off("checkRangedItems",r)}),this._create(),this.setData(s)}_create(){const e=document.createElement("div");this.itemSet.options.groupEditable.order?e.className="vis-label draggable":e.className="vis-label",this.dom.label=e;const s=document.createElement("div");s.className="vis-inner",e.appendChild(s),this.dom.inner=s;const n=document.createElement("div");n.className="vis-group",n["vis-group"]=this,this.dom.foreground=n,this.dom.background=document.createElement("div"),this.dom.background.className="vis-group",this.dom.axis=document.createElement("div"),this.dom.axis.className="vis-group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.style.position="absolute",this.dom.marker.innerHTML="",this.dom.background.appendChild(this.dom.marker)}setData(e){if(this.itemSet.groupTouchParams.isDragging)return;let s,n;if(e&&e.subgroupVisibility)for(const o in e.subgroupVisibility)this.subgroupVisibility[o]=e.subgroupVisibility[o];if(this.itemSet.options&&this.itemSet.options.groupTemplate?(n=this.itemSet.options.groupTemplate.bind(this),s=n(e,this.dom.inner)):s=e&&e.content,s instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(s)}else s instanceof Object&&s.isReactComponent||(s instanceof Object?n(e,this.dom.inner):s!=null?this.dom.inner.innerHTML=m.xss(s):this.dom.inner.innerHTML=m.xss(this.groupId||""));this.dom.label.title=e&&e.title||"",this.dom.inner.firstChild?m.removeClassName(this.dom.inner,"vis-hidden"):m.addClassName(this.dom.inner,"vis-hidden"),e&&e.nestedGroups?((!this.nestedGroups||this.nestedGroups!=e.nestedGroups)&&(this.nestedGroups=e.nestedGroups),(e.showNested!==void 0||this.showNested===void 0)&&(e.showNested==!1?this.showNested=!1:this.showNested=!0),m.addClassName(this.dom.label,"vis-nesting-group"),this.showNested?(m.removeClassName(this.dom.label,"collapsed"),m.addClassName(this.dom.label,"expanded")):(m.removeClassName(this.dom.label,"expanded"),m.addClassName(this.dom.label,"collapsed"))):this.nestedGroups&&(this.nestedGroups=null,m.removeClassName(this.dom.label,"collapsed"),m.removeClassName(this.dom.label,"expanded"),m.removeClassName(this.dom.label,"vis-nesting-group")),e&&(e.treeLevel||e.nestedInGroup)?(m.addClassName(this.dom.label,"vis-nested-group"),e.treeLevel?m.addClassName(this.dom.label,"vis-group-level-"+e.treeLevel):m.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):m.addClassName(this.dom.label,"vis-group-level-0");const r=e&&e.className||null;r!=this.className&&(this.className&&(m.removeClassName(this.dom.label,this.className),m.removeClassName(this.dom.foreground,this.className),m.removeClassName(this.dom.background,this.className),m.removeClassName(this.dom.axis,this.className)),m.addClassName(this.dom.label,r),m.addClassName(this.dom.foreground,r),m.addClassName(this.dom.background,r),m.addClassName(this.dom.axis,r),this.className=r),this.style&&(m.removeCssText(this.dom.label,this.style),this.style=null),e&&e.style&&(m.addCssText(this.dom.label,e.style),this.style=e.style)}getLabelWidth(){return this.props.label.width}_didMarkerHeightChange(){const e=this.dom.marker.clientHeight;if(e!=this.lastMarkerHeight){this.lastMarkerHeight=e;const s={};let n=0;if(m.forEach(this.items,(o,a)=>{o.dirty=!0,o.displayed&&(s[a]=o.redraw(!0),n=s[a].length)}),n>0)for(let o=0;o<n;o++)m.forEach(s,a=>{a[o]()});return!0}else return!1}_calculateGroupSizeAndPosition(){const{offsetTop:e,offsetLeft:s,offsetWidth:n}=this.dom.foreground;this.top=e,this.right=s,this.width=n}_shouldBailItemsRedraw(){const e=this,s=this.itemSet.options.onTimeout,n={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:s&&s.timeoutMs,userBailFunction:s&&s.callback,shouldBailStackItems:this.shouldBailStackItems};let r=null;if(!this.itemSet.initialDrawDone){if(n.shouldBailStackItems)return!0;Math.abs(Date.now()-new Date(n.relativeBailingTime))>n.bailTimeMs&&(n.userBailFunction&&this.itemSet.userContinueNotBail==null?n.userBailFunction(o=>{e.itemSet.userContinueNotBail=o,r=!o}):e.itemSet.userContinueNotBail==!1?r=!0:r=!1)}return r}_redrawItems(e,s,n,r){if(e||this.stackDirty||this.isVisible&&!s){const a={byEnd:this.orderedItems.byEnd.filter(u=>!u.isCluster),byStart:this.orderedItems.byStart.filter(u=>!u.isCluster)},l={byEnd:[...new Set(this.orderedItems.byEnd.map(u=>u.cluster).filter(u=>!!u))],byStart:[...new Set(this.orderedItems.byStart.map(u=>u.cluster).filter(u=>!!u))]},h=()=>{const u=this._updateItemsInRange(a,this.visibleItems.filter(f=>!f.isCluster),r),c=this._updateClustersInRange(l,this.visibleItems.filter(f=>f.isCluster),r);return[...u,...c]},d=u=>{let c={};for(const f in this.subgroups){const p=this.visibleItems.filter(g=>g.data.subgroup===f);c[f]=u?p.sort((g,y)=>u(g.data,y.data)):p}return c};if(typeof this.itemSet.options.order=="function"){const u=this;if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const c=d(this.itemSet.options.order);xa(c,n,this.subgroups),this.visibleItems=h(),this._updateSubGroupHeights(n)}else{this.visibleItems=h(),this._updateSubGroupHeights(n);const c=this.visibleItems.slice().filter(f=>f.isCluster||!f.isCluster&&!f.cluster).sort((f,p)=>u.itemSet.options.order(f.data,p.data));this.shouldBailStackItems=wa(c,n,!0,this._shouldBailItemsRedraw.bind(this))}}else if(this.visibleItems=h(),this._updateSubGroupHeights(n),this.itemSet.options.stack)if(this.doInnerStack&&this.itemSet.options.stackSubgroups){const u=d();xa(u,n,this.subgroups)}else this.shouldBailStackItems=wa(this.visibleItems,n,!0,this._shouldBailItemsRedraw.bind(this));else cb(this.visibleItems,n,this.subgroups,this.itemSet.options.stackSubgroups);for(let u=0;u<this.visibleItems.length;u++)this.visibleItems[u].repositionX(),this.subgroupVisibility[this.visibleItems[u].data.subgroup]!==void 0&&(this.subgroupVisibility[this.visibleItems[u].data.subgroup]||this.visibleItems[u].hide());this.itemSet.options.cluster&&m.forEach(this.items,u=>{u.cluster&&u.displayed&&u.hide()}),this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline"),this.stackDirty=!1}}_didResize(e,s){e=m.updateProperty(this,"height",s)||e;const n=this.dom.inner.clientWidth,r=this.dom.inner.clientHeight;return e=m.updateProperty(this.props.label,"width",n)||e,e=m.updateProperty(this.props.label,"height",r)||e,e}_applyGroupHeight(e){this.dom.background.style.height=`${e}px`,this.dom.foreground.style.height=`${e}px`,this.dom.label.style.height=`${e}px`}_updateItemsVerticalPosition(e){for(let s=0,n=this.visibleItems.length;s<n;s++){const r=this.visibleItems[s];r.repositionY(e),!this.isVisible&&this.groupId!=Sa.BACKGROUND&&r.displayed&&r.hide()}}redraw(e,s,n,r){let o=!1;const a=this.isVisible;let l;const h=[()=>{n=this._didMarkerHeightChange.call(this)||n},this._updateSubGroupHeights.bind(this,s),this._calculateGroupSizeAndPosition.bind(this),()=>{this.isVisible=this._isGroupVisible.bind(this)(e,s)},()=>{this._redrawItems.bind(this)(n,a,s,e)},this._updateSubgroupsSizes.bind(this),()=>{l=this._calculateHeight.bind(this)(s)},this._calculateGroupSizeAndPosition.bind(this),()=>{o=this._didResize.bind(this)(o,l)},()=>{this._applyGroupHeight.bind(this)(l)},()=>{this._updateItemsVerticalPosition.bind(this)(s)},(()=>(!this.isVisible&&this.height&&(o=!1),o)).bind(this)];if(r)return h;{let d;return h.forEach(u=>{d=u()}),d}}_updateSubGroupHeights(e){if(Object.keys(this.subgroups).length>0){const s=this;this._resetSubgroups(),m.forEach(this.visibleItems,n=>{n.data.subgroup!==void 0&&(s.subgroups[n.data.subgroup].height=Math.max(s.subgroups[n.data.subgroup].height,n.height+e.item.vertical),s.subgroups[n.data.subgroup].visible=typeof this.subgroupVisibility[n.data.subgroup]>"u"?!0:!!this.subgroupVisibility[n.data.subgroup])})}}_isGroupVisible(e,s){return this.top<=e.body.domProps.centerContainer.height-e.body.domProps.scrollTop+s.axis&&this.top+this.height+s.axis>=-e.body.domProps.scrollTop}_calculateHeight(e){let s,n;if(this.heightMode==="fixed"?n=m.toArray(this.items):n=this.visibleItems,n.length>0){let r=n[0].top,o=n[0].top+n[0].height;if(m.forEach(n,a=>{r=Math.min(r,a.top),o=Math.max(o,a.top+a.height)}),r>e.axis){const a=r-e.axis;o-=a,m.forEach(n,l=>{l.top-=a})}s=Math.ceil(o+e.item.vertical/2),this.heightMode!=="fitItems"&&(s=Math.max(s,this.props.label.height))}else s=this.props.label.height;return s}show(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}hide(){const e=this.dom.label;e.parentNode&&e.parentNode.removeChild(e);const s=this.dom.foreground;s.parentNode&&s.parentNode.removeChild(s);const n=this.dom.background;n.parentNode&&n.parentNode.removeChild(n);const r=this.dom.axis;r.parentNode&&r.parentNode.removeChild(r)}add(e){if(this.items[e.id]=e,e.setParent(this),this.stackDirty=!0,e.data.subgroup!==void 0&&(this._addToSubgroup(e),this.orderSubgroups()),!this.visibleItems.includes(e)){const s=this.itemSet.body.range;this._checkIfVisible(e,this.visibleItems,s)}}_addToSubgroup(e,s=e.data.subgroup){s!=null&&this.subgroups[s]===void 0&&(this.subgroups[s]={height:0,top:0,start:e.data.start,end:e.data.end||e.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[s]||!1},this.subgroupIndex++),new Date(e.data.start)<new Date(this.subgroups[s].start)&&(this.subgroups[s].start=e.data.start);const n=e.data.end||e.data.start;new Date(n)>new Date(this.subgroups[s].end)&&(this.subgroups[s].end=n),this.subgroups[s].items.push(e)}_updateSubgroupsSizes(){const e=this;if(e.subgroups)for(const s in e.subgroups){const n=e.subgroups[s].items[0].data.end||e.subgroups[s].items[0].data.start;let r=e.subgroups[s].items[0].data.start,o=n-1;e.subgroups[s].items.forEach(a=>{new Date(a.data.start)<new Date(r)&&(r=a.data.start);const l=a.data.end||a.data.start;new Date(l)>new Date(o)&&(o=l)}),e.subgroups[s].start=r,e.subgroups[s].end=new Date(o-1)}}orderSubgroups(){if(this.subgroupOrderer!==void 0){const e=[];if(typeof this.subgroupOrderer=="string"){for(const s in this.subgroups)e.push({subgroup:s,sortField:this.subgroups[s].items[0].data[this.subgroupOrderer]});e.sort((s,n)=>s.sortField-n.sortField)}else if(typeof this.subgroupOrderer=="function"){for(const s in this.subgroups)e.push(this.subgroups[s].items[0].data);e.sort(this.subgroupOrderer)}if(e.length>0)for(let s=0;s<e.length;s++)this.subgroups[e[s].subgroup].index=s}}_resetSubgroups(){for(const e in this.subgroups)this.subgroups.hasOwnProperty(e)&&(this.subgroups[e].visible=!1,this.subgroups[e].height=0)}remove(e){delete this.items[e.id],e.setParent(null),this.stackDirty=!0;const s=this.visibleItems.indexOf(e);s!=-1&&this.visibleItems.splice(s,1),e.data.subgroup!==void 0&&(this._removeFromSubgroup(e),this.orderSubgroups())}_removeFromSubgroup(e,s=e.data.subgroup){if(s!=null){const n=this.subgroups[s];if(n){const r=n.items.indexOf(e);r>=0&&(n.items.splice(r,1),n.items.length?this._updateSubgroupsSizes():delete this.subgroups[s])}}}removeFromDataSet(e){this.itemSet.removeItem(e.id)}order(){const e=m.toArray(this.items),s=[],n=[];for(let r=0;r<e.length;r++)e[r].data.end!==void 0&&n.push(e[r]),s.push(e[r]);this.orderedItems={byStart:s,byEnd:n},hb(this.orderedItems.byStart),db(this.orderedItems.byEnd)}_updateItemsInRange(e,s,n){const r=[],o={};if(!this.isVisible&&this.groupId!=Sa.BACKGROUND){for(let v=0;v<s.length;v++){var a=s[v];a.displayed&&a.hide()}return r}const l=(n.end-n.start)/4,h=n.start-l,d=n.end+l,u=v=>v<h?-1:v<=d?0:1,c=v=>{const{start:_,end:D}=v;return D<h?-1:_<=d?0:1};if(s.length>0)for(let v=0;v<s.length;v++)this._checkIfVisibleWithReference(s[v],r,o,n);const f=m.binarySearchCustom(e.byStart,u,"data","start");if(this._traceVisible(f,e.byStart,r,o,v=>v.data.start<h||v.data.start>d),this.checkRangedItems==!0){this.checkRangedItems=!1;for(let v=0;v<e.byEnd.length;v++)this._checkIfVisibleWithReference(e.byEnd[v],r,o,n)}else{const v=m.binarySearchCustom(e.byEnd,c,"data");this._traceVisible(v,e.byEnd,r,o,_=>_.data.end<h||_.data.start>d)}const p={};let g=0;for(let v=0;v<r.length;v++){const _=r[v];_.displayed||(p[v]=_.redraw(!0),g=p[v].length)}if(g>0)for(let v=0;v<g;v++)m.forEach(p,_=>{_[v]()});for(let v=0;v<r.length;v++)r[v].repositionX();return r}_traceVisible(e,s,n,r,o){if(e!=-1){for(let a=e;a>=0;a--){let l=s[a];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&r[l.id]===void 0&&(r[l.id]=!0,n.push(l))}for(let a=e+1;a<s.length;a++){let l=s[a];if(o(l))break;!(l.isCluster&&!l.hasItems())&&!l.cluster&&r[l.id]===void 0&&(r[l.id]=!0,n.push(l))}}}_checkIfVisible(e,s,n){e.isVisible(n)?(e.displayed||e.show(),e.repositionX(),s.push(e)):e.displayed&&e.hide()}_checkIfVisibleWithReference(e,s,n,r){e.isVisible(r)?n[e.id]===void 0&&(n[e.id]=!0,s.push(e)):e.displayed&&e.hide()}_updateClustersInRange(e,s,n){const r=[],o={};if(s.length>0)for(let u=0;u<s.length;u++)this._checkIfVisibleWithReference(s[u],r,o,n);for(let u=0;u<e.byStart.length;u++)this._checkIfVisibleWithReference(e.byStart[u],r,o,n);for(let u=0;u<e.byEnd.length;u++)this._checkIfVisibleWithReference(e.byEnd[u],r,o,n);const a={};let l=0;for(let u=0;u<r.length;u++){const c=r[u];c.displayed||(a[u]=c.redraw(!0),l=a[u].length)}if(l>0)for(var d=0;d<l;d++)m.forEach(a,function(u){u[d]()});for(let u=0;u<r.length;u++)r[u].repositionX();return r}changeSubgroup(e,s,n){this._removeFromSubgroup(e,s),this._addToSubgroup(e,n),this.orderSubgroups()}dispose(){this.hide();let e;for(;e=this._disposeCallbacks.pop();)e()}}class Bh extends Ir{constructor(e,s,n){super(e,s,n),this.width=0,this.height=0,this.top=0,this.left=0}redraw(e,s,n){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,e),this.width=this.dom.background.offsetWidth,this.dom.background.style.height="0";for(let o=0,a=this.visibleItems.length;o<a;o++)this.visibleItems[o].repositionY(s);return!1}show(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}class qi{constructor(e,s,n){this.id=null,this.parent=null,this.data=e,this.dom=null,this.conversion=s||{},this.defaultOptions={locales:Ui,locale:"en"},this.options=m.extend({},this.defaultOptions,n),this.options.locales=m.extend({},Ui,this.options.locales);const r=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(o=>{this.options.locales[o]=m.extend({},r,this.options.locales[o])}),this.selected=!1,this.displayed=!1,this.groupShowing=!0,this.selectable=n&&n.selectable||!1,this.dirty=!0,this.top=null,this.right=null,this.left=null,this.width=null,this.height=null,this.setSelectability(e),this.editable=null,this._updateEditStatus()}select(){this.selectable&&(this.selected=!0,this.dirty=!0,this.displayed&&this.redraw())}unselect(){this.selected=!1,this.dirty=!0,this.displayed&&this.redraw()}setData(e){e.group!=null&&this.data.group!=e.group&&this.parent!=null&&this.parent.itemSet._moveToGroup(this,e.group),this.setSelectability(e),this.parent&&(this.parent.stackDirty=!0),e.subgroup!=null&&this.data.subgroup!=e.subgroup&&this.parent!=null&&this.parent.changeSubgroup(this,this.data.subgroup,e.subgroup),this.data=e,this._updateEditStatus(),this.dirty=!0,this.displayed&&this.redraw()}setSelectability(e){e&&(this.selectable=typeof e.selectable>"u"?!0:!!e.selectable)}setParent(e){this.displayed?(this.hide(),this.parent=e,this.parent&&this.show()):this.parent=e}isVisible(e){return!1}show(){return!1}hide(){return!1}redraw(){}repositionX(){}repositionY(){}_repaintDragCenter(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){const e=this,s=document.createElement("div");s.className="vis-drag-center",s.dragCenterItem=this,this.hammerDragCenter=new ke(s),this.hammerDragCenter.on("tap",n=>{e.parent.itemSet.body.emitter.emit("click",{event:n,item:e.id})}),this.hammerDragCenter.on("doubletap",n=>{n.stopPropagation(),e.parent.itemSet._onUpdateItem(e),e.parent.itemSet.body.emitter.emit("doubleClick",{event:n,item:e.id})}),this.hammerDragCenter.on("panstart",n=>{n.stopPropagation(),e.parent.itemSet._onDragStart(n)}),this.hammerDragCenter.on("panmove",e.parent.itemSet._onDrag.bind(e.parent.itemSet)),this.hammerDragCenter.on("panend",e.parent.itemSet._onDragEnd.bind(e.parent.itemSet)),this.hammerDragCenter.get("press").set({time:1e4}),this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(s,this.dom.dragLeft):this.dom.box.appendChild(s):this.dom.point&&this.dom.point.appendChild(s),this.dom.dragCenter=s}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=null))}_repaintDeleteButton(e){const s=(this.options.editable.overrideItems||this.editable==null)&&this.options.editable.remove||!this.options.editable.overrideItems&&this.editable!=null&&this.editable.remove;if(this.selected&&s&&!this.dom.deleteButton){const n=this,r=document.createElement("div");this.options.rtl?r.className="vis-delete-rtl":r.className="vis-delete";let o=this.options.locales[this.options.locale];o||(this.warned||(console.warn(`WARNING: options.locales['${this.options.locale}'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization`),this.warned=!0),o=this.options.locales.en),r.title=o.deleteSelected,this.hammerDeleteButton=new ke(r).on("tap",a=>{a.stopPropagation(),n.parent.removeFromDataSet(n)}),e.appendChild(r),this.dom.deleteButton=r}else(!this.selected||!s)&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}_repaintOnItemUpdateTimeTooltip(e){if(!this.options.tooltipOnItemUpdateTime)return;const s=(this.options.editable.updateTime||this.data.editable===!0)&&this.data.editable!==!1;if(this.selected&&s&&!this.dom.onItemUpdateTimeTooltip){const n=document.createElement("div");n.className="vis-onUpdateTime-tooltip",e.appendChild(n),this.dom.onItemUpdateTimeTooltip=n}else!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);if(this.dom.onItemUpdateTimeTooltip){this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%";const n=50,r=this.parent.itemSet.body.domProps.scrollTop;let o;this.options.orientation.item=="top"?o=this.top:o=this.parent.height-this.top-this.height,o+this.parent.top-n<-r?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top=`${this.height+2}px`):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom=`${this.height+2}px`);let l,h;this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?(h=this.options.tooltipOnItemUpdateTime.template.bind(this),l=h(this.data)):(l=`start: ${Ae(this.data.start).format("MM/DD/YYYY hh:mm")}`,this.data.end&&(l+=`<br> end: ${Ae(this.data.end).format("MM/DD/YYYY hh:mm")}`)),this.dom.onItemUpdateTimeTooltip.innerHTML=m.xss(l)}}_getItemData(){return this.parent.itemSet.itemsData.get(this.id)}_updateContents(e){let s,n,r,o,a;const l=this._getItemData(),d=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate?(a=this.options.visibleFrameTemplate.bind(this),o=m.xss(a(l,d))):o="",d){if(o instanceof Object&&!(o instanceof Element))a(l,d);else if(n=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(o),n){if(o instanceof Element)d.innerHTML="",d.appendChild(o);else if(o!=null)d.innerHTML=m.xss(o);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error(`Property "content" missing in item ${this.id}`);this.itemVisibleFrameContent=o}}if(this.options.template?(r=this.options.template.bind(this),s=r(l,e,this.data)):s=this.data.content,s instanceof Object&&!(s instanceof Element))r(l,e);else if(n=this._contentToString(this.content)!==this._contentToString(s),n){if(s instanceof Element)e.innerHTML="",e.appendChild(s);else if(s!=null)e.innerHTML=m.xss(s);else if(!(this.data.type=="background"&&this.data.content===void 0))throw new Error(`Property "content" missing in item ${this.id}`);this.content=s}}_updateDataAttributes(e){if(this.options.dataAttributes&&this.options.dataAttributes.length>0){let s=[];if(Array.isArray(this.options.dataAttributes))s=this.options.dataAttributes;else if(this.options.dataAttributes=="all")s=Object.keys(this.data);else return;for(const n of s){const r=this.data[n];r!=null?e.setAttribute(`data-${n}`,r):e.removeAttribute(`data-${n}`)}}}_updateStyle(e){this.style&&(m.removeCssText(e,this.style),this.style=null),this.data.style&&(m.addCssText(e,this.data.style),this.style=this.data.style)}_contentToString(e){return typeof e=="string"?e:e&&"outerHTML"in e?e.outerHTML:e}_updateEditStatus(){this.options&&(typeof this.options.editable=="boolean"?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:typeof this.options.editable=="object"&&(this.editable={},m.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.options.editable))),(!this.options||!this.options.editable||this.options.editable.overrideItems!==!0)&&this.data&&(typeof this.data.editable=="boolean"?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:typeof this.data.editable=="object"&&(this.editable={},m.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}getWidthLeft(){return 0}getWidthRight(){return 0}getTitle(){return this.options.tooltip&&this.options.tooltip.template?this.options.tooltip.template.bind(this)(this._getItemData(),this.data):this.data.title}}qi.prototype.stack=!0;class vb extends qi{constructor(e,s,n){if(super(e,s,n),this.props={dot:{width:0,height:0},line:{width:0,height:0}},e&&e.start==null)throw new Error(`Property "start" missing in item ${e}`)}isVisible(e){if(this.cluster)return!1;let s;const n=this.data.align||this.options.align,r=this.width*e.getMillisecondsPerPixel();return n=="right"?s=this.data.start.getTime()>e.start&&this.data.start.getTime()-r<e.end:n=="left"?s=this.data.start.getTime()+r>e.start&&this.data.start.getTime()<e.end:s=this.data.start.getTime()+r/2>e.start&&this.data.start.getTime()-r/2<e.end,s}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const s=this.parent.dom.foreground;if(!s)throw new Error("Cannot redraw item: parent has no foreground container element");s.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){const s=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");s.appendChild(this.dom.dot)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,s=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=`vis-item vis-box${s}`,this.dom.line.className=`vis-item vis-line${s}`,this.dom.dot.className=`vis-item vis-dot${s}`}}_getDomComponentsSizes(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.props.dot.height=e.dot.height,this.props.dot.width=e.dot.width,this.props.line.width=e.line.width,this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.box)}redraw(e){let s;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(s=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(s)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(o=>{r=o()}),r}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom;e.box.remove?e.box.remove():e.box.parentNode&&e.box.parentNode.removeChild(e.box),e.line.remove?e.line.remove():e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.remove?e.dot.remove():e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot),this.displayed=!1}}repositionXY(){const e=this.options.rtl,s=(n,r,o,a=!1)=>{if(r===void 0&&o===void 0)return;const l=a?r*-1:r;if(o===void 0){n.style.transform=`translateX(${l}px)`;return}if(r===void 0){n.style.transform=`translateY(${o}px)`;return}n.style.transform=`translate(${l}px, ${o}px)`};s(this.dom.box,this.boxX,this.boxY,e),s(this.dom.dot,this.dotX,this.dotY,e),s(this.dom.line,this.lineX,this.lineY,e)}repositionX(){const e=this.conversion.toScreen(this.data.start),s=this.data.align===void 0?this.options.align:this.data.align,n=this.props.line.width,r=this.props.dot.width;s=="right"?(this.boxX=e-this.width,this.lineX=e-n,this.dotX=e-n/2-r/2):s=="left"?(this.boxX=e,this.lineX=e,this.dotX=e+n/2-r/2):(this.boxX=e-this.width/2,this.lineX=this.options.rtl?e-n:e-n/2,this.dotX=e-r/2),this.options.rtl?this.right=this.boxX:this.left=this.boxX,this.repositionXY()}repositionY(){const e=this.options.orientation.item,s=this.dom.line.style;if(e=="top"){const n=this.parent.top+this.top+1;this.boxY=this.top||0,s.height=`${n}px`,s.bottom="",s.top="0"}else{const r=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top;this.boxY=this.parent.height-this.top-(this.height||0),s.height=`${r}px`,s.top="",s.bottom="0"}this.dotY=-this.props.dot.height/2,this.repositionXY()}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}}class bb extends qi{constructor(e,s,n){if(super(e,s,n),this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}},e&&e.start==null)throw new Error(`Property "start" missing in item ${e}`)}isVisible(e){if(this.cluster)return!1;const s=this.width*e.getMillisecondsPerPixel();return this.data.start.getTime()+s>e.start&&this.data.start<e.end}_createDomElement(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.point)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.point),this._updateStyle(this.dom.point);const e=this.editable.updateTime||this.editable.updateGroup,s=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.point.className=`vis-item vis-point${s}`,this.dom.dot.className=`vis-item vis-dot${s}`}}_getDomComponentsSizes(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}_updateDomComponentsSizes(e){this.props.dot.width=e.dot.width,this.props.dot.height=e.dot.height,this.props.content.height=e.content.height,this.options.rtl?this.dom.content.style.marginRight=`${this.props.dot.width/2}px`:this.dom.content.style.marginLeft=`${this.props.dot.width/2}px`,this.width=e.point.width,this.height=e.point.height,this.dom.dot.style.top=`${(this.height-this.props.dot.height)/2}px`;const s=this.props.dot.width,n=this.options.rtl?s/2:s/2*-1;this.dom.dot.style.transform=`translateX(${n}px`,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.point),this._repaintDragCenter(),this._repaintDeleteButton(this.dom.point)}redraw(e){let s;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(s=this._getDomComponentsSizes())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(s)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(o=>{r=o()}),r}}repositionXY(){const e=this.options.rtl;((n,r,o,a=!1)=>{if(r===void 0&&o===void 0)return;const l=a?r*-1:r;if(o===void 0){n.style.transform=`translateX(${l}px)`;return}if(r===void 0){n.style.transform=`translateY(${o}px)`;return}n.style.transform=`translate(${l}px, ${o}px)`})(this.dom.point,this.pointX,this.pointY,e)}show(e){if(!this.displayed)return this.redraw(e)}hide(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}repositionX(){const e=this.conversion.toScreen(this.data.start);this.pointX=e,this.options.rtl?this.right=e-this.props.dot.width:this.left=e-this.props.dot.width,this.repositionXY()}repositionY(){this.options.orientation.item=="top"?this.pointY=this.top:this.pointY=this.parent.height-this.top-this.height,this.repositionXY()}getWidthLeft(){return this.props.dot.width}getWidthRight(){return this.props.dot.width}}class ci extends qi{constructor(e,s,n){if(super(e,s,n),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error(`Property "start" missing in item ${e.id}`);if(e.end==null)throw new Error(`Property "end" missing in item ${e.id}`)}}isVisible(e){return this.cluster?!1:this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw item: parent has no foreground container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.editable.updateTime||this.editable.updateGroup,s=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(e?" vis-editable":" vis-readonly");this.dom.box.className=this.baseClassName+s,this.dom.content.style.maxWidth="none"}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.frame).overflow!=="hidden",this.whiteSpace=window.getComputedStyle(this.dom.content).whiteSpace!=="nowrap",{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=e.box.height,this.dom.content.style.maxWidth="",this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box),this._repaintDeleteButton(this.dom.box),this._repaintDragCenter(),this._repaintDragLeft(),this._repaintDragRight()}redraw(e){let s;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(s=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(s)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(o=>{r=o()}),r}}show(e){if(!this.displayed)return this.redraw(e)}hide(){if(this.displayed){const e=this.dom.box;e.parentNode&&e.parentNode.removeChild(e),this.displayed=!1}}repositionX(e){const s=this.parent.width;let n=this.conversion.toScreen(this.data.start),r=this.conversion.toScreen(this.data.end);const o=this.data.align===void 0?this.options.align:this.data.align;let a,l;this.data.limitSize!==!1&&(e===void 0||e===!0)&&(n<-s&&(n=-s),r>2*s&&(r=2*s));const h=Math.max(Math.round((r-n)*1e3)/1e3,1);switch(this.overflow?(this.options.rtl?this.right=n:this.left=n,this.width=h+this.props.content.width,l=this.props.content.width):(this.options.rtl?this.right=n:this.left=n,this.width=h,l=Math.min(r-n,this.props.content.width)),this.options.rtl?this.dom.box.style.transform=`translateX(${this.right*-1}px)`:this.dom.box.style.transform=`translateX(${this.left}px)`,this.dom.box.style.width=`${h}px`,this.whiteSpace&&(this.height=this.dom.box.offsetHeight),o){case"left":this.dom.content.style.transform="translateX(0)";break;case"right":if(this.options.rtl){const d=Math.max(h-l,0)*-1;this.dom.content.style.transform=`translateX(${d}px)`}else this.dom.content.style.transform=`translateX(${Math.max(h-l,0)}px)`;break;case"center":if(this.options.rtl){const d=Math.max((h-l)/2,0)*-1;this.dom.content.style.transform=`translateX(${d}px)`}else this.dom.content.style.transform=`translateX(${Math.max((h-l)/2,0)}px)`;break;default:if(this.overflow?r>0?a=Math.max(-n,0):a=-l:n<0?a=-n:a=0,this.options.rtl){const d=a*-1;this.dom.content.style.transform=`translateX(${d}px)`}else this.dom.content.style.transform=`translateX(${a}px)`}}repositionY(){const e=this.options.orientation.item,s=this.dom.box;e=="top"?s.style.top=`${this.top}px`:s.style.top=`${this.parent.height-this.top-this.height}px`}_repaintDragLeft(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){const e=document.createElement("div");e.className="vis-drag-left",e.dragLeftItem=this,this.dom.box.appendChild(e),this.dom.dragLeft=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}_repaintDragRight(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){const e=document.createElement("div");e.className="vis-drag-right",e.dragRightItem=this,this.dom.box.appendChild(e),this.dom.dragRight=e}else!this.selected&&!this.options.itemsAlwaysDraggable.range&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}ci.prototype.baseClassName="vis-item vis-range";class yi extends qi{constructor(e,s,n){if(super(e,s,n),this.props={content:{width:0}},this.overflow=!1,e){if(e.start==null)throw new Error(`Property "start" missing in item ${e.id}`);if(e.end==null)throw new Error(`Property "end" missing in item ${e.id}`)}}isVisible(e){return this.data.start<e.end&&this.data.end>e.start}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const e=this.parent.dom.background;if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.box)}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box);const e=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"");this.dom.box.className=this.baseClassName+e}}_getDomComponentsSizes(){return this.overflow=window.getComputedStyle(this.dom.content).overflow!=="hidden",{content:{width:this.dom.content.offsetWidth}}}_updateDomComponentsSizes(e){this.props.content.width=e.content.width,this.height=0,this.dirty=!1}_repaintDomAdditionals(){}redraw(e){let s;const n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),()=>{this.dirty&&(s=this._getDomComponentsSizes.bind(this)())},()=>{this.dirty&&this._updateDomComponentsSizes.bind(this)(s)},this._repaintDomAdditionals.bind(this)];if(e)return n;{let r;return n.forEach(o=>{r=o()}),r}}repositionY(e){let s;const n=this.options.orientation.item;if(this.data.subgroup!==void 0){const r=this.data.subgroup;this.dom.box.style.height=`${this.parent.subgroups[r].height}px`,n=="top"?this.dom.box.style.top=`${this.parent.top+this.parent.subgroups[r].top}px`:this.dom.box.style.top=`${this.parent.top+this.parent.height-this.parent.subgroups[r].top-this.parent.subgroups[r].height}px`,this.dom.box.style.bottom=""}else this.parent instanceof Bh?(s=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,this.parent.itemSet.body.domProps.centerContainer.height),this.dom.box.style.bottom=n=="bottom"?"0":"",this.dom.box.style.top=n=="top"?"0":""):(s=this.parent.height,this.dom.box.style.top=`${this.parent.top}px`,this.dom.box.style.bottom="");this.dom.box.style.height=`${s}px`}}yi.prototype.baseClassName="vis-item vis-background";yi.prototype.stack=!1;yi.prototype.show=ci.prototype.show;yi.prototype.hide=ci.prototype.hide;yi.prototype.repositionX=ci.prototype.repositionX;class _b{constructor(e,s){this.container=e,this.overflowMethod=s||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}setPosition(e,s){this.x=parseInt(e),this.y=parseInt(s)}setText(e){e instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(e)):this.frame.innerHTML=m.xss(e)}show(e){if(e===void 0&&(e=!0),e===!0){var s=this.frame.clientHeight,n=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,o=this.frame.parentNode.clientWidth,a=0,l=0;if(this.overflowMethod=="flip"||this.overflowMethod=="none"){let h=!1,d=!0;this.overflowMethod=="flip"&&(this.y-s<this.padding&&(d=!1),this.x+n>o-this.padding&&(h=!0)),h?a=this.x-n:a=this.x,d?l=this.y-s:l=this.y}else l=this.y-s,l+s+this.padding>r&&(l=r-s-this.padding),l<this.padding&&(l=this.padding),a=this.x,a+n+this.padding>o&&(a=o-n-this.padding),a<this.padding&&(a=this.padding);this.frame.style.left=a+"px",this.frame.style.top=l+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}hide(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}destroy(){this.frame.parentNode.removeChild(this.frame)}}class Zn extends qi{constructor(e,s,n){const r=Object.assign({},{fitOnDoubleClick:!0},n,{editable:!1});if(super(e,s,r),this.props={content:{width:0,height:0}},!e||e.uiItems==null)throw new Error('Property "uiItems" missing in item '+e.id);this.id=ri(),this.group=e.group,this._setupRange(),this.emitter=this.data.eventEmitter,this.range=this.data.range,this.attached=!1,this.isCluster=!0,this.data.isCluster=!0}hasItems(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}setUiItems(e){this.detach(),this.data.uiItems=e,this._setupRange(),this.attach()}isVisible(e){const s=this.data.end?this.data.end-this.data.start:0,n=this.width*e.getMillisecondsPerPixel(),r=Math.max(this.data.start.getTime()+s,this.data.start.getTime()+n);return this.data.start<e.end&&r>e.start&&this.hasItems()}getData(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}redraw(e){var s,n=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),(function(){this.dirty&&(s=this._getDomComponentsSizes())}).bind(this),(function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(s)}).bind(this),this._repaintDomAdditionals.bind(this)];if(e)return n;var r;return n.forEach(function(o){r=o()}),r}show(){this.displayed||this.redraw()}hide(){if(this.displayed){var e=this.dom;e.box.parentNode&&e.box.parentNode.removeChild(e.box),this.options.showStipes&&(e.line.parentNode&&e.line.parentNode.removeChild(e.line),e.dot.parentNode&&e.dot.parentNode.removeChild(e.dot)),this.displayed=!1}}repositionX(){let e=this.conversion.toScreen(this.data.start),s=this.data.end?this.conversion.toScreen(this.data.end):0;if(s)this.repositionXWithRanges(e,s);else{let n=this.data.align===void 0?this.options.align:this.data.align;this.repositionXWithoutRanges(e,n)}this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",this._isStipeVisible()&&this.repositionStype(e,s))}repositionStype(e,s){this.dom.line.style.display="block",this.dom.dot.style.display="block";const n=this.dom.line.offsetWidth,r=this.dom.dot.offsetWidth;if(s){const o=n+e+(s-e)/2,a=o-r/2,l=this.options.rtl?o*-1:o,h=this.options.rtl?a*-1:a;this.dom.line.style.transform=`translateX(${l}px)`,this.dom.dot.style.transform=`translateX(${h}px)`}else{const o=this.options.rtl?e*-1:e,a=this.options.rtl?(e-r/2)*-1:e-r/2;this.dom.line.style.transform=`translateX(${o}px)`,this.dom.dot.style.transform=`translateX(${a}px)`}}repositionXWithoutRanges(e,s){s=="right"?this.options.rtl?(this.right=e-this.width,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width,this.dom.box.style.left=this.left+"px"):s=="left"?this.options.rtl?(this.right=e,this.dom.box.style.right=this.right+"px"):(this.left=e,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=e-this.width/2,this.dom.box.style.right=this.right+"px"):(this.left=e-this.width/2,this.dom.box.style.left=this.left+"px")}repositionXWithRanges(e,s){let n=Math.round(Math.max(s-e+.5,1));this.options.rtl?this.right=e:this.left=e,this.width=Math.max(n,this.minWidth||0),this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px",this.dom.box.style.width=n+"px"}repositionY(){var e=this.options.orientation.item,s=this.dom.box;if(e=="top"?s.style.top=(this.top||0)+"px":s.style.top=(this.parent.height-this.top-this.height||0)+"px",this.options.showStipes){if(e=="top")this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom="";else{var n=this.parent.itemSet.props.height,r=n-this.parent.top-this.parent.height+this.top;this.dom.line.style.top=n-r+"px",this.dom.line.style.bottom="0"}this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px"}}getWidthLeft(){return this.width/2}getWidthRight(){return this.width/2}move(){this.repositionX(),this.repositionY()}attach(){for(let e of this.data.uiItems)e.cluster=this;this.data.items=this.data.uiItems.map(e=>e.data),this.attached=!0,this.dirty=!0}detach(e=!1){if(this.hasItems()){for(let s of this.data.uiItems)delete s.cluster;this.attached=!1,e&&this.group&&(this.group.remove(this),this.group=null),this.data.items=[],this.dirty=!0}}_onDoubleClick(){this._fit()}_setupRange(){const e=this.data.uiItems.map(r=>({start:r.data.start.valueOf(),end:r.data.end?r.data.end.valueOf():r.data.start.valueOf()}));this.data.min=Math.min(...e.map(r=>Math.min(r.start,r.end||r.start))),this.data.max=Math.max(...e.map(r=>Math.max(r.start,r.end||r.start)));const n=this.data.uiItems.map(r=>r.center).reduce((r,o)=>r+o,0)/this.data.uiItems.length;this.data.uiItems.some(r=>r.data.end)?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):(this.data.start=new Date(n),this.data.end=null)}_getUiItems(){return this.data.uiItems&&this.data.uiItems.length?this.data.uiItems.filter(e=>e.cluster===this):[]}_createDomElement(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick&&(this.dom.box.ondblclick=Zn.prototype._onDoubleClick.bind(this)),this.dom.box["vis-item"]=this,this.dirty=!0)}_appendDomElement(){if(!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){const n=this.parent.dom.foreground;if(!n)throw new Error("Cannot redraw item: parent has no foreground container element");n.appendChild(this.dom.box)}const e=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!e)throw new Error("Cannot redraw item: parent has no background container element");e.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var s=this.parent.dom.axis;if(!e)throw new Error("Cannot redraw item: parent has no axis container element");s.appendChild(this.dom.dot)}}this.displayed=!0}_updateDirtyDomComponents(){if(this.dirty){this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box);const e=this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly";this.dom.box.className="vis-item "+e,this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),this.data.end&&(this.dom.content.style.maxWidth="none")}}_getDomComponentsSizes(){const e={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};return this.options.showStipes&&(e.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},e.line={width:this.dom.line.offsetWidth}),e}_updateDomComponentsSizes(e){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px",this.data.end?this.minWidth=e.box.width:this.width=e.box.width,this.height=e.box.height,this.options.rtl?this.dom.box.style.right=e.previous.right:this.dom.box.style.left=e.previous.left,this.dirty=!1}_repaintDomAdditionals(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}_isStipeVisible(){return this.minWidth>=this.width||!this.data.end}_getFitRange(){const e=.05*(this.data.max-this.data.min)/2;return{fitStart:this.data.min-e,fitEnd:this.data.max+e}}_fit(){if(this.emitter){const{fitStart:e,fitEnd:s}=this._getFitRange(),n={start:new Date(e),end:new Date(s),animation:!0};this.emitter.emit("fit",n)}}_getItemData(){return this.data}}Zn.prototype.baseClassName="vis-item vis-range vis-cluster";const wb="__ungrouped__",xb="__background__",Sb={UNGROUPED:wb,BACKGROUND:xb};class Db{constructor(e){this.itemSet=e,this.groups={},this.cache={},this.cache[-1]=[]}createClusterItem(e,s,n){return new Zn(e,s,n)}setItems(e,s){this.items=e||[],this.dataChanged=!0,this.applyOnChangedLevel=!1,s&&s.applyOnChangedLevel&&(this.applyOnChangedLevel=s.applyOnChangedLevel)}updateData(){this.dataChanged=!0,this.applyOnChangedLevel=!1}getClusters(e,s,n){let{maxItems:r,clusterCriteria:o}=typeof n=="boolean"?{}:n;o||(o=()=>!0),r=r||1;let a=-1,l=2,h=0;if(s>0){if(s>=1)return[];a=Math.abs(Math.round(Math.log(100/s)/Math.log(l))),h=Math.abs(Math.pow(l,a))}if(this.dataChanged){const u=a!=this.cacheLevel;(this.applyOnChangedLevel?u:!0)&&(this._dropLevelsCache(),this._filterData())}this.cacheLevel=a;let d=this.cache[a];if(!d){d=[];for(let u in this.groups)if(this.groups.hasOwnProperty(u)){const c=this.groups[u],f=c.length;let p=0;for(;p<f;){let g=c[p],y=1,v=p-1;for(;v>=0&&g.center-c[v].center<h/2;)!c[v].cluster&&o(g.data,c[v].data)&&y++,v--;let _=p+1;for(;_<c.length&&c[_].center-g.center<h/2;)o(g.data,c[_].data)&&y++,_++;let D=d.length-1;for(;D>=0&&g.center-d[D].center<h;)g.group==d[D].group&&o(g.data,d[D].data)&&y++,D--;if(y>r){const C=y-r+1,A=[];let M=p;for(;A.length<C&&M<c.length;)o(c[p].data,c[M].data)&&A.push(c[M]),M++;const E=this.itemSet.getGroupId(g.data),I=this.itemSet.groups[E]||this.itemSet.groups[Sb.UNGROUPED];let B=this._getClusterForItems(A,I,e,n);d.push(B),p+=C}else delete g.cluster,p+=1}}this.cache[a]=d}return d}_filterData(){const e={};this.groups=e;for(const s of Object.values(this.items)){const n=s.parent?s.parent.groupId:"";let r=e[n];r||(r=[],e[n]=r),r.push(s),s.data.start&&(s.data.end?s.center=(s.data.start.valueOf()+s.data.end.valueOf())/2:s.center=s.data.start.valueOf())}for(let s in e)e.hasOwnProperty(s)&&e[s].sort((n,r)=>n.center-r.center);this.dataChanged=!1}_getClusterForItems(e,s,n,r){const o=(n||[]).map(p=>({cluster:p,itemsIds:new Set(p.data.uiItems.map(g=>g.id))}));let a;if(o.length){for(let p of o)if(p.itemsIds.size===e.length&&e.every(g=>p.itemsIds.has(g.id))){a=p.cluster;break}}if(a)return a.setUiItems(e),a.group!==s&&(a.group&&a.group.remove(a),s&&(s.add(a),a.group=s)),a;let l=r.titleTemplate||"";const h={toScreen:this.itemSet.body.util.toScreen,toTime:this.itemSet.body.util.toTime},d=l.replace(/{count}/,e.length),u='<div title="'+d+'">'+e.length+"</div>",c=Object.assign({},r,this.itemSet.options),f={content:u,title:d,group:s,uiItems:e,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range};return a=this.createClusterItem(f,h,c),s&&(s.add(a),a.group=s),a.attach(),a}_dropLevelsCache(){this.cache={},this.cacheLevel=-1,this.cache[this.cacheLevel]=[]}}const _i="__ungrouped__",Ft="__background__";class fi extends $t{constructor(e,s){super(),this.body=e,this.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap(r,o,a){const l=o.order;o.order=r.order,r.order=l},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:ui.snap,onDropObjectOnItem(r,o,a){a(o)},onAdd(r,o){o(r)},onUpdate(r,o){o(r)},onMove(r,o){o(r)},onRemove(r,o){o(r)},onMoving(r,o){o(r)},onAddGroup(r,o){o(r)},onMoveGroup(r,o){o(r)},onRemoveGroup(r,o){o(r)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1},this.options=m.extend({},this.defaultOptions),this.options.rtl=s.rtl,this.options.onTimeout=s.onTimeout,this.conversion={toScreen:e.util.toScreen,toTime:e.util.toTime},this.dom={},this.props={},this.hammer=null;const n=this;this.itemsData=null,this.groupsData=null,this.itemsSettingTime=null,this.initialItemSetDrawn=!1,this.userContinueNotBail=null,this.sequentialSelection=!1,this.itemListeners={add(r,o,a){n._onAdd(o.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()},update(r,o,a){n._onUpdate(o.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()},remove(r,o,a){n._onRemove(o.items),n.options.cluster&&n.clusterGenerator.setItems(n.items,{applyOnChangedLevel:!1}),n.redraw()}},this.groupListeners={add(r,o,a){if(n._onAddGroups(o.items),n.groupsData&&n.groupsData.length>0){const l=n.groupsData.getDataSet();l.get().forEach(h=>{if(h.nestedGroups){h.showNested!=!1&&(h.showNested=!0);let d=[];h.nestedGroups.forEach(u=>{const c=l.get(u);c&&(c.nestedInGroup=h.id,h.showNested==!1&&(c.visible=!1),d=d.concat(c))}),l.update(d,a)}})}},update(r,o,a){n._onUpdateGroups(o.items)},remove(r,o,a){n._onRemoveGroups(o.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.popup=null,this.popupTimer=null,this.touchParams={},this.groupTouchParams={group:null,isDragging:!1},this._create(),this.setOptions(s),this.clusters=[]}_create(){const e=document.createElement("div");e.className="vis-itemset",e["vis-itemset"]=this,this.dom.frame=e;const s=document.createElement("div");s.className="vis-background",e.appendChild(s),this.dom.background=s;const n=document.createElement("div");n.className="vis-foreground",e.appendChild(n),this.dom.foreground=n;const r=document.createElement("div");r.className="vis-axis",this.dom.axis=r;const o=document.createElement("div");o.className="vis-labelset",this.dom.labelSet=o,this._updateUngrouped();const a=new Bh(Ft,null,this);a.show(),this.groups[Ft]=a,this.hammer=new ke(this.body.dom.centerContainer),this.hammer.on("hammer.input",l=>{l.isFirst&&this._onTouch(l)}),this.hammer.on("panstart",this._onDragStart.bind(this)),this.hammer.on("panmove",this._onDrag.bind(this)),this.hammer.on("panend",this._onDragEnd.bind(this)),this.hammer.get("pan").set({threshold:5,direction:ke.ALL}),this.hammer.get("press").set({time:1e4}),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("press",this._onMultiSelectItem.bind(this)),this.hammer.get("press").set({time:1e4}),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.options.rtl?this.groupHammer=new ke(this.body.dom.rightContainer):this.groupHammer=new ke(this.body.dom.leftContainer),this.groupHammer.on("tap",this._onGroupClick.bind(this)),this.groupHammer.on("panstart",this._onGroupDragStart.bind(this)),this.groupHammer.on("panmove",this._onGroupDrag.bind(this)),this.groupHammer.on("panend",this._onGroupDragEnd.bind(this)),this.groupHammer.get("pan").set({threshold:5,direction:ke.DIRECTION_VERTICAL}),this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this)),this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this)),this.body.dom.centerContainer.addEventListener("mousemove",this._onMouseMove.bind(this)),this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this)),this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this)),this.show()}setOptions(e){if(e){const s=["type","rtl","align","order","stack","stackSubgroups","selectable","multiselect","sequentialSelection","multiselectPerGroup","longSelectPressTime","groupOrder","dataAttributes","template","groupTemplate","visibleFrameTemplate","hide","snap","groupOrderSwap","showTooltips","tooltip","tooltipOnItemUpdateTime","groupHeightMode","onTimeout"];m.selectiveExtend(s,this.options,e),"itemsAlwaysDraggable"in e&&(typeof e.itemsAlwaysDraggable=="boolean"?(this.options.itemsAlwaysDraggable.item=e.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):typeof e.itemsAlwaysDraggable=="object"&&(m.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,e.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in e&&typeof e.sequentialSelection=="boolean"&&(this.options.sequentialSelection=e.sequentialSelection),"orientation"in e&&(typeof e.orientation=="string"?this.options.orientation.item=e.orientation==="top"?"top":"bottom":typeof e.orientation=="object"&&"item"in e.orientation&&(this.options.orientation.item=e.orientation.item)),"margin"in e&&(typeof e.margin=="number"?(this.options.margin.axis=e.margin,this.options.margin.item.horizontal=e.margin,this.options.margin.item.vertical=e.margin):typeof e.margin=="object"&&(m.selectiveExtend(["axis"],this.options.margin,e.margin),"item"in e.margin&&(typeof e.margin.item=="number"?(this.options.margin.item.horizontal=e.margin.item,this.options.margin.item.vertical=e.margin.item):typeof e.margin.item=="object"&&m.selectiveExtend(["horizontal","vertical"],this.options.margin.item,e.margin.item)))),["locale","locales"].forEach(r=>{r in e&&(this.options[r]=e[r])}),"editable"in e&&(typeof e.editable=="boolean"?(this.options.editable.updateTime=e.editable,this.options.editable.updateGroup=e.editable,this.options.editable.add=e.editable,this.options.editable.remove=e.editable,this.options.editable.overrideItems=!1):typeof e.editable=="object"&&m.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,e.editable)),"groupEditable"in e&&(typeof e.groupEditable=="boolean"?(this.options.groupEditable.order=e.groupEditable,this.options.groupEditable.add=e.groupEditable,this.options.groupEditable.remove=e.groupEditable):typeof e.groupEditable=="object"&&m.selectiveExtend(["order","add","remove"],this.options.groupEditable,e.groupEditable));const n=r=>{const o=e[r];if(o){if(typeof o!="function")throw new Error(`option ${r} must be a function ${r}(item, callback)`);this.options[r]=o}};["onDropObjectOnItem","onAdd","onUpdate","onRemove","onMove","onMoving","onAddGroup","onMoveGroup","onRemoveGroup"].forEach(n),e.cluster?(Object.assign(this.options,{cluster:e.cluster}),this.clusterGenerator||(this.clusterGenerator=new Db(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty()}}markDirty(e){this.groupIds=[],e&&(e.refreshItems&&m.forEach(this.items,s=>{s.dirty=!0,s.displayed&&s.redraw()}),e.restackGroups&&m.forEach(this.groups,(s,n)=>{n!==Ft&&(s.stackDirty=!0)}))}destroy(){this.clearPopupTimer(),this.hide(),this.setItems(null),this.setGroups(null),this.hammer&&this.hammer.destroy(),this.groupHammer&&this.groupHammer.destroy(),this.hammer=null,this.body=null,this.conversion=null}hide(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}show(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}setPopupTimer(e){if(this.clearPopupTimer(),e){const s=this.options.tooltip.delay||typeof this.options.tooltip.delay=="number"?this.options.tooltip.delay:500;this.popupTimer=setTimeout(function(){e.show()},s)}}clearPopupTimer(){this.popupTimer!=null&&(clearTimeout(this.popupTimer),this.popupTimer=null)}setSelection(e){e==null&&(e=[]),Array.isArray(e)||(e=[e]);const s=this.selection.filter(n=>e.indexOf(n)===-1);for(let n of s){const r=this.getItemById(n);r&&r.unselect()}this.selection=[...e];for(let n of e){const r=this.getItemById(n);r&&r.select()}}getSelection(){return this.selection.concat([])}getVisibleItems(){const e=this.body.range.getRange();let s,n;this.options.rtl?(s=this.body.util.toScreen(e.start),n=this.body.util.toScreen(e.end)):(n=this.body.util.toScreen(e.start),s=this.body.util.toScreen(e.end));const r=[];for(const o in this.groups)if(this.groups.hasOwnProperty(o)){const a=this.groups[o],l=a.isVisible?a.visibleItems:[];for(const h of l)this.options.rtl?h.right<n&&h.right+h.width>s&&r.push(h.id):h.left<s&&h.left+h.width>n&&r.push(h.id)}return r}getItemsAtCurrentTime(e){let s,n;this.options.rtl?(s=this.body.util.toScreen(e),n=this.body.util.toScreen(e)):(n=this.body.util.toScreen(e),s=this.body.util.toScreen(e));const r=[];for(const o in this.groups)if(this.groups.hasOwnProperty(o)){const a=this.groups[o],l=a.isVisible?a.visibleItems:[];for(const h of l)this.options.rtl?h.right<n&&h.right+h.width>s&&r.push(h.id):h.left<s&&h.left+h.width>n&&r.push(h.id)}return r}getVisibleGroups(){const e=[];for(const s in this.groups)this.groups.hasOwnProperty(s)&&this.groups[s].isVisible&&e.push(s);return e}getItemById(e){return this.items[e]||this.clusters.find(s=>s.id===e)}_deselect(e){const s=this.selection;for(let n=0,r=s.length;n<r;n++)if(s[n]==e){s.splice(n,1);break}}redraw(){const e=this.options.margin,s=this.body.range,n=m.option.asSize,r=this.options,o=r.orientation.item;let a=!1;const l=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top,this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left,l.className="vis-itemset",this.options.cluster&&this._clusterItems(),a=this._orderGroups()||a;const h=s.end-s.start,d=h!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth,u=s.start!=this.lastRangeStart,c=r.stack!=this.lastStack,f=r.stackSubgroups!=this.lastStackSubgroups,p=d||u||c||f;this.lastVisibleInterval=h,this.lastRangeStart=s.start,this.lastStack=r.stack,this.lastStackSubgroups=r.stackSubgroups,this.props.lastWidth=this.props.width;const g=this._firstGroup(),y={item:e.item,axis:e.axis},v={item:e.item,axis:e.item.vertical/2};let _=0;const D=e.axis+e.item.vertical;this.groups[Ft].redraw(s,v,p);const C={};let A=0;if(m.forEach(this.groups,(E,I)=>{if(I===Ft)return;const B=E==g?y:v,Ce=!0;C[I]=E.redraw(s,B,p,Ce),A=C[I].length}),A>0){const E={};for(let I=0;I<A;I++)m.forEach(C,(B,Ce)=>{E[Ce]=B[I]()});m.forEach(this.groups,(I,B)=>{if(B===Ft)return;a=E[B]||a,_+=I.height}),_=Math.max(_,D)}return _=Math.max(_,D),l.style.height=n(_),this.props.width=l.offsetWidth,this.props.height=_,this.dom.axis.style.top=n(o=="top"?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0",this.hammer.get("press").set({time:this.options.longSelectPressTime}),this.initialItemSetDrawn=!0,a=this._isResized()||a,a}_firstGroup(){const e=this.options.orientation.item=="top"?0:this.groupIds.length-1,s=this.groupIds[e];return this.groups[s]||this.groups[_i]||null}_updateUngrouped(){let e=this.groups[_i],s,n;if(this.groupsData){if(e){e.dispose(),delete this.groups[_i];for(n in this.items)if(this.items.hasOwnProperty(n)){s=this.items[n],s.parent&&s.parent.remove(s);const r=this.getGroupId(s.data),o=this.groups[r];o&&o.add(s)||s.hide()}}}else if(!e){e=new Ir(null,null,this),this.groups[_i]=e;for(n in this.items)this.items.hasOwnProperty(n)&&(s=this.items[n],e.add(s));e.show()}}getLabelSet(){return this.dom.labelSet}setItems(e){this.itemsSettingTime=new Date;const s=this;let n;const r=this.itemsData;if(!e)this.itemsData=null;else if(Pt(e))this.itemsData=Gi(e);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(r&&(m.forEach(this.itemListeners,(o,a)=>{r.off(a,o)}),r.dispose(),n=r.getIds(),this._onRemove(n)),this.itemsData){const o=this.id;m.forEach(this.itemListeners,(a,l)=>{s.itemsData.on(l,a,o)}),n=this.itemsData.getIds(),this._onAdd(n),this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}getItems(){return this.itemsData!=null?this.itemsData.rawDS:null}setGroups(e){const s=this;let n;if(this.groupsData&&(m.forEach(this.groupListeners,(r,o)=>{s.groupsData.off(o,r)}),n=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(n)),!e)this.groupsData=null;else if(Pt(e))this.groupsData=e;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){const r=this.groupsData.getDataSet();r.get().forEach(a=>{a.nestedGroups&&a.nestedGroups.forEach(l=>{const h=r.get(l);h.nestedInGroup=a.id,a.showNested==!1&&(h.visible=!1),r.update(h)})});const o=this.id;m.forEach(this.groupListeners,(a,l)=>{s.groupsData.on(l,a,o)}),n=this.groupsData.getIds(),this._onAddGroups(n)}this._updateUngrouped(),this._order(),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0})),this.body.emitter.emit("_change",{queue:!0})}getGroups(){return this.groupsData}removeItem(e){const s=this.itemsData.get(e);s&&this.options.onRemove(s,n=>{n&&this.itemsData.remove(e)})}_getType(e){return e.type||this.options.type||(e.end?"range":"box")}getGroupId(e){return this._getType(e)=="background"&&e.group==null?Ft:this.groupsData?e.group:_i}_onUpdate(e){const s=this;e.forEach(n=>{const r=s.itemsData.get(n);let o=s.items[n];const a=r?s._getType(r):null,l=fi.types[a];let h;if(o&&(!l||!(o instanceof l)?(h=o.selected,s._removeItem(o),o=null):s._updateItem(o,r)),!o&&r)if(l)o=new l(r,s.conversion,s.options),o.id=n,s._addItem(o),h&&(this.selection.push(n),o.select());else throw new TypeError(`Unknown item type "${a}"`)}),this._order(),this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this._clusterItems()),this.body.emitter.emit("_change",{queue:!0})}_onRemove(e){let s=0;const n=this;e.forEach(r=>{const o=n.items[r];o&&(s++,n._removeItem(o))}),s&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}_order(){m.forEach(this.groups,e=>{e.order()})}_onUpdateGroups(e){this._onAddGroups(e)}_onAddGroups(e){const s=this;e.forEach(n=>{const r=s.groupsData.get(n);let o=s.groups[n];if(o)o.setData(r);else{if(n==_i||n==Ft)throw new Error(`Illegal group id. ${n} is a reserved id.`);const a=Object.create(s.options);m.extend(a,{height:null}),o=new Ir(n,r,s),s.groups[n]=o;for(const l in s.items)if(s.items.hasOwnProperty(l)){const h=s.items[l];h.data.group==n&&o.add(h)}o.order(),o.show()}}),this.body.emitter.emit("_change",{queue:!0})}_onRemoveGroups(e){e.forEach(s=>{const n=this.groups[s];n&&(n.dispose(),delete this.groups[s])}),this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems()),this.markDirty({restackGroups:!!this.options.cluster}),this.body.emitter.emit("_change",{queue:!0})}_orderGroups(){if(this.groupsData){let e=this.groupsData.getIds({order:this.options.groupOrder});e=this._orderNestedGroups(e);const s=!m.equalArray(e,this.groupIds);if(s){const n=this.groups;e.forEach(r=>{n[r].hide()}),e.forEach(r=>{n[r].show()}),this.groupIds=e}return s}else return!1}_orderNestedGroups(e){function s(r,o){let a=[];return o.forEach(l=>{if(a.push(l),r.groupsData.get(l).nestedGroups){const d=r.groupsData.get({filter(u){return u.nestedInGroup==l},order:r.options.groupOrder}).map(u=>u.id);a=a.concat(s(r,d))}}),a}const n=e.filter(r=>!this.groupsData.get(r).nestedInGroup);return s(this,n)}_addItem(e){this.items[e.id]=e;const s=this.getGroupId(e.data),n=this.groups[s];n?n&&n.data&&n.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1,n&&n.add(e)}_updateItem(e,s){e.setData(s);const n=this.getGroupId(e.data),r=this.groups[n];r?r&&r.data&&r.data.showNested&&(e.groupShowing=!0):e.groupShowing=!1}_removeItem(e){e.hide(),delete this.items[e.id];const s=this.selection.indexOf(e.id);s!=-1&&this.selection.splice(s,1),e.parent&&e.parent.remove(e),this.popup!=null&&this.popup.hide()}_constructByEndArray(e){const s=[];for(let n=0;n<e.length;n++)e[n]instanceof ci&&s.push(e[n]);return s}_onTouch(e){this.touchParams.item=this.itemFromTarget(e),this.touchParams.dragLeftItem=e.target.dragLeftItem||!1,this.touchParams.dragRightItem=e.target.dragRightItem||!1,this.touchParams.itemProps=null}_getGroupIndex(e){for(let s=0;s<this.groupIds.length;s++)if(e==this.groupIds[s])return s}_onDragStart(e){if(this.touchParams.itemIsDragging)return;const s=this.touchParams.item||null,n=this;let r;if(s&&(s.selected||this.options.itemsAlwaysDraggable.item)){if(this.options.editable.overrideItems&&!this.options.editable.updateTime&&!this.options.editable.updateGroup||s.editable!=null&&!s.editable.updateTime&&!s.editable.updateGroup&&!this.options.editable.overrideItems)return;const o=this.touchParams.dragLeftItem,a=this.touchParams.dragRightItem;if(this.touchParams.itemIsDragging=!0,this.touchParams.selectedItem=s,o)r={item:o,initialX:e.center.x,dragLeft:!0,data:this._cloneItemData(s.data)},this.touchParams.itemProps=[r];else if(a)r={item:a,initialX:e.center.x,dragRight:!0,data:this._cloneItemData(s.data)},this.touchParams.itemProps=[r];else if(this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey))this._onDragStartAddItem(e);else{this.groupIds.length<1&&this.redraw();const l=this._getGroupIndex(s.data.group),h=this.options.itemsAlwaysDraggable.item&&!s.selected?[s.id]:this.getSelection();this.touchParams.itemProps=h.map(d=>{const u=n.items[d],c=n._getGroupIndex(u.data.group);return{item:u,initialX:e.center.x,groupOffset:l-c,data:this._cloneItemData(u.data)}})}e.stopPropagation()}else this.options.editable.add&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey)&&this._onDragStartAddItem(e)}_onDragStartAddItem(e){const s=this.options.snap||null,n=this.dom.frame.getBoundingClientRect(),r=this.options.rtl?n.right-e.center.x+10:e.center.x-n.left-10,o=this.body.util.toTime(r),a=this.body.util.getScale(),l=this.body.util.getStep(),h=s?s(o,a,l):o,u={type:"range",start:h,end:h,content:"new item"},c=ri();u[this.itemsData.idProp]=c;const f=this.groupFromTarget(e);f&&(u.group=f.groupId);const p=new ci(u,this.conversion,this.options);p.id=c,p.data=this._cloneItemData(u),this._addItem(p),this.touchParams.selectedItem=p;const g={item:p,initialX:e.center.x,data:p.data};this.options.rtl?g.dragLeft=!0:g.dragRight=!0,this.touchParams.itemProps=[g],e.stopPropagation()}_onDrag(e){if(this.popup!=null&&this.options.showTooltips&&!this.popup.hidden){const s=this.body.dom.centerContainer,n=s.getBoundingClientRect();this.popup.setPosition(e.center.x-n.left+s.offsetLeft,e.center.y-n.top+s.offsetTop),this.popup.show()}if(this.touchParams.itemProps){e.stopPropagation();const s=this,n=this.options.snap||null,r=this.body.dom.root.offsetLeft,o=this.options.rtl?r+this.body.domProps.right.width:r+this.body.domProps.left.width,a=this.body.util.getScale(),l=this.body.util.getStep(),h=this.touchParams.selectedItem,d=(this.options.editable.overrideItems||h.editable==null)&&this.options.editable.updateGroup||!this.options.editable.overrideItems&&h.editable!=null&&h.editable.updateGroup;let u=null;if(d&&h&&h.data.group!=null){const c=s.groupFromTarget(e);c&&(u=this._getGroupIndex(c.groupId))}this.touchParams.itemProps.forEach(c=>{const f=s.body.util.toTime(e.center.x-o),p=s.body.util.toTime(c.initialX-o);let g,y,v,_,D;this.options.rtl?g=-(f-p):g=f-p;let C=this._cloneItemData(c.item.data);if(c.item.editable!=null&&!c.item.editable.updateTime&&!c.item.editable.updateGroup&&!s.options.editable.overrideItems)return;if((this.options.editable.overrideItems||h.editable==null)&&this.options.editable.updateTime||!this.options.editable.overrideItems&&h.editable!=null&&h.editable.updateTime){if(c.dragLeft)this.options.rtl?C.end!=null&&(v=m.convert(c.data.end,"Date"),D=new Date(v.valueOf()+g),C.end=n?n(D,a,l):D):C.start!=null&&(y=m.convert(c.data.start,"Date"),_=new Date(y.valueOf()+g),C.start=n?n(_,a,l):_);else if(c.dragRight)this.options.rtl?C.start!=null&&(y=m.convert(c.data.start,"Date"),_=new Date(y.valueOf()+g),C.start=n?n(_,a,l):_):C.end!=null&&(v=m.convert(c.data.end,"Date"),D=new Date(v.valueOf()+g),C.end=n?n(D,a,l):D);else if(C.start!=null)if(y=m.convert(c.data.start,"Date").valueOf(),_=new Date(y+g),C.end!=null){v=m.convert(c.data.end,"Date");const M=v.valueOf()-y.valueOf();C.start=n?n(_,a,l):_,C.end=new Date(C.start.valueOf()+M)}else C.start=n?n(_,a,l):_}if(d&&!c.dragLeft&&!c.dragRight&&u!=null&&C.group!=null){let M=u-c.groupOffset;M=Math.max(0,M),M=Math.min(s.groupIds.length-1,M),C.group=s.groupIds[M]}C=this._cloneItemData(C),s.options.onMoving(C,M=>{M&&c.item.setData(this._cloneItemData(M,"Date"))})}),this.body.emitter.emit("_change")}}_moveToGroup(e,s){const n=this.groups[s];if(n&&n.groupId!=e.data.group){const r=e.parent;r.remove(e),r.order(),e.data.group=n.groupId,n.add(e),n.order()}}_onDragEnd(e){if(this.touchParams.itemIsDragging=!1,this.touchParams.itemProps){e.stopPropagation();const s=this,n=this.touchParams.itemProps;this.touchParams.itemProps=null,n.forEach(r=>{const o=r.item.id;if(!(s.itemsData.get(o)!=null))s.options.onAdd(r.item.data,l=>{s._removeItem(r.item),l&&s.itemsData.add(l),s.body.emitter.emit("_change")});else{const l=this._cloneItemData(r.item.data);s.options.onMove(l,h=>{h?(h[this.itemsData.idProp]=o,this.itemsData.update(h)):(r.item.setData(r.data),s.body.emitter.emit("_change"))})}})}}_onGroupClick(e){const s=this.groupFromTarget(e);setTimeout(()=>{this.toggleGroupShowNested(s)},1)}toggleGroupShowNested(e,s=void 0){if(!e||!e.nestedGroups)return;const n=this.groupsData.getDataSet();s!=null?e.showNested=!!s:e.showNested=!e.showNested;let r=n.get(e.groupId);r.showNested=e.showNested;let o=e.nestedGroups,a=o;for(;a.length>0;){let d=a;a=[];for(let u=0;u<d.length;u++){let c=n.get(d[u]);c.nestedGroups&&(a=a.concat(c.nestedGroups))}a.length>0&&(o=o.concat(a))}var l;if(r.showNested){var h=n.get(r.nestedGroups);for(let d=0;d<h.length;d++){let u=h[d];u.nestedGroups&&u.nestedGroups.length>0&&(u.showNested==null||u.showNested==!0)&&h.push(...n.get(u.nestedGroups))}l=h.map(function(d){return d.visible==null&&(d.visible=!0),d.visible=!!r.showNested,d})}else l=n.get(o).map(function(d){return d.visible==null&&(d.visible=!0),d.visible=!!r.showNested,d});n.update(l.concat(r)),r.showNested?(m.removeClassName(e.dom.label,"collapsed"),m.addClassName(e.dom.label,"expanded")):(m.removeClassName(e.dom.label,"expanded"),m.addClassName(e.dom.label,"collapsed"))}toggleGroupDragClassName(e){e.dom.label.classList.toggle("vis-group-is-dragging"),e.dom.foreground.classList.toggle("vis-group-is-dragging")}_onGroupDragStart(e){this.groupTouchParams.isDragging||this.options.groupEditable.order&&(this.groupTouchParams.group=this.groupFromTarget(e),this.groupTouchParams.group&&(e.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}_onGroupDrag(e){if(this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const s=this.groupsData.getDataSet(),n=this.groupFromTarget(e);if(n&&n.height!=this.groupTouchParams.group.height){const r=n.top<this.groupTouchParams.group.top,o=e.center?e.center.y:e.clientY,a=n.dom.foreground.getBoundingClientRect(),l=this.groupTouchParams.group.height;if(r){if(a.top+l<o)return}else{const h=n.height;if(a.top+h-l>o)return}}if(n&&n!=this.groupTouchParams.group){const r=s.get(n.groupId),o=s.get(this.groupTouchParams.group.groupId);o&&r&&(this.options.groupOrderSwap(o,r,s),s.update(o),s.update(r));const a=s.getIds({order:this.options.groupOrder});if(!m.equalArray(a,this.groupTouchParams.originalOrder)){const l=this.groupTouchParams.originalOrder,h=this.groupTouchParams.group.groupId,d=Math.min(l.length,a.length);let u=0,c=0,f=0;for(;u<d;){for(;u+c<d&&u+f<d&&a[u+c]==l[u+f];)u++;if(u+c>=d)break;if(a[u+c]==h)c=1;else if(l[u+f]==h)f=1;else{const p=a.indexOf(l[u+f]),g=s.get(a[u+c]),y=s.get(l[u+f]);this.options.groupOrderSwap(g,y,s),s.update(g),s.update(y);const v=a[u+c];a[u+c]=l[u+f],a[p]=v,u++}}}}}}_onGroupDragEnd(e){if(this.groupTouchParams.isDragging=!1,this.options.groupEditable.order&&this.groupTouchParams.group){e.stopPropagation();const s=this,n=s.groupTouchParams.group.groupId,r=s.groupsData.getDataSet(),o=m.extend({},r.get(n));s.options.onMoveGroup(o,a=>{if(a)a[r._idProp]=n,r.update(a);else{const l=r.getIds({order:s.options.groupOrder});if(!m.equalArray(l,s.groupTouchParams.originalOrder)){const h=s.groupTouchParams.originalOrder,d=Math.min(h.length,l.length);let u=0;for(;u<d;){for(;u<d&&l[u]==h[u];)u++;if(u>=d)break;const c=l.indexOf(h[u]),f=r.get(l[u]),p=r.get(h[u]);s.options.groupOrderSwap(f,p,r),r.update(f),r.update(p);const g=l[u];l[u]=h[u],l[c]=g,u++}}}}),s.body.emitter.emit("groupDragged",{groupId:n}),this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.group=null}}_onSelectItem(e){if(!this.options.selectable)return;const s=e.srcEvent&&(e.srcEvent.ctrlKey||e.srcEvent.metaKey),n=e.srcEvent&&e.srcEvent.shiftKey;if(s||n){this._onMultiSelectItem(e);return}const r=this.getSelection(),o=this.itemFromTarget(e),a=o&&o.selectable?[o.id]:[];this.setSelection(a);const l=this.getSelection();(l.length>0||r.length>0)&&this.body.emitter.emit("select",{items:l,event:e})}_onMouseOver(e){const s=this.itemFromTarget(e);if(!s)return;const n=this.itemFromRelatedTarget(e);if(s===n)return;const r=s.getTitle();if(this.options.showTooltips&&r){this.popup==null&&(this.popup=new _b(this.body.dom.root,this.options.tooltip.overflowMethod||"flip")),this.popup.setText(r);const o=this.body.dom.centerContainer,a=o.getBoundingClientRect();this.popup.setPosition(e.clientX-a.left+o.offsetLeft,e.clientY-a.top+o.offsetTop),this.setPopupTimer(this.popup)}else this.clearPopupTimer(),this.popup!=null&&this.popup.hide();this.body.emitter.emit("itemover",{item:s.id,event:e})}_onMouseOut(e){const s=this.itemFromTarget(e);if(!s)return;const n=this.itemFromRelatedTarget(e);s!==n&&(this.clearPopupTimer(),this.popup!=null&&this.popup.hide(),this.body.emitter.emit("itemout",{item:s.id,event:e}))}_onMouseMove(e){if(this.itemFromTarget(e)&&(this.popupTimer!=null&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){const n=this.body.dom.centerContainer,r=n.getBoundingClientRect();this.popup.setPosition(e.clientX-r.left+n.offsetLeft,e.clientY-r.top+n.offsetTop),this.popup.show()}}_onMouseWheel(e){this.touchParams.itemIsDragging&&this._onDragEnd(e)}_onUpdateItem(e){if(!this.options.selectable||!this.options.editable.updateTime&&!this.options.editable.updateGroup)return;const s=this;if(e){const n=s.itemsData.get(e.id);this.options.onUpdate(n,r=>{r&&s.itemsData.update(r)})}}_onDropObjectOnItem(e){const s=this.itemFromTarget(e),n=JSON.parse(e.dataTransfer.getData("text"));this.options.onDropObjectOnItem(n,s)}_onAddItem(e){if(!this.options.selectable||!this.options.editable.add)return;const s=this,n=this.options.snap||null,r=this.dom.frame.getBoundingClientRect(),o=this.options.rtl?r.right-e.center.x:e.center.x-r.left,a=this.body.util.toTime(o),l=this.body.util.getScale(),h=this.body.util.getStep();let d,u;e.type=="drop"?(u=JSON.parse(e.dataTransfer.getData("text")),u.content=u.content?u.content:"new item",u.start=u.start?u.start:n?n(a,l,h):a,u.type=u.type||"box",u[this.itemsData.idProp]=u.id||ri(),u.type=="range"&&!u.end&&(d=this.body.util.toTime(o+this.props.width/5),u.end=n?n(d,l,h):d)):(u={start:n?n(a,l,h):a,content:"new item"},u[this.itemsData.idProp]=ri(),this.options.type==="range"&&(d=this.body.util.toTime(o+this.props.width/5),u.end=n?n(d,l,h):d));const c=this.groupFromTarget(e);c&&(u.group=c.groupId),u=this._cloneItemData(u),this.options.onAdd(u,f=>{f&&(s.itemsData.add(f),e.type=="drop"&&s.setSelection([f.id]))})}_onMultiSelectItem(e){if(!this.options.selectable)return;const s=this.itemFromTarget(e);if(s){let n=this.options.multiselect?this.getSelection():[];if((e.srcEvent&&e.srcEvent.shiftKey||!1||this.options.sequentialSelection)&&this.options.multiselect){const a=this.itemsData.get(s.id).group;let l;this.options.multiselectPerGroup&&n.length>0&&(l=this.itemsData.get(n[0]).group),(!this.options.multiselectPerGroup||l==null||l==a)&&n.push(s.id);const h=fi._getItemRange(this.itemsData.get(n));if(!this.options.multiselectPerGroup||l==a){n=[];for(const d in this.items)if(this.items.hasOwnProperty(d)){const u=this.items[d],c=u.data.start,f=u.data.end!==void 0?u.data.end:c;c>=h.min&&f<=h.max&&(!this.options.multiselectPerGroup||l==this.itemsData.get(u.id).group)&&!(u instanceof yi)&&n.push(u.id)}}}else{const a=n.indexOf(s.id);a==-1?n.push(s.id):n.splice(a,1)}const o=n.filter(a=>this.getItemById(a).selectable);this.setSelection(o),this.body.emitter.emit("select",{items:this.getSelection(),event:e})}}static _getItemRange(e){let s=null,n=null;return e.forEach(r=>{(n==null||r.start<n)&&(n=r.start),r.end!=null?(s==null||r.end>s)&&(s=r.end):(s==null||r.start>s)&&(s=r.start)}),{min:n,max:s}}itemFromElement(e){let s=e;for(;s;){if(s.hasOwnProperty("vis-item"))return s["vis-item"];s=s.parentNode}return null}itemFromTarget(e){return this.itemFromElement(e.target)}itemFromRelatedTarget(e){return this.itemFromElement(e.relatedTarget)}groupFromTarget(e){const s=e.center?e.center.y:e.clientY;let n=this.groupIds;n.length<=0&&this.groupsData&&(n=this.groupsData.getIds({order:this.options.groupOrder}));for(let r=0;r<n.length;r++){const o=n[r],a=this.groups[o],l=a.dom.foreground,h=l.getBoundingClientRect();if(s>=h.top&&s<h.top+l.offsetHeight)return a;if(this.options.orientation.item==="top"){if(r===this.groupIds.length-1&&s>h.top)return a}else if(r===0&&s<h.top+l.offset)return a}return null}static itemSetFromTarget(e){let s=e.target;for(;s;){if(s.hasOwnProperty("vis-itemset"))return s["vis-itemset"];s=s.parentNode}return null}_cloneItemData(e,s){const n=m.extend({},e);return s||(s=this.itemsData.type),n.start!=null&&(n.start=m.convert(n.start,s&&s.start||"Date")),n.end!=null&&(n.end=m.convert(n.end,s&&s.end||"Date")),n}_clusterItems(){if(!this.options.cluster)return;const{scale:e}=this.body.range.conversion(this.body.domProps.center.width),s=this.clusterGenerator.getClusters(this.clusters,e,this.options.cluster);if(this.clusters!=s){if(this._detachAllClusters(),s){for(let n of s)n.attach();this.clusters=s}this._updateClusters(s)}}_detachAllClusters(){if(this.options.cluster&&this.clusters&&this.clusters.length)for(let e of this.clusters)e.detach()}_updateClusters(e){if(this.clusters&&this.clusters.length){const s=new Set(e.map(o=>o.id)),n=this.clusters.filter(o=>!s.has(o.id));let r=!1;for(let o of n){const a=this.selection.indexOf(o.id);a!==-1&&(o.unselect(),this.selection.splice(a,1),r=!0)}if(r){const o=this.getSelection();this.body.emitter.emit("select",{items:o,event})}}this.clusters=e||[]}}fi.types={background:yi,box:vb,range:ci,point:bb};fi.prototype._onAdd=fi.prototype._onUpdate;let ns=!1,Da,En="background: #FFeeee; color: #dd0000";class re{constructor(){}static validate(e,s,n){ns=!1,Da=s;let r=s;return n!==void 0&&(r=s[n]),re.parse(e,r,[]),ns}static parse(e,s,n){for(let r in e)e.hasOwnProperty(r)&&re.check(r,e,s,n)}static check(e,s,n,r){if(n[e]===void 0&&n.__any__===void 0){re.getSuggestion(e,n,r);return}let o=e,a=!0;n[e]===void 0&&n.__any__!==void 0&&(o="__any__",a=re.getType(s[e])==="object");let l=n[o];a&&l.__type__!==void 0&&(l=l.__type__),re.checkFields(e,s,n,o,l,r)}static checkFields(e,s,n,r,o,a){let l=function(u){console.log("%c"+u+re.printLocation(a,e),En)},h=re.getType(s[e]),d=o[h];d!==void 0?re.getType(d)==="array"&&d.indexOf(s[e])===-1?(l('Invalid option detected in "'+e+'". Allowed values are:'+re.print(d)+' not "'+s[e]+'". '),ns=!0):h==="object"&&r!=="__any__"&&(a=m.copyAndExtendArray(a,e),re.parse(s[e],n[r],a)):o.any===void 0&&(l('Invalid type received for "'+e+'". Expected: '+re.print(Object.keys(o))+". Received ["+h+'] "'+s[e]+'"'),ns=!0)}static getType(e){var s=typeof e;return s==="object"?e===null?"null":e instanceof Boolean?"boolean":e instanceof Number?"number":e instanceof String?"string":Array.isArray(e)?"array":e instanceof Date?"date":e.nodeType!==void 0?"dom":e._isAMomentObject===!0?"moment":"object":s==="number"?"number":s==="boolean"?"boolean":s==="string"?"string":s===void 0?"undefined":s}static getSuggestion(e,s,n){let r=re.findInOptions(e,s,n,!1),o=re.findInOptions(e,Da,[],!0),a=8,l=4,h;r.indexMatch!==void 0?h=" in "+re.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+`"?

`:o.distance<=l&&r.distance>o.distance?h=" in "+re.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+re.printLocation(o.path,o.closestMatch,""):r.distance<=a?h='. Did you mean "'+r.closestMatch+'"?'+re.printLocation(r.path,e):h=". Did you mean one of these: "+re.print(Object.keys(s))+re.printLocation(n,e),console.log('%cUnknown option detected: "'+e+'"'+h,En),ns=!0}static findInOptions(e,s,n,r=!1){let o=1e9,a="",l=[],h=e.toLowerCase(),d;for(let u in s){let c;if(s[u].__type__!==void 0&&r===!0){let f=re.findInOptions(e,s[u],m.copyAndExtendArray(n,u));o>f.distance&&(a=f.closestMatch,l=f.path,o=f.distance,d=f.indexMatch)}else u.toLowerCase().indexOf(h)!==-1&&(d=u),c=re.levenshteinDistance(e,u),o>c&&(a=u,l=m.copyArray(n),o=c)}return{closestMatch:a,path:l,distance:o,indexMatch:d}}static printLocation(e,s,n=`Problem value found at: 
`){let r=`

`+n+`options = {
`;for(let o=0;o<e.length;o++){for(let a=0;a<o+1;a++)r+="  ";r+=e[o]+`: {
`}for(let o=0;o<e.length+1;o++)r+="  ";r+=s+`
`;for(let o=0;o<e.length+1;o++){for(let a=0;a<e.length-o;a++)r+="  ";r+=`}
`}return r+`

`}static print(e){return JSON.stringify(e).replace(/(\")|(\[)|(\])|(,"__type__")/g,"").replace(/(\,)/g,", ")}static levenshteinDistance(e,s){if(e.length===0)return s.length;if(s.length===0)return e.length;var n=[],r;for(r=0;r<=s.length;r++)n[r]=[r];var o;for(o=0;o<=e.length;o++)n[0][o]=o;for(r=1;r<=s.length;r++)for(o=1;o<=e.length;o++)s.charAt(r-1)==e.charAt(o-1)?n[r][o]=n[r-1][o-1]:n[r][o]=Math.min(n[r-1][o-1]+1,Math.min(n[r][o-1]+1,n[r-1][o]+1));return n[s.length][e.length]}}let Y="string",L="boolean",te="number",Ta="array",wi="date",ce="object",Tb="dom",xi="moment",Ca="any",Cb={configure:{enabled:{boolean:L},filter:{boolean:L,function:"function"},container:{dom:Tb},__type__:{object:ce,boolean:L,function:"function"}},align:{string:Y},alignCurrentTime:{string:Y,undefined:"undefined"},rtl:{boolean:L,undefined:"undefined"},rollingMode:{follow:{boolean:L},offset:{number:te,undefined:"undefined"},__type__:{object:ce}},onTimeout:{timeoutMs:{number:te},callback:{function:"function"},__type__:{object:ce}},verticalScroll:{boolean:L,undefined:"undefined"},horizontalScroll:{boolean:L,undefined:"undefined"},autoResize:{boolean:L},throttleRedraw:{number:te},clickToUse:{boolean:L},dataAttributes:{string:Y,array:Ta},editable:{add:{boolean:L,undefined:"undefined"},remove:{boolean:L,undefined:"undefined"},updateGroup:{boolean:L,undefined:"undefined"},updateTime:{boolean:L,undefined:"undefined"},overrideItems:{boolean:L,undefined:"undefined"},__type__:{boolean:L,object:ce}},end:{number:te,date:wi,string:Y,moment:xi},format:{minorLabels:{millisecond:{string:Y,undefined:"undefined"},second:{string:Y,undefined:"undefined"},minute:{string:Y,undefined:"undefined"},hour:{string:Y,undefined:"undefined"},weekday:{string:Y,undefined:"undefined"},day:{string:Y,undefined:"undefined"},week:{string:Y,undefined:"undefined"},month:{string:Y,undefined:"undefined"},year:{string:Y,undefined:"undefined"},__type__:{object:ce,function:"function"}},majorLabels:{millisecond:{string:Y,undefined:"undefined"},second:{string:Y,undefined:"undefined"},minute:{string:Y,undefined:"undefined"},hour:{string:Y,undefined:"undefined"},weekday:{string:Y,undefined:"undefined"},day:{string:Y,undefined:"undefined"},week:{string:Y,undefined:"undefined"},month:{string:Y,undefined:"undefined"},year:{string:Y,undefined:"undefined"},__type__:{object:ce,function:"function"}},__type__:{object:ce}},moment:{function:"function"},groupHeightMode:{string:Y},groupOrder:{string:Y,function:"function"},groupEditable:{add:{boolean:L,undefined:"undefined"},remove:{boolean:L,undefined:"undefined"},order:{boolean:L,undefined:"undefined"},__type__:{boolean:L,object:ce}},groupOrderSwap:{function:"function"},height:{string:Y,number:te},hiddenDates:{start:{date:wi,number:te,string:Y,moment:xi},end:{date:wi,number:te,string:Y,moment:xi},repeat:{string:Y},__type__:{object:ce,array:Ta}},itemsAlwaysDraggable:{item:{boolean:L,undefined:"undefined"},range:{boolean:L,undefined:"undefined"},__type__:{boolean:L,object:ce}},limitSize:{boolean:L},locale:{string:Y},locales:{__any__:{any:Ca},__type__:{object:ce}},longSelectPressTime:{number:te},margin:{axis:{number:te},item:{horizontal:{number:te,undefined:"undefined"},vertical:{number:te,undefined:"undefined"},__type__:{object:ce,number:te}},__type__:{object:ce,number:te}},max:{date:wi,number:te,string:Y,moment:xi},maxHeight:{number:te,string:Y},maxMinorChars:{number:te},min:{date:wi,number:te,string:Y,moment:xi},minHeight:{number:te,string:Y},moveable:{boolean:L},multiselect:{boolean:L},multiselectPerGroup:{boolean:L},onAdd:{function:"function"},onDropObjectOnItem:{function:"function"},onUpdate:{function:"function"},onMove:{function:"function"},onMoving:{function:"function"},onRemove:{function:"function"},onAddGroup:{function:"function"},onMoveGroup:{function:"function"},onRemoveGroup:{function:"function"},onInitialDrawComplete:{function:"function"},order:{function:"function"},orientation:{axis:{string:Y,undefined:"undefined"},item:{string:Y,undefined:"undefined"},__type__:{string:Y,object:ce}},selectable:{boolean:L},sequentialSelection:{boolean:L},showCurrentTime:{boolean:L},showMajorLabels:{boolean:L},showMinorLabels:{boolean:L},showWeekScale:{boolean:L},stack:{boolean:L},stackSubgroups:{boolean:L},cluster:{maxItems:{number:te,undefined:"undefined"},titleTemplate:{string:Y,undefined:"undefined"},clusterCriteria:{function:"function",undefined:"undefined"},showStipes:{boolean:L,undefined:"undefined"},fitOnDoubleClick:{boolean:L,undefined:"undefined"},__type__:{boolean:L,object:ce}},snap:{function:"function",null:"null"},start:{date:wi,number:te,string:Y,moment:xi},template:{function:"function"},loadingScreenTemplate:{function:"function"},groupTemplate:{function:"function"},visibleFrameTemplate:{string:Y,function:"function"},showTooltips:{boolean:L},tooltip:{followMouse:{boolean:L},overflowMethod:{string:["cap","flip","none"]},delay:{number:te},template:{function:"function"},__type__:{object:ce}},tooltipOnItemUpdateTime:{template:{function:"function"},__type__:{boolean:L,object:ce}},timeAxis:{scale:{string:Y,undefined:"undefined"},step:{number:te,undefined:"undefined"},__type__:{object:ce}},type:{string:Y},width:{string:Y,number:te},preferZoom:{boolean:L},zoomable:{boolean:L},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:te},zoomMax:{number:te},zoomMin:{number:te},xss:{disabled:{boolean:L},filterOptions:{__any__:{any:Ca},__type__:{object:ce}},__type__:{object:ce}},__type__:{object:ce}},kb={global:{align:["center","left","right"],alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],xss:{disabled:!1}}};var Eb={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"};class Ob{constructor(e=1){this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:289/2,y:289/2},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=()=>{},this.closeCallback=()=>{},this._create()}insertTo(e){this.hammer!==void 0&&(this.hammer.destroy(),this.hammer=void 0),this.container=e,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}setUpdateCallback(e){if(typeof e=="function")this.updateCallback=e;else throw new Error("Function attempted to set as colorPicker update callback is not a function.")}setCloseCallback(e){if(typeof e=="function")this.closeCallback=e;else throw new Error("Function attempted to set as colorPicker closing callback is not a function.")}_isColorString(e){if(typeof e=="string")return Eb[e]}setColor(e,s=!0){if(e==="none")return;let n;var r=this._isColorString(e);if(r!==void 0&&(e=r),m.isString(e)===!0){if(m.isValidRGB(e)===!0){let o=e.substr(4).substr(0,e.length-5).split(",");n={r:o[0],g:o[1],b:o[2],a:1}}else if(m.isValidRGBA(e)===!0){let o=e.substr(5).substr(0,e.length-6).split(",");n={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(m.isValidHex(e)===!0){let o=m.hexToRGB(e);n={r:o.r,g:o.g,b:o.b,a:1}}}else if(e instanceof Object&&e.r!==void 0&&e.g!==void 0&&e.b!==void 0){let o=e.a!==void 0?e.a:"1.0";n={r:e.r,g:e.g,b:e.b,a:o}}if(n===void 0)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(e));this._setColor(n,s)}show(){this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}_hide(e=!0){e===!0&&(this.previousColor=m.extend({},this.color)),this.applied===!0&&this.updateCallback(this.initialColor),this.frame.style.display="none",setTimeout(()=>{this.closeCallback!==void 0&&(this.closeCallback(),this.closeCallback=void 0)},0)}_save(){this.updateCallback(this.color),this.applied=!1,this._hide()}_apply(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}_loadLast(){this.previousColor!==void 0?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}_setColor(e,s=!0){s===!0&&(this.initialColor=m.extend({},e)),this.color=e;let n=m.RGBToHSV(e.r,e.g,e.b),r=2*Math.PI,o=this.r*n.s,a=this.centerCoordinates.x+o*Math.sin(r*n.h),l=this.centerCoordinates.y+o*Math.cos(r*n.h);this.colorPickerSelector.style.left=a-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=l-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(e)}_setOpacity(e){this.color.a=e/100,this._updatePicker(this.color)}_setBrightness(e){let s=m.RGBToHSV(this.color.r,this.color.g,this.color.b);s.v=e/100;let n=m.HSVToRGB(s.h,s.s,s.v);n.a=this.color.a,this.color=n,this._updatePicker()}_updatePicker(e=this.color){let s=m.RGBToHSV(e.r,e.g,e.b),n=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1)),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let r=this.colorPickerCanvas.clientWidth,o=this.colorPickerCanvas.clientHeight;n.clearRect(0,0,r,o),n.putImageData(this.hueCircle,0,0),n.fillStyle="rgba(0,0,0,"+(1-s.v)+")",n.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),n.fill(),this.brightnessRange.value=100*s.v,this.opacityRange.value=100*e.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}_setSize(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}_create(){if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){let s=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{let s=document.createElement("DIV");s.style.color="red",s.style.fontWeight="bold",s.style.padding="10px",s.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(s)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch{}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch{}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)},this.opacityRange.oninput=function(){e._setOpacity(this.value)},this.brightnessRange.onchange=function(){e._setBrightness(this.value)},this.brightnessRange.oninput=function(){e._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=this._hide.bind(this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=this._apply.bind(this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=this._save.bind(this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=this._loadLast.bind(this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}_bindHammer(){this.drag={},this.pinch={},this.hammer=new ke(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),Ah(this.hammer,e=>{this._moveSelector(e)}),this.hammer.on("tap",e=>{this._moveSelector(e)}),this.hammer.on("panstart",e=>{this._moveSelector(e)}),this.hammer.on("panmove",e=>{this._moveSelector(e)}),this.hammer.on("panend",e=>{this._moveSelector(e)})}_generateHueCircle(){if(this.generated===!1){let e=this.colorPickerCanvas.getContext("2d");this.pixelRation===void 0&&(this.pixelRatio=(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)),e.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);let s=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;e.clearRect(0,0,s,n);let r,o,a,l;this.centerCoordinates={x:s*.5,y:n*.5},this.r=.49*s;let h=2*Math.PI/360,d=1/360,u=1/this.r,c;for(a=0;a<360;a++)for(l=0;l<this.r;l++)r=this.centerCoordinates.x+l*Math.sin(h*a),o=this.centerCoordinates.y+l*Math.cos(h*a),c=m.HSVToRGB(a*d,l*u,1),e.fillStyle="rgb("+c.r+","+c.g+","+c.b+")",e.fillRect(r-.5,o-.5,2,2);e.strokeStyle="rgba(0,0,0,1)",e.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),e.stroke(),this.hueCircle=e.getImageData(0,0,s,n)}this.generated=!0}_moveSelector(e){let s=this.colorPickerDiv.getBoundingClientRect(),n=e.center.x-s.left,r=e.center.y-s.top,o=.5*this.colorPickerDiv.clientHeight,a=.5*this.colorPickerDiv.clientWidth,l=n-a,h=r-o,d=Math.atan2(l,h),u=.98*Math.min(Math.sqrt(l*l+h*h),a),c=Math.cos(d)*u+o,f=Math.sin(d)*u+a;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=f-.5*this.colorPickerSelector.clientWidth+"px";let p=d/(2*Math.PI);p=p<0?p+1:p;let g=u/this.r,y=m.RGBToHSV(this.color.r,this.color.g,this.color.b);y.h=p,y.s=g;let v=m.HSVToRGB(y.h,y.s,y.v);v.a=this.color.a,this.color=v,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}class zh{constructor(e,s,n,r=1){this.parent=e,this.changedOptions=[],this.container=s,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},m.extend(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Ob(r),this.wrapper=void 0}setOptions(e){if(e!==void 0){this.popupHistory={},this._removePopup();let s=!0;if(typeof e=="string")this.options.filter=e;else if(Array.isArray(e))this.options.filter=e.join();else if(typeof e=="object"){if(e==null)throw new TypeError("options cannot be null");e.container!==void 0&&(this.options.container=e.container),e.filter!==void 0&&(this.options.filter=e.filter),e.showButton!==void 0&&(this.options.showButton=e.showButton),e.enabled!==void 0&&(s=e.enabled)}else typeof e=="boolean"?(this.options.filter=!0,s=e):typeof e=="function"&&(this.options.filter=e,s=!0);this.options.filter===!1&&(s=!1),this.options.enabled=s}this._clean()}setModuleOptions(e){this.moduleOptions=e,this.options.enabled===!0&&(this._clean(),this.options.container!==void 0&&(this.container=this.options.container),this._create())}_create(){this._clean(),this.changedOptions=[];let e=this.options.filter,s=0,n=!1;for(let r in this.configureOptions)this.configureOptions.hasOwnProperty(r)&&(this.allowCreation=!1,n=!1,typeof e=="function"?(n=e(r,[]),n=n||this._handleObject(this.configureOptions[r],[r],!0)):(e===!0||e.indexOf(r)!==-1)&&(n=!0),n!==!1&&(this.allowCreation=!0,s>0&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r])),s++);this._makeButton(),this._push()}_push(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var e=0;e<this.domElements.length;e++)this.wrapper.appendChild(this.domElements[e]);this._showPopupIfNeeded()}_clean(){for(var e=0;e<this.domElements.length;e++)this.wrapper.removeChild(this.domElements[e]);this.wrapper!==void 0&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}_getValue(e){let s=this.moduleOptions;for(let n=0;n<e.length;n++)if(s[e[n]]!==void 0)s=s[e[n]];else{s=void 0;break}return s}_makeItem(e,...s){if(this.allowCreation===!0){let n=document.createElement("div");return n.className="vis-configuration vis-config-item vis-config-s"+e.length,s.forEach(r=>{n.appendChild(r)}),this.domElements.push(n),this.domElements.length}return 0}_makeHeader(e){let s=document.createElement("div");s.className="vis-configuration vis-config-header",s.innerHTML=m.xss(e),this._makeItem([],s)}_makeLabel(e,s,n=!1){let r=document.createElement("div");return r.className="vis-configuration vis-config-label vis-config-s"+s.length,n===!0?r.innerHTML=m.xss("<i><b>"+e+":</b></i>"):r.innerHTML=m.xss(e+":"),r}_makeDropdown(e,s,n){let r=document.createElement("select");r.className="vis-configuration vis-config-select";let o=0;s!==void 0&&e.indexOf(s)!==-1&&(o=e.indexOf(s));for(let h=0;h<e.length;h++){let d=document.createElement("option");d.value=e[h],h===o&&(d.selected="selected"),d.innerHTML=e[h],r.appendChild(d)}let a=this;r.onchange=function(){a._update(this.value,n)};let l=this._makeLabel(n[n.length-1],n);this._makeItem(n,l,r)}_makeRange(e,s,n){let r=e[0],o=e[1],a=e[2],l=e[3],h=document.createElement("input");h.className="vis-configuration vis-config-range";try{h.type="range",h.min=o,h.max=a}catch{}h.step=l;let d="",u=0;if(s!==void 0){let y=1.2;s<0&&s*y<o?(h.min=Math.ceil(s*y),u=h.min,d="range increased"):s/y<o&&(h.min=Math.ceil(s/y),u=h.min,d="range increased"),s*y>a&&a!==1&&(h.max=Math.ceil(s*y),u=h.max,d="range increased"),h.value=s}else h.value=r;let c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=Number(h.value);var f=this;h.onchange=function(){c.value=this.value,f._update(Number(this.value),n)},h.oninput=function(){c.value=this.value};let p=this._makeLabel(n[n.length-1],n),g=this._makeItem(n,p,h,c);d!==""&&this.popupHistory[g]!==u&&(this.popupHistory[g]=u,this._setupPopup(d,g))}_makeButton(){if(this.options.showButton===!0){let e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=()=>{this._printOptions()},e.onmouseover=()=>{e.className="vis-configuration vis-config-button hover"},e.onmouseout=()=>{e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}_setupPopup(e,s){if(this.initialized===!0&&this.allowCreation===!0&&this.popupCounter<this.popupLimit){let n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=m.xss(e),n.onclick=()=>{this._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:s}}}_removePopup(){this.popupDiv.html!==void 0&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}_showPopupIfNeeded(){if(this.popupDiv.html!==void 0){let s=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=s.left+"px",this.popupDiv.html.style.top=s.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=setTimeout(()=>{this.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=setTimeout(()=>{this._removePopup()},1800)}}_makeCheckbox(e,s,n){var r=document.createElement("input");r.type="checkbox",r.className="vis-configuration vis-config-checkbox",r.checked=e,s!==void 0&&(r.checked=s,s!==e&&(typeof e=="object"?s!==e.enabled&&this.changedOptions.push({path:n,value:s}):this.changedOptions.push({path:n,value:s})));let o=this;r.onchange=function(){o._update(this.checked,n)};let a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,r)}_makeTextInput(e,s,n){var r=document.createElement("input");r.type="text",r.className="vis-configuration vis-config-text",r.value=s,s!==e&&this.changedOptions.push({path:n,value:s});let o=this;r.onchange=function(){o._update(this.value,n)};let a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,r)}_makeColorField(e,s,n){let r=e[1],o=document.createElement("div");s=s===void 0?r:s,s!=="none"?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=s):o.className="vis-configuration vis-config-colorBlock none",s=s===void 0?r:s,o.onclick=()=>{this._showColorPicker(s,o,n)};let a=this._makeLabel(n[n.length-1],n);this._makeItem(n,a,o)}_showColorPicker(e,s,n){s.onclick=function(){},this.colorPicker.insertTo(s),this.colorPicker.show(),this.colorPicker.setColor(e),this.colorPicker.setUpdateCallback(r=>{let o="rgba("+r.r+","+r.g+","+r.b+","+r.a+")";s.style.backgroundColor=o,this._update(o,n)}),this.colorPicker.setCloseCallback(()=>{s.onclick=()=>{this._showColorPicker(e,s,n)}})}_handleObject(e,s=[],n=!1){let r=!1,o=this.options.filter,a=!1;for(let l in e)if(e.hasOwnProperty(l)){r=!0;let h=e[l],d=m.copyAndExtendArray(s,l);if(typeof o=="function"&&(r=o(l,s),r===!1&&!Array.isArray(h)&&typeof h!="string"&&typeof h!="boolean"&&h instanceof Object&&(this.allowCreation=!1,r=this._handleObject(h,d,!0),this.allowCreation=n===!1)),r!==!1){a=!0;let u=this._getValue(d);if(Array.isArray(h))this._handleArray(h,u,d);else if(typeof h=="string")this._makeTextInput(h,u,d);else if(typeof h=="boolean")this._makeCheckbox(h,u,d);else if(h instanceof Object){let c=!0;if(s.indexOf("physics")!==-1&&this.moduleOptions.physics.solver!==l&&(c=!1),c===!0)if(h.enabled!==void 0){let f=m.copyAndExtendArray(d,"enabled"),p=this._getValue(f);if(p===!0){let g=this._makeLabel(l,d,!0);this._makeItem(d,g),a=this._handleObject(h,d)||a}else this._makeCheckbox(h,p,d)}else{let f=this._makeLabel(l,d,!0);this._makeItem(d,f),a=this._handleObject(h,d)||a}}else console.error("dont know how to handle",h,l,d)}}return a}_handleArray(e,s,n){typeof e[0]=="string"&&e[0]==="color"?(this._makeColorField(e,s,n),e[1]!==s&&this.changedOptions.push({path:n,value:s})):typeof e[0]=="string"?(this._makeDropdown(e,s,n),e[0]!==s&&this.changedOptions.push({path:n,value:s})):typeof e[0]=="number"&&(this._makeRange(e,s,n),e[0]!==s&&this.changedOptions.push({path:n,value:Number(s)}))}_update(e,s){let n=this._constructOptions(e,s);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",n),this.initialized=!0,this.parent.setOptions(n)}_constructOptions(e,s,n={}){let r=n;e=e==="true"?!0:e,e=e==="false"?!1:e;for(let o=0;o<s.length;o++)s[o]!=="global"&&(r[s[o]]===void 0&&(r[s[o]]={}),o!==s.length-1?r=r[s[o]]:r[s[o]]=e);return n}_printOptions(){let e=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+JSON.stringify(e,null,2)+"</pre>"}getOptions(){let e={};for(var s=0;s<this.changedOptions.length;s++)this._constructOptions(this.changedOptions[s].value,this.changedOptions[s].path,e);return e}}class Io extends Ri{constructor(e,s,n,r){if(super(),this.initTime=new Date,this.itemsDone=!1,!(this instanceof Io))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(n)||Pt(n))&&n instanceof Object){const h=r;r=n,n=h}r&&r.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');const o=this;if(this.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:Ae},this.options=m.deepExtend({},this.defaultOptions),r&&m.setupXSSProtection(r.xss),this._create(e),!r||r&&typeof r.rtl>"u"){this.dom.root.style.visibility="hidden";let h,d=this.dom.root;for(;!h&&d;)h=window.getComputedStyle(d,null).direction,d=d.parentElement;this.options.rtl=h&&h.toLowerCase()=="rtl"}else this.options.rtl=r.rtl;r&&(r.rollingMode&&(this.options.rollingMode=r.rollingMode),r.onInitialDrawComplete&&(this.options.onInitialDrawComplete=r.onInitialDrawComplete),r.onTimeout&&(this.options.onTimeout=r.onTimeout),r.loadingScreenTemplate&&(this.options.loadingScreenTemplate=r.loadingScreenTemplate));const a=document.createElement("div");if(this.options.loadingScreenTemplate){const h=this.options.loadingScreenTemplate.bind(this),d=h(this.dom.loadingScreen);d instanceof Object&&!(d instanceof Element)?h(a):d instanceof Element?(a.innerHTML="",a.appendChild(d)):d!=null&&(a.innerHTML=m.xss(d))}this.dom.loadingScreen.appendChild(a),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale(){return o.timeAxis.step.scale},getStep(){return o.timeAxis.step.step},toScreen:o._toScreen.bind(o),toGlobalScreen:o._toGlobalScreen.bind(o),toTime:o._toTime.bind(o),toGlobalTime:o._toGlobalTime.bind(o)}},this.range=new Vn(this.body,this.options),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new kn(this.body,this.options),this.timeAxis2=null,this.components.push(this.timeAxis),this.currentTime=new Uh(this.body,this.options),this.components.push(this.currentTime),this.itemSet=new fi(this.body,this.options),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null;function l(h,d){o.hasListeners(h)&&o.emit(h,o.getEventProperties(d))}this.dom.root.onclick=h=>{l("click",h)},this.dom.root.ondblclick=h=>{l("doubleClick",h)},this.dom.root.oncontextmenu=h=>{l("contextmenu",h)},this.dom.root.onmouseover=h=>{l("mouseOver",h)},window.PointerEvent?(this.dom.root.onpointerdown=h=>{l("mouseDown",h)},this.dom.root.onpointermove=h=>{l("mouseMove",h)},this.dom.root.onpointerup=h=>{l("mouseUp",h)}):(this.dom.root.onmousemove=h=>{l("mouseMove",h)},this.dom.root.onmousedown=h=>{l("mouseDown",h)},this.dom.root.onmouseup=h=>{l("mouseUp",h)}),this.initialFitDone=!1,this.on("changed",()=>{if(o.itemsData!=null){if(!o.initialFitDone&&!o.options.rollingMode)if(o.initialFitDone=!0,o.options.start!=null||o.options.end!=null){if(o.options.start==null||o.options.end==null)var h=o.getItemRange();const d=o.options.start!=null?o.options.start:h.min,u=o.options.end!=null?o.options.end:h.max;o.setWindow(d,u,{animation:!1})}else o.fit({animation:!1});!o.initialDrawDone&&(o.initialRangeChangeDone||!o.options.start&&!o.options.end||o.options.rollingMode)&&(o.initialDrawDone=!0,o.itemSet.initialDrawDone=!0,o.dom.root.style.visibility="visible",o.dom.loadingScreen.parentNode.removeChild(o.dom.loadingScreen),o.options.onInitialDrawComplete&&setTimeout(()=>o.options.onInitialDrawComplete(),0))}}),this.on("destroyTimeline",()=>{o.destroy()}),r&&this.setOptions(r),this.body.emitter.on("fit",h=>{this._onFit(h),this.redraw()}),n&&this.setGroups(n),s&&this.setItems(s),this._redraw()}_createConfigurator(){return new zh(this,this.dom.container,kb)}redraw(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0}),this._redraw()}setOptions(e){if(re.validate(e,Cb)===!0&&console.log("%cErrors have been found in the supplied options object.",En),Ri.prototype.setOptions.call(this,e),"type"in e&&e.type!==this.options.type){this.options.type=e.type;const n=this.itemsData;if(n){const r=this.getSelection();this.setItems(null),this.setItems(n.rawDS),this.setSelection(r)}}}setItems(e){this.itemsDone=!1;let s;e?Pt(e)?s=Gi(e):s=Gi(new Wi(e)):s=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=s,this.itemSet&&this.itemSet.setItems(s!=null?s.rawDS:null)}setGroups(e){let s;const n=r=>r.visible!==!1;e?(Array.isArray(e)&&(e=new Wi(e)),s=new So(e,{filter:n})):s=null,this.groupsData!=null&&typeof this.groupsData.setData=="function"&&this.groupsData.setData(null),this.groupsData=s,this.itemSet.setGroups(s)}setData(e){e&&e.groups&&this.setGroups(e.groups),e&&e.items&&this.setItems(e.items)}setSelection(e,s){this.itemSet&&this.itemSet.setSelection(e),s&&s.focus&&this.focus(e,s)}getSelection(){return this.itemSet&&this.itemSet.getSelection()||[]}focus(e,s){if(!this.itemsData||e==null)return;const n=Array.isArray(e)?e:[e],r=this.itemsData.get(n);let o=null,a=null;if(r.forEach(l=>{const h=l.start.valueOf(),d="end"in l?l.end.valueOf():l.start.valueOf();(o===null||h<o)&&(o=h),(a===null||d>a)&&(a=d)}),o!==null&&a!==null){const l=this,h=this.itemSet.items[n[0]];let d=this._getScrollTop()*-1,u=null;const c=(D,C,A)=>{const M=ka(l,h);if(M===!1||(u||(u=M),u.itemTop==M.itemTop&&!u.shouldScroll))return;u.itemTop!=M.itemTop&&M.shouldScroll&&(u=M,d=l._getScrollTop()*-1);const E=d,I=u.scrollOffset,B=A?I:E+(I-E)*D;l._setScrollTop(-B),C||l._redraw()},f=()=>{const D=ka(l,h);D.shouldScroll&&D.itemTop!=u.itemTop&&(l._setScrollTop(-D.scrollOffset),l._redraw())},p=()=>{f(),setTimeout(f,100)},g=s&&s.zoom!==void 0?s.zoom:!0,y=(o+a)/2,v=g?(a-o)*1.1:Math.max(this.range.end-this.range.start,(a-o)*1.1),_=s&&s.animation!==void 0?s.animation:!0;_||(u={shouldScroll:!1,scrollOffset:-1,itemTop:-1}),this.range.setRange(y-v/2,y+v/2,{animation:_},p,c)}}fit(e,s){const n=e&&e.animation!==void 0?e.animation:!0;let r;this.itemsData.length===1&&this.itemsData.get()[0].end===void 0?(r=this.getDataRange(),this.moveTo(r.min.valueOf(),{animation:n},s)):(r=this.getItemRange(),this.range.setRange(r.min,r.max,{animation:n},s))}getItemRange(){const e=this.getDataRange();let s=e.min!==null?e.min.valueOf():null,n=e.max!==null?e.max.valueOf():null,r=null,o=null;if(s!=null&&n!=null){let a=n-s;a<=0&&(a=10);const l=a/this.props.center.width,h={};let d=0;if(m.forEach(this.itemSet.items,(c,f)=>{c.groupShowing&&(h[f]=c.redraw(!0),d=h[f].length)}),d>0)for(let c=0;c<d;c++)m.forEach(h,f=>{f[c]()});if(m.forEach(this.itemSet.items,c=>{const f=nr(c),p=rr(c);let g,y;this.options.rtl?(g=f-(c.getWidthRight()+10)*l,y=p+(c.getWidthLeft()+10)*l):(g=f-(c.getWidthLeft()+10)*l,y=p+(c.getWidthRight()+10)*l),g<s&&(s=g,r=c),y>n&&(n=y,o=c)}),r&&o){const c=r.getWidthLeft()+10,f=o.getWidthRight()+10,p=this.props.center.width-c-f;p>0&&(this.options.rtl?(s=nr(r)-f*a/p,n=rr(o)+c*a/p):(s=nr(r)-c*a/p,n=rr(o)+f*a/p))}}return{min:s!=null?new Date(s):null,max:n!=null?new Date(n):null}}getDataRange(){let e=null,s=null;return this.itemsData&&this.itemsData.forEach(n=>{const r=m.convert(n.start,"Date").valueOf(),o=m.convert(n.end!=null?n.end:n.start,"Date").valueOf();(e===null||r<e)&&(e=r),(s===null||o>s)&&(s=o)}),{min:e!=null?new Date(e):null,max:s!=null?new Date(s):null}}getEventProperties(e){const s=e.center?e.center.x:e.clientX,n=e.center?e.center.y:e.clientY,r=this.dom.centerContainer.getBoundingClientRect(),o=this.options.rtl?r.right-s:s-r.left,a=n-r.top,l=this.itemSet.itemFromTarget(e),h=this.itemSet.groupFromTarget(e),d=No.customTimeFromTarget(e),u=this.itemSet.options.snap||null,c=this.body.util.getScale(),f=this.body.util.getStep(),p=this._toTime(o),g=u?u(p,c,f):p,y=m.getTarget(e);let v=null;return l!=null?v="item":d!=null?v="custom-time":m.hasParent(y,this.timeAxis.dom.foreground)||this.timeAxis2&&m.hasParent(y,this.timeAxis2.dom.foreground)?v="axis":m.hasParent(y,this.itemSet.dom.labelSet)?v="group-label":m.hasParent(y,this.currentTime.bar)?v="current-time":m.hasParent(y,this.dom.center)&&(v="background"),{event:e,item:l?l.id:null,isCluster:l?!!l.isCluster:!1,items:l?l.items||[]:null,group:h?h.groupId:null,customTime:d?d.options.id:null,what:v,pageX:e.srcEvent?e.srcEvent.pageX:e.pageX,pageY:e.srcEvent?e.srcEvent.pageY:e.pageY,x:o,y:a,time:p,snappedTime:g}}toggleRollingMode(){this.range.rolling?this.range.stopRolling():(this.options.rollingMode==null&&this.setOptions(this.options),this.range.startRolling())}_redraw(){Ri.prototype._redraw.call(this)}_onFit(e){const{start:s,end:n,animation:r}=e;n?this.range.setRange(s,n,{animation:r}):this.moveTo(s.valueOf(),{animation:r})}}function nr(t){return m.convert(t.data.start,"Date").valueOf()}function rr(t){const e=t.data.end!=null?t.data.end:t.data.start;return m.convert(e,"Date").valueOf()}function ka(t,e){if(!e.parent)return!1;const s=t.options.rtl?t.props.rightContainer.height:t.props.leftContainer.height,n=t.props.center.height,r=e.parent;let o=r.top,a=!0;const l=t.timeAxis.options.orientation.axis,h=()=>l=="bottom"?r.height-e.top-e.height:e.top,d=t._getScrollTop()*-1,u=o+h(),c=e.height;return u<d?o+s<=o+h()+c&&(o+=h()-t.itemSet.options.margin.item.vertical):u+c>d+s?o+=h()+c-s+t.itemSet.options.margin.item.vertical:a=!1,o=Math.min(o,n-s),{shouldScroll:a,scrollOffset:o,itemTop:u}}function Yt(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])}function Be(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var s=0;s<t[e].redundant.length;s++)t[e].redundant[s].parentNode.removeChild(t[e].redundant[s]);t[e].redundant=[]}}function Mb(t){Yt(t),Be(t),Yt(t)}function it(t,e,s){var n;return e.hasOwnProperty(t)?e[t].redundant.length>0?(n=e[t].redundant[0],e[t].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",t),s.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},s.appendChild(n)),e[t].used.push(n),n}function or(t,e,s,n){var r;return e.hasOwnProperty(t)?e[t].redundant.length>0?(r=e[t].redundant[0],e[t].redundant.shift()):(r=document.createElement(t),n!==void 0?s.insertBefore(r,n):s.appendChild(r)):(r=document.createElement(t),e[t]={used:[],redundant:[]},n!==void 0?s.insertBefore(r,n):s.appendChild(r)),e[t].used.push(r),r}function Bi(t,e,s,n,r,o){var a;if(s.style=="circle"?(a=it("circle",n,r),a.setAttributeNS(null,"cx",t),a.setAttributeNS(null,"cy",e),a.setAttributeNS(null,"r",.5*s.size)):(a=it("rect",n,r),a.setAttributeNS(null,"x",t-.5*s.size),a.setAttributeNS(null,"y",e-.5*s.size),a.setAttributeNS(null,"width",s.size),a.setAttributeNS(null,"height",s.size)),s.styles!==void 0&&a.setAttributeNS(null,"style",s.styles),a.setAttributeNS(null,"class",s.className+" vis-point"),o){var l=it("text",n,r);o.xOffset&&(t=t+o.xOffset),o.yOffset&&(e=e+o.yOffset),o.content&&(l.textContent=o.content),o.className&&l.setAttributeNS(null,"class",o.className+" vis-label"),l.setAttributeNS(null,"x",t),l.setAttributeNS(null,"y",e)}return a}function Rr(t,e,s,n,r,o,a,l){if(n!=0){n<0&&(n*=-1,e-=n);var h=it("rect",o,a);h.setAttributeNS(null,"x",t-.5*s),h.setAttributeNS(null,"y",e),h.setAttributeNS(null,"width",s),h.setAttributeNS(null,"height",n),h.setAttributeNS(null,"class",r),l&&h.setAttributeNS(null,"style",l)}}function Pb(){try{return navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch{return"en"}}class Nb{constructor(e,s,n,r,o,a,l=!1,h=!1){if(this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.customLines=null,this.containerHeight=o,this.majorCharHeight=a,this._start=e,this._end=s,this.scale=1,this.minorStepIdx=-1,this.magnitudefactor=1,this.determineScale(),this.zeroAlign=l,this.autoScaleStart=n,this.autoScaleEnd=r,this.formattingFunction=h,n||r){const d=this,u=c=>{const f=c-c%(d.magnitudefactor*d.minorSteps[d.minorStepIdx]);return c%(d.magnitudefactor*d.minorSteps[d.minorStepIdx])>.5*(d.magnitudefactor*d.minorSteps[d.minorStepIdx])?f+d.magnitudefactor*d.minorSteps[d.minorStepIdx]:f};n&&(this._start-=this.magnitudefactor*2*this.minorSteps[this.minorStepIdx],this._start=u(this._start)),r&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=u(this._end)),this.determineScale()}}setCharHeight(e){this.majorCharHeight=e}setHeight(e){this.containerHeight=e}determineScale(){const e=this._end-this._start;this.scale=this.containerHeight/e;const s=this.majorCharHeight/this.scale,n=e>0?Math.round(Math.log(e)/Math.LN10):0;this.minorStepIdx=-1,this.magnitudefactor=Math.pow(10,n);let r=0;n<0&&(r=n);let o=!1;for(let a=r;Math.abs(a)<=Math.abs(n);a++){this.magnitudefactor=Math.pow(10,a);for(let l=0;l<this.minorSteps.length;l++)if(this.magnitudefactor*this.minorSteps[l]>=s){o=!0,this.minorStepIdx=l;break}if(o===!0)break}}is_major(e){return e%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])===0}getStep(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}getFirstMajor(){const e=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(e-this._start%e)%e)}formatValue(e){let s=e.toPrecision(5);return typeof this.formattingFunction=="function"&&(s=this.formattingFunction(e)),typeof s=="number"?`${s}`:typeof s=="string"?s:e.toPrecision(5)}getLines(){const e=[],s=this.getStep(),n=(s-this._start%s)%s;for(let r=this._start+n;this._end-r>1e-5;r+=s)r!=this._start&&e.push({major:this.is_major(r),y:this.convertValue(r),val:this.formatValue(r)});return e}followScale(e){const s=this.minorStepIdx,n=this._start,r=this._end,o=this,a=()=>{o.magnitudefactor*=2},l=()=>{o.magnitudefactor/=2};e.minorStepIdx<=1&&this.minorStepIdx<=1||e.minorStepIdx>1&&this.minorStepIdx>1||(e.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,s==2||a(),a()):(this.minorStepIdx=2,s==1||l(),l()));const h=e.convertValue(0),d=e.getStep()*e.scale;let u=!1,c=0;for(;!u&&c++<5;){this.scale=d/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);const f=this.containerHeight/this.scale;this._start=n,this._end=this._start+f;const p=this._end*this.scale,g=this.magnitudefactor*this.majorSteps[this.minorStepIdx],y=this.getFirstMajor()-e.getFirstMajor();if(this.zeroAlign){const v=h-p;this._end+=v/this.scale,this._start=this._end-f}else this.autoScaleStart?(this._start-=y/this.scale,this._end=this._start+f):(this._start+=g-y/this.scale,this._end=this._start+f);if(!this.autoScaleEnd&&this._end>r+1e-5){l(),u=!1;continue}if(!this.autoScaleStart&&this._start<n-1e-5)if(this.zeroAlign&&n>=0)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{l(),u=!1;continue}if(this.autoScaleStart&&this.autoScaleEnd&&f<r-n){a(),u=!1;continue}u=!0}}convertValue(e){return this.containerHeight-(e-this._start)*this.scale}screenToValue(e){return(this.containerHeight-e)/this.scale+this._start}}class Ea extends $t{constructor(e,s,n,r){super(),this.id=ri(),this.body=e,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format(a){return`${parseFloat(a.toPrecision(3))}`},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},format(a){return`${parseFloat(a.toPrecision(3))}`},title:{text:void 0,style:void 0}}},this.linegraphOptions=r,this.linegraphSVG=n,this.props={},this.DOMelements={lines:{},labels:{},title:{}},this.dom={},this.scale=void 0,this.range={start:0,end:0},this.options=m.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(s),this.width=Number(`${this.options.width}`.replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.getBoundingClientRect().height,this.hidden=!1,this.stepPixels=25,this.zeroCrossing=-1,this.amountOfSteps=-1,this.lineOffset=0,this.master=!0,this.masterAxis=null,this.svgElements={},this.iconsRemoved=!1,this.groups={},this.amountOfGroups=0,this._create(),this.scale==null&&this._redrawLabels(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};const o=this;this.body.emitter.on("verticalDrag",()=>{o.dom.lineContainer.style.top=`${o.body.domProps.scrollTop}px`})}addGroup(e,s){this.groups.hasOwnProperty(e)||(this.groups[e]=s),this.amountOfGroups+=1}updateGroup(e,s){this.groups.hasOwnProperty(e)||(this.amountOfGroups+=1),this.groups[e]=s}removeGroup(e){this.groups.hasOwnProperty(e)&&(delete this.groups[e],this.amountOfGroups-=1)}setOptions(e){if(e){let s=!1;this.options.orientation!=e.orientation&&e.orientation!==void 0&&(s=!0);const n=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible","left","right","alignZeros"];m.selectiveDeepExtend(n,this.options,e),this.minWidth=Number(`${this.options.width}`.replace("px","")),s===!0&&this.dom.frame&&(this.hide(),this.show())}}_create(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.dom.lineContainer.style.position="relative",this.dom.lineContainer.style.visibility="visible",this.dom.lineContainer.style.display="block",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)}_redrawGroupIcons(){Yt(this.svgElements);let e;const s=this.options.iconWidth,n=15,r=4;let o=r+.5*n;this.options.orientation==="left"?e=r:e=this.width-s-r;const a=Object.keys(this.groups);a.sort((l,h)=>l<h?-1:1);for(const l of a)this.groups[l].visible===!0&&(this.linegraphOptions.visibility[l]===void 0||this.linegraphOptions.visibility[l]===!0)&&(this.groups[l].getLegend(s,n,this.framework,e,o),o+=n+r);Be(this.svgElements),this.iconsRemoved=!1}_cleanupIcons(){this.iconsRemoved===!1&&(Yt(this.svgElements),Be(this.svgElements),this.iconsRemoved=!0)}show(){this.hidden=!1,this.dom.frame.parentNode||(this.options.orientation==="left"?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer),this.dom.lineContainer.style.display="block"}hide(){this.hidden=!0,this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.style.display="none"}setRange(e,s){this.range.start=e,this.range.end=s}redraw(){let e=!1,s=0;this.dom.lineContainer.style.top=`${this.body.domProps.scrollTop}px`;for(const n in this.groups)this.groups.hasOwnProperty(n)&&this.groups[n].visible===!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]===!0)&&s++;if(this.amountOfGroups===0||s===0)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=`${this.height}px`,this.width=this.options.visible===!0?Number(`${this.options.width}`.replace("px","")):0;const n=this.props,r=this.dom.frame;r.className="vis-data-axis",this._calculateCharSize();const o=this.options.orientation,a=this.options.showMinorLabels,l=this.options.showMajorLabels,h=this.body.dom.backgroundHorizontal.offsetWidth;n.minorLabelHeight=a?n.minorCharHeight:0,n.majorLabelHeight=l?n.majorCharHeight:0,n.minorLineWidth=h-this.lineOffset-this.width+2*this.options.minorLinesOffset,n.minorLineHeight=1,n.majorLineWidth=h-this.lineOffset-this.width+2*this.options.majorLinesOffset,n.majorLineHeight=1,o==="left"?(r.style.top="0",r.style.left="0",r.style.bottom="",r.style.width=`${this.width}px`,r.style.height=`${this.height}px`,this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(r.style.top="",r.style.bottom="0",r.style.left="0",r.style.width=`${this.width}px`,r.style.height=`${this.height}px`,this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height),e=this._redrawLabels(),e=this._isResized()||e,this.options.icons===!0?this._redrawGroupIcons():this._cleanupIcons(),this._redrawTitle(o)}return e}_redrawLabels(){let e=!1;Yt(this.DOMelements.lines),Yt(this.DOMelements.labels);const s=this.options.orientation,n=this.options[s].range!=null?this.options[s].range:{};let r=!0;n.max!=null&&(this.range.end=n.max,r=!1);let o=!0;n.min!=null&&(this.range.start=n.min,o=!1),this.scale=new Nb(this.range.start,this.range.end,o,r,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[s].format),this.master===!1&&this.masterAxis!=null?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block",this.maxLabelSize=0,this.scale.getLines().forEach(d=>{const u=d.y,c=d.major;this.options.showMinorLabels&&c===!1&&this._redrawLabel(u-2,d.val,s,"vis-y-axis vis-minor",this.props.minorCharHeight),c&&u>=0&&this._redrawLabel(u-2,d.val,s,"vis-y-axis vis-major",this.props.majorCharHeight),this.master===!0&&(c?this._redrawLine(u,s,"vis-grid vis-horizontal vis-major",this.options.majorLinesOffset,this.props.majorLineWidth):this._redrawLine(u,s,"vis-grid vis-horizontal vis-minor",this.options.minorLinesOffset,this.props.minorLineWidth))});let l=0;this.options[s].title!==void 0&&this.options[s].title.text!==void 0&&(l=this.props.titleCharHeight);const h=this.options.icons===!0?Math.max(this.options.iconWidth,l)+this.options.labelOffsetX+15:l+this.options.labelOffsetX+15;return this.maxLabelSize>this.width-h&&this.options.visible===!0?(this.width=this.maxLabelSize+h,this.options.width=`${this.width}px`,Be(this.DOMelements.lines),Be(this.DOMelements.labels),this.redraw(),e=!0):this.maxLabelSize<this.width-h&&this.options.visible===!0&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+h),this.options.width=`${this.width}px`,Be(this.DOMelements.lines),Be(this.DOMelements.labels),this.redraw(),e=!0):(Be(this.DOMelements.lines),Be(this.DOMelements.labels),e=!1),e}convertValue(e){return this.scale.convertValue(e)}screenToValue(e){return this.scale.screenToValue(e)}_redrawLabel(e,s,n,r,o){const a=or("div",this.DOMelements.labels,this.dom.frame);a.className=r,a.innerHTML=m.xss(s),n==="left"?(a.style.left=`-${this.options.labelOffsetX}px`,a.style.textAlign="right"):(a.style.right=`-${this.options.labelOffsetX}px`,a.style.textAlign="left"),a.style.top=`${e-.5*o+this.options.labelOffsetY}px`,s+="";const l=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<s.length*l&&(this.maxLabelSize=s.length*l)}_redrawLine(e,s,n,r,o){if(this.master===!0){const a=or("div",this.DOMelements.lines,this.dom.lineContainer);a.className=n,a.innerHTML="",s==="left"?a.style.left=`${this.width-r}px`:a.style.right=`${this.width-r}px`,a.style.width=`${o}px`,a.style.top=`${e}px`}}_redrawTitle(e){if(Yt(this.DOMelements.title),this.options[e].title!==void 0&&this.options[e].title.text!==void 0){const s=or("div",this.DOMelements.title,this.dom.frame);s.className=`vis-y-axis vis-title vis-${e}`,s.innerHTML=m.xss(this.options[e].title.text),this.options[e].title.style!==void 0&&m.addCssText(s,this.options[e].title.style),e==="left"?s.style.left=`${this.props.titleCharHeight}px`:s.style.right=`${this.props.titleCharHeight}px`,s.style.width=`${this.height}px`}Be(this.DOMelements.title)}_calculateCharSize(){if(!("minorCharHeight"in this.props)){const e=document.createTextNode("0"),s=document.createElement("div");s.className="vis-y-axis vis-minor vis-measure",s.appendChild(e),this.dom.frame.appendChild(s),this.props.minorCharHeight=s.clientHeight,this.props.minorCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}if(!("majorCharHeight"in this.props)){const e=document.createTextNode("0"),s=document.createElement("div");s.className="vis-y-axis vis-major vis-measure",s.appendChild(e),this.dom.frame.appendChild(s),this.props.majorCharHeight=s.clientHeight,this.props.majorCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}if(!("titleCharHeight"in this.props)){const e=document.createTextNode("0"),s=document.createElement("div");s.className="vis-y-axis vis-title vis-measure",s.appendChild(e),this.dom.frame.appendChild(s),this.props.titleCharHeight=s.clientHeight,this.props.titleCharWidth=s.clientWidth,this.dom.frame.removeChild(s)}}}function Ys(t,e){}Ys.draw=function(t,e,s,n){n=n||0;for(var r=Ab(s,e),o=0;o<t.length;o++)if(!r)Bi(t[o].screen_x+n,t[o].screen_y,Fr(e),s.svgElements,s.svg,t[o].label);else{var a=r(t[o],e);(a===!0||typeof a=="object")&&Bi(t[o].screen_x+n,t[o].screen_y,Fr(e,a),s.svgElements,s.svg,t[o].label)}};Ys.drawIcon=function(t,e,s,n,r,o){var a=r*.5,l=it("rect",o.svgElements,o.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",s-a),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline"),Bi(e+.5*n,s,Fr(t),o.svgElements,o.svg)};function Fr(t,e){return e=typeof e>"u"?{}:e,{style:e.style||t.options.drawPoints.style,styles:e.styles||t.options.drawPoints.styles,size:e.size||t.options.drawPoints.size,className:e.className||t.className}}function Ab(t,e){var s=void 0;return t.options&&t.options.drawPoints&&t.options.drawPoints.onRender&&typeof t.options.drawPoints.onRender=="function"&&(s=t.options.drawPoints.onRender),e.group.options&&e.group.options.drawPoints&&e.group.options.drawPoints.onRender&&typeof e.group.options.drawPoints.onRender=="function"&&(s=e.group.options.drawPoints.onRender),s}function Ee(t,e){}Ee.drawIcon=function(t,e,s,n,r,o){var a=r*.5,l=it("rect",o.svgElements,o.svg);l.setAttributeNS(null,"x",e),l.setAttributeNS(null,"y",s-a),l.setAttributeNS(null,"width",n),l.setAttributeNS(null,"height",2*a),l.setAttributeNS(null,"class","vis-outline");var h=Math.round(.3*n),d=t.options.barChart.width,u=d/h,c=Math.round(.4*r),f=Math.round(.75*r),p=Math.round((n-2*h)/3);if(Rr(e+.5*h+p,s+a-c-1,h,c,t.className+" vis-bar",o.svgElements,o.svg,t.style),Rr(e+1.5*h+p+2,s+a-f-1,h,f,t.className+" vis-bar",o.svgElements,o.svg,t.style),t.options.drawPoints.enabled==!0){var g={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size/u,className:t.className};Bi(e+.5*h+p,s+a-c-1,g,o.svgElements,o.svg),Bi(e+1.5*h+p+2,s+a-f-1,g,o.svgElements,o.svg)}};Ee.draw=function(t,e,s){var n=[],r={},o,a,l,h,d,u,c=0;for(d=0;d<t.length;d++)if(h=s.groups[t[d]],h.options.style==="bar"&&h.visible===!0&&(s.options.groups.visibility[t[d]]===void 0||s.options.groups.visibility[t[d]]===!0))for(u=0;u<e[t[d]].length;u++)n.push({screen_x:e[t[d]][u].screen_x,screen_end:e[t[d]][u].screen_end,screen_y:e[t[d]][u].screen_y,x:e[t[d]][u].x,end:e[t[d]][u].end,y:e[t[d]][u].y,groupId:t[d],label:e[t[d]][u].label}),c+=1;if(c!==0)for(n.sort(function(y,v){return y.screen_x===v.screen_x?y.groupId<v.groupId?-1:1:y.screen_x-v.screen_x}),Ee._getDataIntersections(r,n),d=0;d<n.length;d++){h=s.groups[n[d].groupId];var f=h.options.barChart.minWidth!=null?h.options.barChart.minWidth:.1*h.options.barChart.width;a=n[d].screen_x;var p=0;if(r[a]===void 0)d+1<n.length&&(o=Math.abs(n[d+1].screen_x-a)),l=Ee._getSafeDrawData(o,h,f);else{var g=d+(r[a].amount-r[a].resolved);g<n.length&&(o=Math.abs(n[g].screen_x-a)),l=Ee._getSafeDrawData(o,h,f),r[a].resolved+=1,h.options.stack===!0&&h.options.excludeFromStacking!==!0?n[d].screen_y<h.zeroPosition?(p=r[a].accumulatedNegative,r[a].accumulatedNegative+=h.zeroPosition-n[d].screen_y):(p=r[a].accumulatedPositive,r[a].accumulatedPositive+=h.zeroPosition-n[d].screen_y):h.options.barChart.sideBySide===!0&&(l.width=l.width/r[a].amount,l.offset+=r[a].resolved*l.width-.5*l.width*(r[a].amount+1))}let y=l.width,v=n[d].screen_x;if(n[d].screen_end!=null?(y=n[d].screen_end-n[d].screen_x,v+=y*.5):v+=l.offset,Rr(v,n[d].screen_y-p,y,h.zeroPosition-n[d].screen_y,h.className+" vis-bar",s.svgElements,s.svg,h.style),h.options.drawPoints.enabled===!0){let _={screen_x:n[d].screen_x,screen_y:n[d].screen_y-p,x:n[d].x,y:n[d].y,groupId:n[d].groupId,label:n[d].label};Ys.draw([_],h,s,l.offset)}}};Ee._getDataIntersections=function(t,e){for(var s,n=0;n<e.length;n++)n+1<e.length&&(s=Math.abs(e[n+1].screen_x-e[n].screen_x)),n>0&&(s=Math.min(s,Math.abs(e[n-1].screen_x-e[n].screen_x))),s===0&&(t[e[n].screen_x]===void 0&&(t[e[n].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),t[e[n].screen_x].amount+=1)};Ee._getSafeDrawData=function(t,e,s){var n,r;return t<e.options.barChart.width&&t>0?(n=t<s?s:t,r=0,e.options.barChart.align==="left"?r-=.5*t:e.options.barChart.align==="right"&&(r+=.5*t)):(n=e.options.barChart.width,r=0,e.options.barChart.align==="left"?r-=.5*e.options.barChart.width:e.options.barChart.align==="right"&&(r+=.5*e.options.barChart.width)),{width:n,offset:r}};Ee.getStackedYRange=function(t,e,s,n,r){if(t.length>0){t.sort(function(a,l){return a.screen_x===l.screen_x?a.groupId<l.groupId?-1:1:a.screen_x-l.screen_x});var o={};Ee._getDataIntersections(o,t),e[n]=Ee._getStackedYRange(o,t),e[n].yAxisOrientation=r,s.push(n)}};Ee._getStackedYRange=function(t,e){for(var s,n=e[0].screen_y,r=e[0].screen_y,o=0;o<e.length;o++)s=e[o].screen_x,t[s]===void 0?(n=n>e[o].screen_y?e[o].screen_y:n,r=r<e[o].screen_y?e[o].screen_y:r):e[o].screen_y<0?t[s].accumulatedNegative+=e[o].screen_y:t[s].accumulatedPositive+=e[o].screen_y;for(var a in t)t.hasOwnProperty(a)&&(n=n>t[a].accumulatedNegative?t[a].accumulatedNegative:n,n=n>t[a].accumulatedPositive?t[a].accumulatedPositive:n,r=r<t[a].accumulatedNegative?t[a].accumulatedNegative:r,r=r<t[a].accumulatedPositive?t[a].accumulatedPositive:r);return{min:n,max:r}};function _e(t,e){}_e.calcPath=function(t,e){if(t!=null&&t.length>0){var s=[];return e.options.interpolation.enabled==!0?s=_e._catmullRom(t,e):s=_e._linear(t),s}};_e.drawIcon=function(t,e,s,n,r,o){var a=r*.5,l,h,d=it("rect",o.svgElements,o.svg);if(d.setAttributeNS(null,"x",e),d.setAttributeNS(null,"y",s-a),d.setAttributeNS(null,"width",n),d.setAttributeNS(null,"height",2*a),d.setAttributeNS(null,"class","vis-outline"),l=it("path",o.svgElements,o.svg),l.setAttributeNS(null,"class",t.className),t.style!==void 0&&l.setAttributeNS(null,"style",t.style),l.setAttributeNS(null,"d","M"+e+","+s+" L"+(e+n)+","+s),t.options.shaded.enabled==!0&&(h=it("path",o.svgElements,o.svg),t.options.shaded.orientation=="top"?h.setAttributeNS(null,"d","M"+e+", "+(s-a)+"L"+e+","+s+" L"+(e+n)+","+s+" L"+(e+n)+","+(s-a)):h.setAttributeNS(null,"d","M"+e+","+s+" L"+e+","+(s+a)+" L"+(e+n)+","+(s+a)+"L"+(e+n)+","+s),h.setAttributeNS(null,"class",t.className+" vis-icon-fill"),t.options.shaded.style!==void 0&&t.options.shaded.style!==""&&h.setAttributeNS(null,"style",t.options.shaded.style)),t.options.drawPoints.enabled==!0){var u={style:t.options.drawPoints.style,styles:t.options.drawPoints.styles,size:t.options.drawPoints.size,className:t.className};Bi(e+.5*n,s,u,o.svgElements,o.svg)}};_e.drawShading=function(t,e,s,n){if(e.options.shaded.enabled==!0){var r=Number(n.svg.style.height.replace("px","")),o=it("path",n.svgElements,n.svg),a="L";e.options.interpolation.enabled==!0&&(a="C");var l,h=0;e.options.shaded.orientation=="top"?h=0:e.options.shaded.orientation=="bottom"?h=r:h=Math.min(Math.max(0,e.zeroPosition),r),e.options.shaded.orientation=="group"&&s!=null&&s!=null?l="M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,a,!1)+" L"+s[s.length-1][0]+","+s[s.length-1][1]+" "+this.serializePath(s,a,!0)+s[0][0]+","+s[0][1]+" Z":l="M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,a,!1)+" V"+h+" H"+t[0][0]+" Z",o.setAttributeNS(null,"class",e.className+" vis-fill"),e.options.shaded.style!==void 0&&o.setAttributeNS(null,"style",e.options.shaded.style),o.setAttributeNS(null,"d",l)}};_e.draw=function(t,e,s){if(t!=null&&t!=null){var n=it("path",s.svgElements,s.svg);n.setAttributeNS(null,"class",e.className),e.style!==void 0&&n.setAttributeNS(null,"style",e.style);var r="L";e.options.interpolation.enabled==!0&&(r="C"),n.setAttributeNS(null,"d","M"+t[0][0]+","+t[0][1]+" "+this.serializePath(t,r,!1))}};_e.serializePath=function(t,e,s){if(t.length<2)return"";var n=e,r;if(s)for(r=t.length-2;r>0;r--)n+=t[r][0]+","+t[r][1]+" ";else for(r=1;r<t.length;r++)n+=t[r][0]+","+t[r][1]+" ";return n};_e._catmullRomUniform=function(t){var e,s,n,r,o,a,l=[];l.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var h=1/6,d=t.length,u=0;u<d-1;u++)e=u==0?t[0]:t[u-1],s=t[u],n=t[u+1],r=u+2<d?t[u+2]:n,o={screen_x:(-e.screen_x+6*s.screen_x+n.screen_x)*h,screen_y:(-e.screen_y+6*s.screen_y+n.screen_y)*h},a={screen_x:(s.screen_x+6*n.screen_x-r.screen_x)*h,screen_y:(s.screen_y+6*n.screen_y-r.screen_y)*h},l.push([o.screen_x,o.screen_y]),l.push([a.screen_x,a.screen_y]),l.push([n.screen_x,n.screen_y]);return l};_e._catmullRom=function(t,e){var s=e.options.interpolation.alpha;if(s==0||s===void 0)return this._catmullRomUniform(t);var n,r,o,a,l,h,d,u,c,f,p,g,y,v,_,D,C,A,M,E=[];E.push([Math.round(t[0].screen_x),Math.round(t[0].screen_y)]);for(var I=t.length,B=0;B<I-1;B++)n=B==0?t[0]:t[B-1],r=t[B],o=t[B+1],a=B+2<I?t[B+2]:o,d=Math.sqrt(Math.pow(n.screen_x-r.screen_x,2)+Math.pow(n.screen_y-r.screen_y,2)),u=Math.sqrt(Math.pow(r.screen_x-o.screen_x,2)+Math.pow(r.screen_y-o.screen_y,2)),c=Math.sqrt(Math.pow(o.screen_x-a.screen_x,2)+Math.pow(o.screen_y-a.screen_y,2)),v=Math.pow(c,s),D=Math.pow(c,2*s),_=Math.pow(u,s),C=Math.pow(u,2*s),M=Math.pow(d,s),A=Math.pow(d,2*s),f=2*A+3*M*_+C,p=2*D+3*v*_+C,g=3*M*(M+_),g>0&&(g=1/g),y=3*v*(v+_),y>0&&(y=1/y),l={screen_x:(-C*n.screen_x+f*r.screen_x+A*o.screen_x)*g,screen_y:(-C*n.screen_y+f*r.screen_y+A*o.screen_y)*g},h={screen_x:(D*r.screen_x+p*o.screen_x-C*a.screen_x)*y,screen_y:(D*r.screen_y+p*o.screen_y-C*a.screen_y)*y},l.screen_x==0&&l.screen_y==0&&(l=r),h.screen_x==0&&h.screen_y==0&&(h=o),E.push([l.screen_x,l.screen_y]),E.push([h.screen_x,h.screen_y]),E.push([o.screen_x,o.screen_y]);return E};_e._linear=function(t){for(var e=[],s=0;s<t.length;s++)e.push([t[s].screen_x,t[s].screen_y]);return e};function jt(t,e,s,n){this.id=e;var r=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","interpolation","zIndex","excludeFromStacking","excludeFromLegend"];this.options=m.selectiveBridgeObject(r,s),this.usingDefaultStyle=t.className===void 0,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(t),this.usingDefaultStyle==!0&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[],this.visible=t.visible===void 0?!0:t.visible}jt.prototype.setItems=function(t){t!=null?(this.itemsData=t,this.options.sort==!0&&m.insertSort(this.itemsData,function(e,s){return e.x>s.x?1:-1})):this.itemsData=[]};jt.prototype.getItems=function(){return this.itemsData};jt.prototype.setZeroPosition=function(t){this.zeroPosition=t};jt.prototype.setOptions=function(t){if(t!==void 0){var e=["sampling","style","sort","yAxisOrientation","barChart","zIndex","excludeFromStacking","excludeFromLegend"];m.selectiveDeepExtend(e,this.options,t),typeof t.drawPoints=="function"&&(t.drawPoints={onRender:t.drawPoints}),m.mergeOptions(this.options,t,"interpolation"),m.mergeOptions(this.options,t,"drawPoints"),m.mergeOptions(this.options,t,"shaded"),t.interpolation&&typeof t.interpolation=="object"&&t.interpolation.parametrization&&(t.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:t.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5))}};jt.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10,this.visible=t.visible===void 0?!0:t.visible,this.style=t.style,this.setOptions(t.options)};jt.prototype.getLegend=function(t,e,s,n,r){if(s==null||s==null){var o=document.createElementNS("http://www.w3.org/2000/svg","svg");s={svg:o,svgElements:{},options:this.options,groups:[this]}}switch((n==null||n==null)&&(n=0),(r==null||r==null)&&(r=.5*e),this.options.style){case"line":_e.drawIcon(this,n,r,t,e,s);break;case"points":case"point":Ys.drawIcon(this,n,r,t,e,s);break;case"bar":Ee.drawIcon(this,n,r,t,e,s);break}return{icon:s.svg,label:this.content,orientation:this.options.yAxisOrientation}};jt.prototype.getYRange=function(t){for(var e=t[0].y,s=t[0].y,n=0;n<t.length;n++)e=e>t[n].y?t[n].y:e,s=s<t[n].y?t[n].y:s;return{min:e,max:s,yAxisOrientation:this.options.yAxisOrientation}};function He(t,e,s,n){this.body=t,this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}},this.side=s,this.options=m.extend({},this.defaultOptions),this.linegraphOptions=n,this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups},this.setOptions(e)}He.prototype=new $t;He.prototype.clear=function(){this.groups={},this.amountOfGroups=0};He.prototype.addGroup=function(t,e){e.options.excludeFromLegend!=!0&&(this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1)};He.prototype.updateGroup=function(t,e){this.groups[t]=e};He.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)};He.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="vis-legend-text",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.svg.style.height="100%",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)};He.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};He.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};He.prototype.setOptions=function(t){var e=["enabled","orientation","icons","left","right"];m.selectiveDeepExtend(e,this.options,t)};He.prototype.redraw=function(){var t=0,e=Object.keys(this.groups);e.sort(function(a,l){return a<l?-1:1});for(var s=0;s<e.length;s++){var n=e[s];this.groups[n].visible==!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]==!0)&&t++}if(this.options[this.side].visible==!1||this.amountOfGroups==0||this.options.enabled==!1||t==0)this.hide();else{if(this.show(),this.options[this.side].position=="top-left"||this.options[this.side].position=="bottom-left"?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),this.options[this.side].position=="top-left"||this.options[this.side].position=="top-right")this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom="";else{var r=this.body.domProps.center.height-this.body.domProps.centerContainer.height;this.dom.frame.style.bottom=4+r+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""}this.options.icons==!1?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var o="";for(s=0;s<e.length;s++)n=e[s],this.groups[n].visible==!0&&(this.linegraphOptions.visibility[n]===void 0||this.linegraphOptions.visibility[n]==!0)&&(o+=this.groups[n].content+"<br />");this.dom.textArea.innerHTML=m.xss(o),this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};He.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var t=Object.keys(this.groups);t.sort(function(d,u){return d<u?-1:1}),Mb(this.svgElements);var e=window.getComputedStyle(this.dom.frame).paddingTop,s=Number(e.replace("px","")),n=s,r=this.options.iconSize,o=.75*this.options.iconSize,a=s+.5*o+3;this.svg.style.width=r+5+s+"px";for(var l=0;l<t.length;l++){var h=t[l];this.groups[h].visible==!0&&(this.linegraphOptions.visibility[h]===void 0||this.linegraphOptions.visibility[h]==!0)&&(this.groups[h].getLegend(r,o,this.framework,n,a),a+=o+this.options.iconSpacing)}}};var On="__ungrouped__";function Q(t,e){this.id=ri(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}},this.options=m.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={},this.abortedGraphUpdate=!1,this.updateSVGheight=!1,this.updateSVGheightOnResize=!1,this.forceGraphUpdate=!0;var s=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(n,r,o){s._onAdd(r.items)},update:function(n,r,o){s._onUpdate(r.items)},remove:function(n,r,o){s._onRemove(r.items)}},this.groupListeners={add:function(n,r,o){s._onAddGroups(r.items)},update:function(n,r,o){s._onUpdateGroups(r.items)},remove:function(n,r,o){s._onRemoveGroups(r.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechanged",function(){s.svg.style.left=m.option.asSize(-s.props.width),s.forceGraphUpdate=!0,s.redraw.call(s)}),this._create(),this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}Q.prototype=new $t;Q.prototype._create=function(){var t=document.createElement("div");t.className="vis-line-graph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new Ea(this.body,this.options.dataAxis,this.svg,this.options.groups),this.options.dataAxis.orientation="right",this.yAxisRight=new Ea(this.body,this.options.dataAxis,this.svg,this.options.groups),delete this.options.dataAxis.orientation,this.legendLeft=new He(this.body,this.options.legend,"left",this.options.groups),this.legendRight=new He(this.body,this.options.legend,"right",this.options.groups),this.show()};Q.prototype.setOptions=function(t){if(t){var e=["sampling","defaultGroup","stack","height","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort","groups"];t.graphHeight===void 0&&t.height!==void 0?(this.updateSVGheight=!0,this.updateSVGheightOnResize=!0):this.body.domProps.centerContainer.height!==void 0&&t.graphHeight!==void 0&&parseInt((t.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),m.selectiveDeepExtend(e,this.options,t),m.mergeOptions(this.options,t,"interpolation"),m.mergeOptions(this.options,t,"drawPoints"),m.mergeOptions(this.options,t,"shaded"),m.mergeOptions(this.options,t,"legend"),t.interpolation&&typeof t.interpolation=="object"&&t.interpolation.parametrization&&(t.interpolation.parametrization=="uniform"?this.options.interpolation.alpha=0:t.interpolation.parametrization=="chordal"?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&t.dataAxis!==void 0&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&t.legend!==void 0&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(On)&&this.groups[On].setOptions(t)}this.dom.frame&&(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};Q.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};Q.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};Q.prototype.setItems=function(t){var e=this,s,n=this.itemsData;if(!t)this.itemsData=null;else if(Pt(t))this.itemsData=Gi(t);else throw new TypeError("Data must implement the interface of DataSet or DataView");if(n&&(m.forEach(this.itemListeners,function(o,a){n.off(a,o)}),n.dispose(),s=n.getIds(),this._onRemove(s)),this.itemsData){var r=this.id;m.forEach(this.itemListeners,function(o,a){e.itemsData.on(a,o,r)}),s=this.itemsData.getIds(),this._onAdd(s)}};Q.prototype.setGroups=function(t){var e=this,s;if(this.groupsData){m.forEach(this.groupListeners,function(o,a){e.groupsData.off(a,o)}),s=this.groupsData.getIds(),this.groupsData=null;for(var n=0;n<s.length;n++)this._removeGroup(s[n])}if(!t)this.groupsData=null;else if(Pt(t))this.groupsData=t;else throw new TypeError("Data must implement the interface of DataSet or DataView");if(this.groupsData){var r=this.id;m.forEach(this.groupListeners,function(o,a){e.groupsData.on(a,o,r)}),s=this.groupsData.getIds(),this._onAddGroups(s)}};Q.prototype._onUpdate=function(t){this._updateAllGroupData(t)};Q.prototype._onAdd=function(t){this._onUpdate(t)};Q.prototype._onRemove=function(t){this._onUpdate(t)};Q.prototype._onUpdateGroups=function(t){this._updateAllGroupData(null,t)};Q.prototype._onAddGroups=function(t){this._onUpdateGroups(t)};Q.prototype._onRemoveGroups=function(t){for(var e=0;e<t.length;e++)this._removeGroup(t[e]);this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})};Q.prototype._removeGroup=function(t){this.groups.hasOwnProperty(t)&&(this.groups[t].options.yAxisOrientation=="right"?(this.yAxisRight.removeGroup(t),this.legendRight.removeGroup(t),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t),this.legendLeft.removeGroup(t),this.legendLeft.redraw()),delete this.groups[t])};Q.prototype._updateGroup=function(t,e){this.groups.hasOwnProperty(e)?(this.groups[e].update(t),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e]),this.yAxisLeft.removeGroup(e),this.legendLeft.removeGroup(e)):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]),this.yAxisRight.removeGroup(e),this.legendRight.removeGroup(e))):(this.groups[e]=new jt(t,e,this.options,this.groupsUsingDefaultStyles),this.groups[e].options.yAxisOrientation=="right"?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()};Q.prototype._updateAllGroupData=function(t,e){if(this.itemsData!=null){var s={},n=this.itemsData.get(),r=this.itemsData.idProp,o={};t&&t.map(function(v){o[v]=v});for(var a={},l=0;l<n.length;l++){var h=n[l],d=h.group;d==null&&(d=On),a.hasOwnProperty(d)?a[d]++:a[d]=1}var u={};if(!e&&t){for(d in this.groups)if(this.groups.hasOwnProperty(d)){y=this.groups[d];var c=y.getItems();s[d]=c.filter(function(v){return u[v[r]]=v[r],v[r]!==o[v[r]]});var f=a[d];a[d]-=s[d].length,s[d].length<f&&(s[d][f-1]={})}}for(l=0;l<n.length;l++)if(h=n[l],d=h.group,d==null&&(d=On),!(!e&&t&&h[r]!==o[h[r]]&&u.hasOwnProperty(h[r]))){s.hasOwnProperty(d)||(s[d]=new Array(a[d]));var p=m.bridgeObject(h);p.x=m.convert(h.x,"Date"),p.end=m.convert(h.end,"Date"),p.orginalY=h.y,p.y=Number(h.y),p[r]=h[r];var g=s[d].length-a[d]--;s[d][g]=p}for(d in this.groups)this.groups.hasOwnProperty(d)&&(s.hasOwnProperty(d)||(s[d]=new Array(0)));for(d in s)if(s.hasOwnProperty(d))if(s[d].length==0)this.groups.hasOwnProperty(d)&&this._removeGroup(d);else{var y=void 0;this.groupsData!=null&&(y=this.groupsData.get(d)),y==null&&(y={id:d,content:this.options.defaultGroup+d}),this._updateGroup(y,d),this.groups[d].setItems(s[d])}this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0})}};Q.prototype.redraw=function(){var t=!1;this.props.width=this.dom.frame.offsetWidth,this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom,t=this._isResized()||t;var e=this.body.range.end-this.body.range.start,s=e!=this.lastVisibleInterval;if(this.lastVisibleInterval=e,t==!0&&(this.svg.style.width=m.option.asSize(3*this.props.width),this.svg.style.left=m.option.asSize(-this.props.width),((this.options.height+"").indexOf("%")!=-1||this.updateSVGheightOnResize==!0)&&(this.updateSVGheight=!0)),this.updateSVGheight==!0?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",t==!0||s==!0||this.abortedGraphUpdate==!0||this.forceGraphUpdate==!0)t=this._updateGraph()||t,this.forceGraphUpdate=!1,this.lastStart=this.body.range.start,this.svg.style.left=-this.props.width+"px";else if(this.lastStart!=0){var n=this.body.range.start-this.lastStart,r=this.body.range.end-this.body.range.start;if(this.props.width!=0){var o=this.props.width/r,a=n*o;this.svg.style.left=-this.props.width-a+"px"}}return this.legendLeft.redraw(),this.legendRight.redraw(),t};Q.prototype._getSortedGroupIds=function(){var t=[];for(var e in this.groups)if(this.groups.hasOwnProperty(e)){var s=this.groups[e];s.visible==!0&&(this.options.groups.visibility[e]===void 0||this.options.groups.visibility[e]==!0)&&t.push({id:e,zIndex:s.options.zIndex})}m.insertSort(t,function(o,a){var l=o.zIndex,h=a.zIndex;return l===void 0&&(l=0),h===void 0&&(h=0),l==h?0:l<h?-1:1});for(var n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r].id;return n};Q.prototype._updateGraph=function(){if(Yt(this.svgElements),this.props.width!=0&&this.itemsData!=null){var t,e,s={},n=!1,r=this.body.util.toGlobalTime(-this.body.domProps.root.width),o=this.body.util.toGlobalTime(2*this.body.domProps.root.width),a=this._getSortedGroupIds();if(a.length>0){var l={};for(this._getRelevantData(a,l,r,o),this._applySampling(a,l),e=0;e<a.length;e++)this._convertXcoordinates(l[a[e]]);if(this._getYRanges(a,l,s),n=this._updateYAxis(a,s),n==!0)return Be(this.svgElements),this.abortedGraphUpdate=!0,!0;this.abortedGraphUpdate=!1;var h=void 0;for(e=0;e<a.length;e++)t=this.groups[a[e]],this.options.stack===!0&&this.options.style==="line"&&(t.options.excludeFromStacking==null||!t.options.excludeFromStacking)&&(h!=null&&(this._stack(l[t.id],l[h.id]),t.options.shaded.enabled==!0&&t.options.shaded.orientation!=="group"&&(t.options.shaded.orientation=="top"&&h.options.shaded.orientation!=="group"?(h.options.shaded.orientation="group",h.options.shaded.groupId=t.id):(t.options.shaded.orientation="group",t.options.shaded.groupId=h.id))),h=t),this._convertYcoordinates(l[a[e]],t);var d={};for(e=0;e<a.length;e++)if(t=this.groups[a[e]],t.options.style==="line"&&t.options.shaded.enabled==!0){var u=l[a[e]];if(u==null||u.length==0)continue;if(d.hasOwnProperty(a[e])||(d[a[e]]=_e.calcPath(u,t)),t.options.shaded.orientation==="group"){var c=t.options.shaded.groupId;if(a.indexOf(c)===-1){console.log(t.id+": Unknown shading group target given:"+c);continue}d.hasOwnProperty(c)||(d[c]=_e.calcPath(l[c],this.groups[c])),_e.drawShading(d[a[e]],t,d[c],this.framework)}else _e.drawShading(d[a[e]],t,void 0,this.framework)}for(Ee.draw(a,l,this.framework),e=0;e<a.length;e++)if(t=this.groups[a[e]],l[a[e]].length>0)switch(t.options.style){case"line":d.hasOwnProperty(a[e])||(d[a[e]]=_e.calcPath(l[a[e]],t)),_e.draw(d[a[e]],t,this.framework);case"point":case"points":(t.options.style=="point"||t.options.style=="points"||t.options.drawPoints.enabled==!0)&&Ys.draw(l[a[e]],t,this.framework);break}}}return Be(this.svgElements),!1};Q.prototype._stack=function(t,e){var s,n,r,o,a;s=0;for(var l=0;l<t.length;l++){o=void 0,a=void 0;for(var h=s;h<e.length;h++)if(e[h].x===t[l].x){o=e[h],a=e[h],s=h;break}else if(e[h].x>t[l].x){a=e[h],h==0?o=a:o=e[h-1],s=h;break}a===void 0&&(o=e[e.length-1],a=e[e.length-1]),n=a.x-o.x,r=a.y-o.y,n==0?t[l].y=t[l].orginalY+a.y:t[l].y=t[l].orginalY+r/n*(t[l].x-o.x)+o.y}};Q.prototype._getRelevantData=function(t,e,s,n){var r,o,a,l;if(t.length>0)for(o=0;o<t.length;o++){r=this.groups[t[o]];var h=r.getItems();if(r.options.sort==!0){var d=function(p,g){return p.getTime()==g.getTime()?0:p<g?-1:1},u=Math.max(0,m.binarySearchValue(h,s,"x","before",d)),c=Math.min(h.length,m.binarySearchValue(h,n,"x","after",d)+1);c<=0&&(c=h.length);var f=new Array(c-u);for(a=u;a<c;a++)l=r.itemsData[a],f[a-u]=l;e[t[o]]=f}else e[t[o]]=r.itemsData}};Q.prototype._applySampling=function(t,e){var s;if(t.length>0){for(var n=0;n<t.length;n++)if(s=this.groups[t[n]],s.options.sampling==!0){var r=e[t[n]];if(r.length>0){var o=1,a=r.length,l=this.body.util.toGlobalScreen(r[r.length-1].x)-this.body.util.toGlobalScreen(r[0].x),h=a/l;o=Math.min(Math.ceil(.2*a),Math.max(1,Math.round(h)));for(var d=new Array(a),u=0;u<a;u+=o){var c=Math.round(u/o);d[c]=r[u]}e[t[n]]=d.splice(0,Math.round(a/o))}}}};Q.prototype._getYRanges=function(t,e,s){var n,r,o,a=[],l=[],h;if(t.length>0){for(o=0;o<t.length;o++)n=e[t[o]],h=this.groups[t[o]].options,n.length>0&&(r=this.groups[t[o]],h.stack===!0&&h.style==="bar"?h.yAxisOrientation==="left"?a=a.concat(n):l=l.concat(n):s[t[o]]=r.getYRange(n,t[o]));Ee.getStackedYRange(a,s,t,"__barStackLeft","left"),Ee.getStackedYRange(l,s,t,"__barStackRight","right")}};Q.prototype._updateYAxis=function(t,e){var s=!1,n=!1,r=!1,o=1e9,a=1e9,l=-1e9,h=-1e9,d,u;if(t.length>0){for(var c=0;c<t.length;c++){var f=this.groups[t[c]];f&&f.options.yAxisOrientation!="right"?(n=!0,o=1e9,l=-1e9):f&&f.options.yAxisOrientation&&(r=!0,a=1e9,h=-1e9)}for(c=0;c<t.length;c++)e.hasOwnProperty(t[c])&&e[t[c]].ignore!==!0&&(d=e[t[c]].min,u=e[t[c]].max,e[t[c]].yAxisOrientation!="right"?(n=!0,o=o>d?d:o,l=l<u?u:l):(r=!0,a=a>d?d:a,h=h<u?u:h));n==!0&&this.yAxisLeft.setRange(o,l),r==!0&&this.yAxisRight.setRange(a,h)}s=this._toggleAxisVisiblity(n,this.yAxisLeft)||s,s=this._toggleAxisVisiblity(r,this.yAxisRight)||s,r==!0&&n==!0?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!n,this.yAxisRight.masterAxis=this.yAxisLeft,this.yAxisRight.master==!1?(r==!0?this.yAxisLeft.lineOffset=this.yAxisRight.width:this.yAxisLeft.lineOffset=0,s=this.yAxisLeft.redraw()||s,s=this.yAxisRight.redraw()||s):s=this.yAxisRight.redraw()||s;var p=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(c=0;c<p.length;c++)t.indexOf(p[c])!=-1&&t.splice(t.indexOf(p[c]),1);return s};Q.prototype._toggleAxisVisiblity=function(t,e){var s=!1;return t==!1?e.dom.frame.parentNode&&e.hidden==!1&&(e.hide(),s=!0):!e.dom.frame.parentNode&&e.hidden==!0&&(e.show(),s=!0),s};Q.prototype._convertXcoordinates=function(t){for(var e=this.body.util.toScreen,s=0;s<t.length;s++)t[s].screen_x=e(t[s].x)+this.props.width,t[s].screen_y=t[s].y,t[s].end!=null?t[s].screen_end=e(t[s].end)+this.props.width:t[s].screen_end=void 0};Q.prototype._convertYcoordinates=function(t,e){var s=this.yAxisLeft,n=Number(this.svg.style.height.replace("px",""));e.options.yAxisOrientation=="right"&&(s=this.yAxisRight);for(var r=0;r<t.length;r++)t[r].screen_y=Math.round(s.convertValue(t[r].y));e.setZeroPosition(Math.min(n,s.convertValue(0)))};let W="string",V="boolean",Z="number",Ib="array",Si="date",ne="object",Rb="dom",Di="moment",Oa="any",Fb={configure:{enabled:{boolean:V},filter:{boolean:V,function:"function"},container:{dom:Rb},__type__:{object:ne,boolean:V,function:"function"}},alignCurrentTime:{string:W,undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:W},sort:{boolean:V},sampling:{boolean:V},stack:{boolean:V},graphHeight:{string:W,number:Z},shaded:{enabled:{boolean:V},orientation:{string:["bottom","top","zero","group"]},groupId:{object:ne},__type__:{boolean:V,object:ne}},style:{string:["line","bar","points"]},barChart:{width:{number:Z},minWidth:{number:Z},sideBySide:{boolean:V},align:{string:["left","center","right"]},__type__:{object:ne}},interpolation:{enabled:{boolean:V},parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:Z},__type__:{object:ne,boolean:V}},drawPoints:{enabled:{boolean:V},onRender:{function:"function"},size:{number:Z},style:{string:["square","circle"]},__type__:{object:ne,boolean:V,function:"function"}},dataAxis:{showMinorLabels:{boolean:V},showMajorLabels:{boolean:V},showWeekScale:{boolean:V},icons:{boolean:V},width:{string:W,number:Z},visible:{boolean:V},alignZeros:{boolean:V},left:{range:{min:{number:Z,undefined:"undefined"},max:{number:Z,undefined:"undefined"},__type__:{object:ne}},format:{function:"function"},title:{text:{string:W,number:Z,undefined:"undefined"},style:{string:W,undefined:"undefined"},__type__:{object:ne}},__type__:{object:ne}},right:{range:{min:{number:Z,undefined:"undefined"},max:{number:Z,undefined:"undefined"},__type__:{object:ne}},format:{function:"function"},title:{text:{string:W,number:Z,undefined:"undefined"},style:{string:W,undefined:"undefined"},__type__:{object:ne}},__type__:{object:ne}},__type__:{object:ne}},legend:{enabled:{boolean:V},icons:{boolean:V},left:{visible:{boolean:V},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:ne}},right:{visible:{boolean:V},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:ne}},__type__:{object:ne,boolean:V}},groups:{visibility:{any:Oa},__type__:{object:ne}},autoResize:{boolean:V},throttleRedraw:{number:Z},clickToUse:{boolean:V},end:{number:Z,date:Si,string:W,moment:Di},format:{minorLabels:{millisecond:{string:W,undefined:"undefined"},second:{string:W,undefined:"undefined"},minute:{string:W,undefined:"undefined"},hour:{string:W,undefined:"undefined"},weekday:{string:W,undefined:"undefined"},day:{string:W,undefined:"undefined"},week:{string:W,undefined:"undefined"},month:{string:W,undefined:"undefined"},quarter:{string:W,undefined:"undefined"},year:{string:W,undefined:"undefined"},__type__:{object:ne}},majorLabels:{millisecond:{string:W,undefined:"undefined"},second:{string:W,undefined:"undefined"},minute:{string:W,undefined:"undefined"},hour:{string:W,undefined:"undefined"},weekday:{string:W,undefined:"undefined"},day:{string:W,undefined:"undefined"},week:{string:W,undefined:"undefined"},month:{string:W,undefined:"undefined"},quarter:{string:W,undefined:"undefined"},year:{string:W,undefined:"undefined"},__type__:{object:ne}},__type__:{object:ne}},moment:{function:"function"},height:{string:W,number:Z},hiddenDates:{start:{date:Si,number:Z,string:W,moment:Di},end:{date:Si,number:Z,string:W,moment:Di},repeat:{string:W},__type__:{object:ne,array:Ib}},locale:{string:W},locales:{__any__:{any:Oa},__type__:{object:ne}},max:{date:Si,number:Z,string:W,moment:Di},maxHeight:{number:Z,string:W},maxMinorChars:{number:Z},min:{date:Si,number:Z,string:W,moment:Di},minHeight:{number:Z,string:W},moveable:{boolean:V},multiselect:{boolean:V},orientation:{string:W},showCurrentTime:{boolean:V},showMajorLabels:{boolean:V},showMinorLabels:{boolean:V},showWeekScale:{boolean:V},snap:{function:"function",null:"null"},start:{date:Si,number:Z,string:W,moment:Di},timeAxis:{scale:{string:W,undefined:"undefined"},step:{number:Z,undefined:"undefined"},__type__:{object:ne}},width:{string:W,number:Z},zoomable:{boolean:V},zoomKey:{string:["ctrlKey","altKey","metaKey",""]},zoomMax:{number:Z},zoomMin:{number:Z},zIndex:{number:Z},__type__:{object:ne}},Lb={global:{alignCurrentTime:["none","year","month","quarter","week","isoWeek","day","date","hour","minute","second"],sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal","chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536e10,10,31536e10,1],zoomMin:[10,10,31536e10,1],zIndex:0}};function It(t,e,s,n){if(!(Array.isArray(s)||Pt(s))&&s instanceof Object){var r=n;n=s,s=r}n&&n.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var o=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:Ae,width:null,height:null,maxHeight:null,minHeight:null},this.options=m.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{getScale(){return o.timeAxis.step.scale},getStep(){return o.timeAxis.step.step},toScreen:o._toScreen.bind(o),toGlobalScreen:o._toGlobalScreen.bind(o),toTime:o._toTime.bind(o),toGlobalTime:o._toGlobalTime.bind(o)}},this.range=new Vn(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new kn(this.body),this.components.push(this.timeAxis),this.currentTime=new Uh(this.body),this.components.push(this.currentTime),this.linegraph=new Q(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,this.on("tap",function(a){o.emit("click",o.getEventProperties(a))}),this.on("doubletap",function(a){o.emit("doubleClick",o.getEventProperties(a))}),this.dom.root.oncontextmenu=function(a){o.emit("contextmenu",o.getEventProperties(a))},this.initialFitDone=!1,this.on("changed",function(){if(o.itemsData!=null){if(!o.initialFitDone&&!o.options.rollingMode)if(o.initialFitDone=!0,o.options.start!=null||o.options.end!=null){if(o.options.start==null||o.options.end==null)var a=o.getItemRange();var l=o.options.start!=null?o.options.start:a.min,h=o.options.end!=null?o.options.end:a.max;o.setWindow(l,h,{animation:!1})}else o.fit({animation:!1});!o.initialDrawDone&&(o.initialRangeChangeDone||!o.options.start&&!o.options.end||o.options.rollingMode)&&(o.initialDrawDone=!0,o.dom.root.style.visibility="visible",o.dom.loadingScreen.parentNode.removeChild(o.dom.loadingScreen),o.options.onInitialDrawComplete&&setTimeout(()=>o.options.onInitialDrawComplete(),0))}}),n&&this.setOptions(n),s&&this.setGroups(s),e&&this.setItems(e),this._redraw()}It.prototype=new Ri;It.prototype.setOptions=function(t){re.validate(t,Fb)===!0&&console.log("%cErrors have been found in the supplied options object.",En),Ri.prototype.setOptions.call(this,t)};It.prototype.setItems=function(t){var e=this.itemsData==null,s;if(t?Pt(t)?s=Gi(t):s=Gi(new Wi(t)):s=null,this.itemsData&&this.itemsData.dispose(),this.itemsData=s,this.linegraph&&this.linegraph.setItems(s!=null?s.rawDS:null),e)if(this.options.start!=null||this.options.end!=null){var n=this.options.start!=null?this.options.start:null,r=this.options.end!=null?this.options.end:null;this.setWindow(n,r,{animation:!1})}else this.fit({animation:!1})};It.prototype.setGroups=function(t){var e;t?Pt(t)?e=t:e=new Wi(t):e=null,this.groupsData=e,this.linegraph.setGroups(e)};It.prototype.getLegend=function(t,e,s){return e===void 0&&(e=15),s===void 0&&(s=15),this.linegraph.groups[t]!==void 0?this.linegraph.groups[t].getLegend(e,s):"cannot find group:'"+t+"'"};It.prototype.isGroupVisible=function(t){return this.linegraph.groups[t]!==void 0?this.linegraph.groups[t].visible&&(this.linegraph.options.groups.visibility[t]===void 0||this.linegraph.options.groups.visibility[t]==!0):!1};It.prototype.getDataRange=function(){var t=null,e=null;for(var s in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(s)&&this.linegraph.groups[s].visible==!0)for(var n=0;n<this.linegraph.groups[s].itemsData.length;n++){var r=this.linegraph.groups[s].itemsData[n],o=m.convert(r.x,"Date").valueOf();t=t==null||t>o?o:t,e=e==null||e<o?o:e}return{min:t!=null?new Date(t):null,max:e!=null?new Date(e):null}};It.prototype.getEventProperties=function(t){var e=t.center?t.center.x:t.clientX,s=t.center?t.center.y:t.clientY,n=e-m.getAbsoluteLeft(this.dom.centerContainer),r=s-m.getAbsoluteTop(this.dom.centerContainer),o=this._toTime(n),a=No.customTimeFromTarget(t),l=m.getTarget(t),h=null;m.hasParent(l,this.timeAxis.dom.foreground)||this.timeAxis2&&m.hasParent(l,this.timeAxis2.dom.foreground)?h="axis":m.hasParent(l,this.linegraph.yAxisLeft.dom.frame)||m.hasParent(l,this.linegraph.yAxisRight.dom.frame)?h="data-axis":m.hasParent(l,this.linegraph.legendLeft.dom.frame)||m.hasParent(l,this.linegraph.legendRight.dom.frame)?h="legend":a!=null?h="custom-time":m.hasParent(l,this.currentTime.bar)?h="current-time":m.hasParent(l,this.dom.center)&&(h="background");var d=[],u=this.linegraph.yAxisLeft,c=this.linegraph.yAxisRight;return!u.hidden&&this.itemsData.length>0&&d.push(u.screenToValue(r)),!c.hidden&&this.itemsData.length>0&&d.push(c.screenToValue(r)),{event:t,customTime:a?a.options.id:null,what:h,pageX:t.srcEvent?t.srcEvent.pageX:t.pageX,pageY:t.srcEvent?t.srcEvent.pageY:t.pageY,x:n,y:r,time:o,value:d}};It.prototype._createConfigurator=function(){return new zh(this,this.dom.container,Lb)};const Hb=Pb();x.locale(Hb);class ar{constructor(){$(this,"id","");$(this,"type","task");$(this,"assignedTo","");$(this,"title","");$(this,"url","");$(this,"events",[])}}class nn{constructor(e="",s="",n=new Date){$(this,"event","");$(this,"changedBy","");$(this,"changedAt",new Date);this.event=e,this.changedBy=s,this.changedAt=n}}var Ke=(t=>(t.Task="task",t.Bug="bug",t.UserStory="user-story",t.PR="pr",t.Unknown="unknown",t))(Ke||{}),xt=(t=>(t.Overview="Общий",t.Detailed="Детализированный",t))(xt||{}),Lt=(t=>(t.WithTasks="Баги на уровне Tasks",t.WithRequirement="Баги на уровне User Story",t))(Lt||{});function Gb(){Qh();const[t,e]=ue.useState(""),[s,n]=ue.useState(null),[r,o]=ue.useState(!1),[a,l]=ue.useState([]),[h,d]=ue.useState(!1),[u,c]=ue.useState(null),[f,p]=ue.useState(xt.Overview),[g,y]=ue.useState(new Map),[v,_]=ue.useState(0),[D,C]=ue.useState(!0),[A,M]=ue.useState(9),[E,I]=ue.useState(18),[B,Ce]=ue.useState(3),[We,Ws]=ue.useState(2),[vt,vi]=ue.useState(4),[N,R]=ue.useState(Lt.WithTasks),[de,b]=ue.useState(!1),P=()=>{b(!0)},ye=()=>{b(!1)};ue.useEffect(()=>{const H=localStorage.getItem("settings");if(H){const ee=JSON.parse(H);C(ee.showInactivityWindows),M(ee.avgWorkdayStartHour),I(ee.avgWorkdayEndHour),Ce(ee.inactivityWindowInHours),Ws(ee.timeToTestInHours),vi(ee.timeToPRInHours)}},[]),ue.useEffect(()=>{localStorage.setItem("settings",JSON.stringify({showInactivityWindows:D,avgWorkdayStartHour:A,avgWorkdayEndHour:E,inactivityWindowInHours:B,timeToTestInHours:We,timeToPRInHours:vt,bugManagementMode:N})),_(v+1)},[D,A,E,B,We,vt,N]),ue.useEffect(()=>{a.length>0&&bt()},[a,f,N,v]);const we=()=>(async()=>{if(t==="")throw new Error("WorkItem is not specified");o(!0);const ee=await rd({projectId:void 0,teamId:void 0,query:`SELECT [System.Title], [System.WorkItemType] FROM WorkItems WHERE [System.Id] = ${t}`});if(ee.length===0)throw new Error("WorkItem not found");if(ee.length>1)throw new Error("Multiple WorkItems found");const Ge=ee[0];if(N===Lt.WithTasks&&Ge.fields["System.WorkItemType"]!=="User Story")throw new Error('WorkItem не является UserStory. Если это Bug c подзадачами, то в настройках можно выбрать "Режим работы с багами": "Баги на уровне User Story"');if(N===Lt.WithRequirement&&Ge.fields["System.WorkItemType"]!=="User Story"&&Ge.fields["System.WorkItemType"]!=="Bug")throw new Error("WorkItem не является UserStory или Bug");return Ge})().then(n).catch(Ho).finally(()=>o(!1)),pe=async()=>(async()=>{var Bs;if(d(!0),!s)throw new Error("WorkItem is not specified");let ee=[];const Ge=await od({projectId:s.fields["System.TeamProject"]});y(Ge);const Me=async J=>await dd(J).then(ae=>ae.filter(Pe=>Pe.fields&&Pe.fields.hasOwnProperty("System.State")).map(Pe=>{let ht=new nn;return ht.changedAt=Pe.fields["System.ChangedDate"].newValue,ht.changedBy=Pe.revisedBy.displayName,ht.event=Pe.fields["System.State"].newValue,ht})),Vt=J=>J==="Task"?Ke.Task:J==="Bug"?Ke.Bug:J==="User Story"?Ke.UserStory:Ke.Unknown,_t=new ar;_t.id=`wi-${s.id}`,_t.type=Vt(s.fields["System.WorkItemType"]),_t.title=s.fields["System.Title"],_t.assignedTo=(Bs=s.fields["System.AssignedTo"])==null?void 0:Bs.displayName,_t.url=Yo(s.id),_t.events=await Me(s.id),ee.push(_t);const Gs=await ad(s),Ro=await Promise.all(Gs.map(async J=>{var Pe;const ae=new ar;return ae.id=`wi-${J.id}`,ae.type=Vt(J.fields["System.WorkItemType"]),ae.title=J.fields["System.Title"],ae.assignedTo=(Pe=J.fields["System.AssignedTo"])==null?void 0:Pe.displayName,ae.url=Yo(J.id),ae.events=await Me(J.id),ae}));ee.push(...Ro);const Zi=[s].concat(Gs),Us=await Promise.all(Zi.map(async J=>await ld(J))).then(J=>J.flat().filter((ae,Pe,ht)=>ht.findIndex(S=>S.pullRequestId===ae.pullRequestId)===Pe)),Ki=await Promise.all(Us.map(async J=>{var S;const ae=new ar;ae.id=`pr-${J.pullRequestId}`,ae.type=Ke.PR,ae.title=J.title,ae.assignedTo=J.createdBy.displayName,ae.events=[],ae.events.push(new nn("Created",J.createdBy.displayName,J.creationDate));const ht=(await hd(J)).map(O=>O.comments).flat().filter(O=>O.author.displayName!=="Microsoft.VisualStudio.Services.TFS").map(O=>{let ve=new nn;return ve.changedAt=O.publishedDate,ve.changedBy=O.author.displayName,ve.event=O.content,ve});return ae.events.push(...ht),ae.events.push(new nn("Closed",(S=J.closedBy)==null?void 0:S.displayName,J.closedDate)),ae}));return ee.push(...Ki),ee})().then(l).catch(Ho).finally(()=>d(!1)),bt=()=>{const H=a.map(S=>({...S,events:S.events.map(O=>({...O,changedAt:cd(O.changedAt)}))})),ee=(S,O)=>S.url?`<a href="${S.url}" target="_blank">${O}</a>`:O,Ge=H.map(S=>({id:S.id,content:`<div>${S.type}</div>${ee(S,Qi(S.title,60))}<br><b>${Qi(S==null?void 0:S.assignedTo,20)}</b>`,className:`vis-${S.type}`,order:ud(S.events.map(O=>O.changedAt))})),Me=H.map(S=>S.events.map(O=>({start:O.changedAt,content:f===xt.Overview?Qi(O.event,10):`${Qi(O.changedBy,15)}<br>${Qi(O.event,15)}`,title:f===xt.Detailed?"":`${O.changedBy}<br>${O.event}<br>${O.changedAt}`,className:`vis-${S.type}`,group:S.id,type:f===xt.Overview?"point":"box",showMajorLabels:f===xt.Detailed}))).flat(),Vt=Me.reduce((S,O)=>O.start<S?O.start:S,Me[0].start),_t=Me.reduce((S,O)=>O.start>S?O.start:S,Me[0].start),Gs=Jh(Vt,_t).filter(S=>ed(S)).map(S=>Ge.map(O=>({start:Fo(S),end:td(Fo(S),1),content:"",className:"vis-weekend",group:O.id,type:"background",title:"Выходные",showMajorLabels:!1}))).flat(),Zi=H.filter(S=>S.type!==Ke.UserStory).map(S=>({periodStart:S.events.reduce((O,ve)=>ve.changedAt<O?ve.changedAt:O,S.events[0].changedAt),periodEnd:S.events.reduce((O,ve)=>ve.changedAt>O?ve.changedAt:O,S.events[0].changedAt)})).map(S=>[{datetime:S.periodStart,type:"start"},{datetime:S.periodEnd,type:"end"}]).flat().sort((S,O)=>S.datetime>O.datetime?1:-1),Us=[];let Ki=0;for(let S=0;S<Zi.length-1;S++){const O=Zi[S];O.type==="start"?Ki++:Ki--,Ki===0&&Us.push({start:O.datetime,end:Zi[S+1].datetime})}const Bs=Us.filter(S=>Kn(S.start,S.end,A,E)>=B).map(S=>Ge.map(O=>({start:S.start,end:S.end,content:"",className:"vis-inactivity-window",group:O.id,type:"background",title:"Отсутствует активность",showMajorLabels:!1}))).flat(),J=H.filter(S=>[Ke.Task,Ke.Bug,Ke.UserStory].includes(S.type)).map(S=>{const O=[],ve=S.events.sort((Ue,dt)=>Ue.changedAt>dt.changedAt?1:-1);for(let Ue=0;Ue<ve.length-1;Ue++){const dt=ve[Ue];if(dt.event.toLocaleLowerCase().includes("qa")){const Rt=ve[Ue+1];O.push({item:S,start:dt.changedAt,end:Rt.changedAt})}}return O}).flat().filter(S=>Kn(S.start,S.end,A,E)>=We).map(S=>({start:S.start,end:S.end,content:"",className:"vis-inactivity-window not-tested",group:S.item.id,type:"background",title:"Отсутствует активность в тестировании",showMajorLabels:!1})),ae=H.filter(S=>[Ke.PR].includes(S.type)).map(S=>{const O=[],ve=S.events.sort((dt,Rt)=>dt.changedAt>Rt.changedAt?1:-1);let Ue=ve[0];for(let dt=0;dt<ve.length;dt++){const Rt=ve[dt];Ue||Rt.event.toLocaleLowerCase().includes("voted")||(Ue=Rt),Ue&&Rt.event.toLocaleLowerCase().includes("voted")&&(O.push({item:S,start:Ue.changedAt,end:Rt.changedAt}),Ue=null)}return O}).flat().filter(S=>Kn(S.start,S.end,A,E)>=vt).map(S=>({start:S.start,end:S.end,content:"",className:"vis-inactivity-window pr",group:S.item.id,type:"background",title:"Отсутствует активность в ревью",showMajorLabels:!1}));Me.push(...Gs),D&&(Me.push(...Bs),Me.push(...J),Me.push(...ae));const Pe={start:Vt};u==null||u.destroy();const ht=new Io(document.getElementById("timeline"),Me,Ge,Pe);c(ht)};return Xt("div",{children:[U(id,{title:"Таймлайн по Work Item"}),Xt(sd,{children:[U("input",{value:t,onChange:H=>e(H.target.value),placeholder:N===Lt.WithRequirement?"User Story ID or Bug ID":"User Story ID"}),U("button",{onClick:we,disabled:r,children:"Применить WorkItem"}),U("button",{onClick:P,children:"Настройки"})]}),Xt("div",{children:[U("br",{}),U("label",{children:s?"Выбран "+s.fields["System.WorkItemType"]+": "+s.fields["System.Title"]:"Не выбран WorkItem"}),U("br",{}),U("br",{}),Xt(Hu,{isOpen:de,onRequestClose:ye,ariaHideApp:!1,children:[Xt("div",{children:[U("label",{children:"Вид таймлайна: "}),U("select",{onChange:H=>{p(xt[H.target.value])},children:Lo(xt).map((H,ee)=>U("option",{value:H,children:xt[H]},ee))})]}),U("hr",{}),Xt("div",{children:[U("label",{children:"Режим работы с багами: "}),U("select",{onChange:H=>{R(Lt[H.target.value])},children:Lo(Lt).map((H,ee)=>U("option",{value:H,children:Lt[H]},ee))})]}),U("hr",{}),Xt("div",{children:[U("label",{children:'Выделять неактивные "окна" в таймлайне?'}),U("input",{type:"checkbox",checked:D,onChange:H=>C(H.target.checked)}),U("br",{}),U("label",{children:"Примерное время рабочего дня (в часах)"}),U("label",{children:" с "}),U("input",{type:"number",value:A,onChange:H=>M(Number(H.target.value))}),U("label",{children:" до "}),U("input",{type:"number",value:E,onChange:H=>I(Number(H.target.value))}),U("br",{}),U("label",{children:"Отметить, если на таймлайне нет активности в течение "}),U("input",{type:"number",value:B,onChange:H=>Ce(Number(H.target.value))}),U("label",{children:" рабочих часов"}),U("br",{}),U("label",{children:"Отметить, если задача не тестировалась в течение "}),U("input",{type:"number",value:We,onChange:H=>Ws(Number(H.target.value))}),U("label",{children:" рабочих часов"}),U("br",{}),U("label",{children:"Отметить, если PR не проходил ревью в течение "}),U("input",{type:"number",value:vt,onChange:H=>vi(Number(H.target.value))}),U("label",{children:" рабочих часов"})]})]}),U("button",{onClick:pe,disabled:h,children:"Отрисовать таймлайн"})]}),U("div",{id:"timeline"}),U(nd,{})]})}export{Gb as default};
